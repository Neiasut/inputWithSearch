!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i={delegateFn:function(e,t,n){for(var r=e.target,i=e.relatedTarget,a=void 0;r&&r!==document&&!(a=r.classList.contains(t));)r=r.parentNode;if(a){for(;i&&i!==r&&i!==document;)i=i.parentNode;if(i!==r)return n(e,r)}},extend:function e(){var t={},n=!1,r=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],r++);for(var a=function(r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n&&"[object Object]"===Object.prototype.toString.call(r[i])?t[i]=e(!0,t[i],r[i]):t[i]=r[i])};r<i;r++)a(arguments[r]);return t},callEvent:function(e,t,n){var r={bubbles:!0};void 0!==n&&(r.detail=n),e.dispatchEvent(new CustomEvent(t,r))},hasClass:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},highlightMatchesToString:function(e,t){var n=new RegExp("("+t+")","gi");return e.replace(n,'<span class="InputWithSearchWindow-Coincidence">$1</span>')},mergeListArraysWithoutDuplicates:function(e,t){return Object.entries(e).reduce(function(e,n){var i=r(n,2),a=i[0],s=i[1];return a in t&&Array.isArray(t[a])?e[a]=Array.from(new Set(s.concat(t[a]))):e[a]=s,e},{})},insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({name:e,object:t,cb:n,cbBefore:r},Symbol.iterator,regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e;case 2:return i.next=4,t;case 4:return i.next=6,n;case 6:return i.next=8,r;case 8:case"end":return i.stop()}},i,this)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new WeakMap,i={setDataWeakMapIWS:function(e,t){r.set(e,t)},getDataWeakMapIWS:function(e){return r.get(e)}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Ошибка в свойстве "+e));return n.property=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.CustomError),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),a=Symbol("protectedRecordsEventSave"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[a]=new Map,!1!==t&&t instanceof HTMLElement?this.rootDomElement=t:this.rootDomElement=null}return r(e,[{key:"addRecord",value:function(e,t,n,r){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this[a].has(e))throw new i.PropertyError(e);t.addEventListener(n,r),this[a].set(e,{domElement:t,events:n,fn:r,protectedStatus:s})}},{key:"addCustomRecord",value:function(e,t,n){null!==this.rootDomElement&&this.addRecord(e,this.rootDomElement,t,n)}},{key:"getRecordByName",value:function(e){return this[a].get(e)}},{key:"addListRecords",value:function(e){var t=this;e.forEach(function(e){e[Symbol.iterator]=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.name;case 2:return e.next=4,this.domElement;case 4:return e.next=6,this.events;case 6:return e.next=8,this.fn;case 8:return e.next=10,this.protectedStatus;case 10:case"end":return e.stop()}},e,this)}),t.addRecord.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))})}},{key:"removeRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getRecordByName(e);if(!0!==t&&!1!==n.protectedStatus)throw new i.PropertyError(e);n.domElement.removeEventListener(n.events,n.fn),this[a].delete(e)}},{key:"removeAllRecords",value:function(){var e=this;this[a].forEach(function(t,n){e.removeRecord(n,!0)})}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(15)),a=c(n(14)),s=c(n(3)),o=c(n(0)),u=c(n(2));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.hasOwnProperty("singleton"))return e.singleton;Object.defineProperty(e,"singleton",{value:this,enumerable:!1,writable:!1,configurable:!1});var t={list:new i.default,themes:new Map};u.default.setDataWeakMapIWS(this,t)}return r(e,[{key:"getElement",value:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=function(e){return e instanceof HTMLElement},l=c(e)?e:!("string"!=typeof(n=t=e)||!c(document.getElementById(n)))&&document.getElementById(t);if(!1!==l){var h=u.default.getDataWeakMapIWS(this).list;if(!h.hasElement(l)){var f=Object.values(function(){var e={};if(""!==s){Array.isArray(s)||(s=[s]);var t=u.default.getDataWeakMapIWS(r).themes;s.reduce(function(e,n){return t.has(n)&&(e[n]=t.get(n)),e},e)}return e}()),d=!0,v=!1,y=void 0;try{for(var p,m=f[Symbol.iterator]();!(d=(p=m.next()).done);d=!0)"function"==typeof(O=p.value.fnRunBeforeStart)&&O.call(null,l)}catch(e){v=!0,y=e}finally{try{!d&&m.return&&m.return()}finally{if(v)throw y}}var g=!0,b=!1,k=void 0;try{for(var w,E=f[Symbol.iterator]();!(g=(w=E.next()).done);g=!0){var S=w.value.objectData;Object.keys(S).length&&(i=o.default.extend(!0,{},S,i))}}catch(e){b=!0,k=e}finally{try{!g&&E.return&&E.return()}finally{if(b)throw k}}var W=new a.default(l,i);h.addElement(l,W);var _=!0,C=!1,A=void 0;try{for(var L,D=f[Symbol.iterator]();!(_=(L=D.next()).done);_=!0){var O;"function"==typeof(O=L.value.fnRunOnStart)&&O.call(null,W)}}catch(e){C=!0,A=e}finally{try{!_&&D.return&&D.return()}finally{if(C)throw A}}}return h.getElement(l)}throw new Error("Нет валидного DOM-элемента для выдачи "+e)}},{key:"addTheme",value:function(e,t,n,r){var i=u.default.getDataWeakMapIWS(this).themes;if(i.has(e))throw new s.default(e);i.set(e,{objectData:t,fnRunOnStart:n,fnRunBeforeStart:r})}}],[{key:"getInstance",value:function(){return this.singleton}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(1))&&r.__esModule?r:{default:r};t.default=(0,i.default)("openInfo",{baseWindowEventsActive:{interceptionEvents:!1,mouseEnterElement:!1,clickElement:!1},constructors:{element:function(e){return e}},maxViewElements:1,classes:{wrapper:["InputWithSearchWindow_theme_openInfo"]},cssParamsWindow:{minWidth:200,maxWidth:286,seekWidthTo:"max"}},function(e){var t=e.getWorkDomElement().getAttribute("data-iws-data");e.setCustomData([t])})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return e.detail.inputWithSearch.object},o=function(e){return e+"_select"},u=function(e){var t=s(e),n=t.getWorkDomElement(!0);n.style.display="none";var r=o(t.id);(function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["InputWithSearchSelect"],a=document.createElement("div");a.setAttribute("id",t),(n=a.classList).add.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r)),a.innerHTML="\n    delegateElement\n",i.default.insertAfter(a,e)})(n,r),t.updateSettings({delegateElement:document.getElementById(r)})},c=function e(t){var n=s(t),r=n.getWorkDomElement(!0);r.removeEventListener("inputWithSearch_beforeInit",u),r.removeEventListener("inputWithSearch_beforeDestruction",e),r.style.display="",r.parentElement.removeChild(document.getElementById(o(n.id)))};t.default=(0,r.default)("select",{onEvents:"click"},function(e){e.setCustomData(["test","test2","test3"])},function(e){e.addEventListener("inputWithSearch_beforeInit",u),e.addEventListener("inputWithSearch_beforeDestruction",c)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(1))&&r.__esModule?r:{default:r};t.default=(0,i.default)("withPerfectScrollbar",{},function(e){if(window.PerfectScrollbar){var t=e.getListeners();t.addCustomRecord("test_afterOpen","inputWithSearch_afterOpen",function(){var t=e.inputWithSearchWindow.getElementByKey("wrapperInner"),n=new window.PerfectScrollbar(t,{wheelPropagation:!1});e.getCustomContainer().set("customScroll",n)}),t.addCustomRecord("test_onChangeWindow","inputWithSearch_onChangeWindow",function(){e.getCustomContainer().get("customScroll").update()}),t.addCustomRecord("test_inputWithSearch_beforeClose","inputWithSearch_beforeClose",function(){var t=e.getCustomContainer();t.get("customScroll").destroy(),t.delete("customScroll")})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=window.inputWithSearch;e.addTheme.apply(e,o(r.default)),e.addTheme.apply(e,o(i.default)),e.addTheme.apply(e,o(a.default))};var r=s(n(8)),i=s(n(7)),a=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readOnly=function(e,t,n){return n.writable=!1,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._idParent=t,this._callbacks=e._prepareObjectCallbacks(n),this.clear()}return r(e,[{key:"addData",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data=e.wrapListElements(e.validateData(t),this._idParent),this._value=n,this._customData=r,this._date=Date.now(),this._actionData=this._data.slice(0),this.activeKey="clear"}},{key:"saveActionData",value:function(e){this._actionData=e}},{key:"clear",value:function(){this.addData([],"")}},{key:"checkCustomData",value:function(){return this._customData}},{key:"getData",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"typical",r=t?this._data:this._actionData;switch(n){case"clear":return e.unWrapListElement(r);case"keyId":return r.reduce(function(e,t){return e[t.key]=t,e},{});default:return r}}},{key:"getDataByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getData(!1,"keyId")[e];return void 0!==n?t?n:n.data:void 0}},{key:"_setAction",value:function(e,t){if("clear"===e)return u(t,this._actionData),void this._runCbOnName(t,e);this.checkKeyInActionData(e)&&(u(t,this._actionData),this.getData(!1,"keyId")[e][t]=!0,this._runCbOnName(t,e))}},{key:"checkKeyInActionData",value:function(e){return-1!==Object.keys(this.getData(!1,"keyId")).indexOf(e)}},{key:"validateSaveDataForRequest",value:function(e,t){var n=function(e){return e.toLowerCase()};return""!==this._value&&-1!==n(e).indexOf(n(this._value))&&Date.now()-this._date<t}},{key:"_runCbOnName",value:function(e,t){this._checkActivityCallback(e)&&(0,this._callbacks.get(e).cb)(t)}},{key:"setInactivityCallback",value:function(t){e.checkNameInAvailableCbs(t)&&(this._callbacks.get(t).activity=!1)}},{key:"setActivityCallback",value:function(t){e.checkNameInAvailableCbs(t)&&(this._callbacks.get(t).activity=!0)}},{key:"_checkActivityCallback",value:function(e){return this._callbacks.get(e).activity}},{key:"hoveredKey",get:function(){return s("hover",this._actionData)},set:function(e){this._setAction(e,"hover")}},{key:"activeKey",get:function(){return s("active",this._actionData)},set:function(e){this._setAction(e,"active")}}],[{key:"unWrapListElement",value:function(e){return e.map(function(e){return e.data})}},{key:"wrapListElements",value:function(t,n){return t.map(function(t,r){return e.wrapElementList(t,n,r)})}},{key:"wrapElementList",value:function(e,t,n){return{data:e,key:t+"_"+n,hover:!1,active:!1}}},{key:"validateData",value:function(e){if(Array.isArray(e))return e;if(e instanceof Object)return Object.values(e);throw new Error("Полученные данные не являются JSON-массивом.")}},{key:"repositionActiveToTop",value:function(e){var t=o("active",e),n=e.slice(0);return"null"!==t&&e.length>1&&-1!==t.index&&n.unshift.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.splice(t.index,1))),n}},{key:"checkNameInAvailableCbs",value:function(e){return-1!==this.nameCbs.indexOf(e)}},{key:"_prepareObjectCallbacks",value:function(e){return this.nameCbs.reduce(function(t,n){if(void 0!==e[n]){var r="function"==typeof e[n]&&e[n];t.set(n,{cb:r,activity:!0})}return t},new Map)}},{key:"nameCbs",get:function(){return["active","hover"]}}]),e}(),a=function(e,t){var n=-1;return t.some(function(t,r){return!!t[e]&&(n=r,!0)}),n},s=function(e,t){var n=a(e,t);return-1!==n?t[n].key:"null"},o=function(e,t){var n=a(e,t);return-1!==n?{data:t[n],index:n}:"null"},u=function(e,t){t.forEach(function(t){t[e]=!1})};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="CustomError",n.message=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();t.CustomError=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=o(n(4)),s=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=e.defaultSettings,this.updateSettings(n),this.addToDomWindow(),this.addElementsToConfig(),this.addListeners(),this.dependElement=t,this.setBlockHoverSelected(),this.setStatus(),this.reSetPosition()}return i(e,[{key:"addToDomWindow",value:function(){document.body.appendChild(this.constructorDOM())}},{key:"constructorDOM",value:function(){var e,t=this.constructorTriangle()+'\n                <div class="'+this.getClassesByKey("wrapperSub",!0)+'">\n                    <div class="'+this.getClassesByKey("wrapperInner",!0)+'">\n                        <div class="'+this.getClassesByKey("wrapperList",!0)+'"></div>\n                        '+this.constructorCloseBtn()+"\n                    </div>\n                </div>\n            ",n=document.createElement("div");return(e=n.classList).add.apply(e,u(this.getClassesByKey("wrapper"))),n.innerHTML=t,n}},{key:"constructorCloseBtn",value:function(){return this.settings.closeBtn?'<div class="'+this.getClassesByKey("wrapperCloseBtn",!0)+'"></div>':""}},{key:"constructorTriangle",value:function(){return this.settings.triangle?'\n                <div class="'+this.getClassesByKey("wrapperTriangle",!0)+'"></div>\n            ':""}},{key:"addElementsToConfig",value:function(){this.elements={};var t=!0,n=!1,r=void 0;try{for(var i,a=Object.keys(e.classesBase)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;this.addElementToConfig(s)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}this.addMutationObserver()}},{key:"addMutationObserver",value:function(){var e=this,t=new MutationObserver(function(t){e.fireEventAndCallback("inputWithSearchWindow_changeContent",{mutations:t})});t.observe(this.getElementByKey("wrapperList"),{childList:!0}),this.observerList=t}},{key:"removeMutationObserver",value:function(){this.observerList.disconnect()}},{key:"addElementToConfig",value:function(t){var n=e.classesBase[t][0];this.elements[t]=document.querySelector("."+n)}},{key:"getElementByKey",value:function(e){return this.elements[e]}},{key:"addInfoToList",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.getElementByKey("wrapperList").innerHTML=this.getElementByKey("wrapperList").innerHTML+e:this.getElementByKey("wrapperList").innerHTML=e}},{key:"destructor",value:function(){this.fireEventAndCallback("inputWithSearchWindow_destruction"),this.removeListeners(),this.removeMutationObserver(),this._setHoveredKey("clear"),this.destructorDOM()}},{key:"fireEventAndCallback",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t in e.listCallbacksAndEvents){var r=this.elements.wrapper,i={inputWithSearchWindow:{object:this,data:n}};s.default.callEvent(r,t,{inputWithSearchWindow:this});var a=this.settings.callbacks[t];"function"==typeof a&&a.apply(void 0,u(Object.values(i.inputWithSearchWindow)))}}},{key:"destructorDOM",value:function(){var e=this.getElementByKey("wrapper");e.parentNode.removeChild(e)}},{key:"addListeners",value:function(){var t=this;this.timerWaitToBlockHoverSelected=!1,this.listeners=new a.default;var n=this.elements.wrapper,r=e.getClassesBaseByKey("elementList")[0],i=this.settings.baseEventsActive,o=[{name:"clickElement",domElement:n,events:"click",fn:function(n){return s.default.delegateFn(n,r,function(n,r){t.setElemListActiveByKey(e._getKeyAttrFromDomElement(r)),t.fireEventAndCallback("inputWithSearchWindow_clickOnElementList",r)})},protectedStatus:!0},{name:"resize",domElement:window,events:"resize",fn:function(){t.reSetPosition()},protectedStatus:!0},{name:"clickOuter",domElement:document,events:"click",fn:function(e){e.target.closest("."+t.getClassesByKey("wrapper")+", .InputWithSearch")||t.destructor()},protectedStatus:!0},{name:"mouseEnterElement",domElement:n,events:"mouseover",fn:function(e){return s.default.delegateFn(e,r,function(e,n){t.checkBlockHoverSelected()||t._setElemListHover(n)})},protectedStatus:!0},{name:"interceptionEvents",domElement:document,events:"keydown",fn:function(e){var n=t,r=t.getRelativeObject();if(r.checkStatus(1)){var i=40===e.keyCode,a=38===e.keyCode,s=13===e.keyCode;if((a||i)&&n.checkStatus()&&(e.preventDefault(),t.timerWaitToBlockHoverSelected=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return clearTimeout(e),t.setBlockHoverSelected(!0),setTimeout(function(){t.setBlockHoverSelected(!1)},n)}(t.timerWaitToBlockHoverSelected,n),i&&n.setElemListHoverByDirection(),a&&n.setElemListHoverByDirection(!1)),s){var o=n._getHoveredKey();"null"!==o&&(t.setElemListActiveByKey(o),r._setActiveByKeyFromList(o)),r.close()}}},protectedStatus:!0}];this.settings.closeBtn&&o.push({name:"closeBtnEvent",domElement:this.getElementByKey("wrapperCloseBtn"),events:"click",fn:function(){t.destructor()},protectedStatus:!0}),o.forEach(function(n){var r,a=Object.values(n),s=a[0];s in e.baseEventsActive&&!0!==i[s]||(r=t.listeners).addRecord.apply(r,u(a))})}},{key:"getRelativeObject",value:function(){return window.inputWithSearch.getElement(this.dependElement)}},{key:"setElemListHoverByKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.checkStatus()&&this._getList().checkKeyInActionData(e)){var n=this.getClassesByKey("elementList")[0],r=this.elements.wrapper.querySelector("."+n+'[data-key="'+e+'"]');null!==r&&this._setElemListHover(r,t,e)}}},{key:"setElemListHoverByDirection",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.getDataForList(!0)),n=this._getHoveredKey(),r=t.indexOf(n);return e?-1===n?void this.setElemListHoverByKey(t[0]):t[t.length-1]===n?void this.setElemListHoverByKey(n):void this.setElemListHoverByKey(t[r+1]):0===r?(this._unHoveredElements(),void this._setHoveredKey("clear")):void this.setElemListHoverByKey(t[r-1])}},{key:"_unHoveredElements",value:function(){var t=e.getClassesBaseByKey("elementListHovered")[0];this.elements.wrapper.querySelectorAll("."+t).forEach(function(e){e.classList.remove(t)})}},{key:"_setElemListHover",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="string"==typeof r?r:t.getAttribute("data-key"),a=e.getClassesBaseByKey("elementListHovered")[0];i!==this._getHoveredKey()&&(this._unHoveredElements(),this._setHoveredKey(i),n&&(this.elements.wrapperInner.scrollTop=t.offsetTop)),t.classList.add(a)}},{key:"setElemListActiveByKey",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("null"!==t&&(t!==this._getActiveKey()||n)){var i=e.getClassesBaseByKey("elementListSelected")[0];this._unActiveElements(),n||this._setActiveKey(t);var a=this._getDomElementByKey(t);r&&(this.elements.wrapperInner.scrollTop=a.offsetTop),a.classList.add(i)}}},{key:"_getDomElementByKey",value:function(e){return this.elements.wrapper.querySelector('[data-key="'+e+'"]')}},{key:"_unActiveElements",value:function(){var t=e.getClassesBaseByKey("elementListSelected")[0];this.elements.wrapper.querySelectorAll("."+t).forEach(function(e){e.classList.remove(t)})}},{key:"setBlockHoverSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.blockHoverSelected=e}},{key:"checkBlockHoverSelected",value:function(){return this.blockHoverSelected}},{key:"removeListeners",value:function(){this.listeners.removeAllRecords()}},{key:"updateSettings",value:function(e){var t=!1;"classes"in e&&(t=s.default.mergeListArraysWithoutDuplicates(this.settings.classes,e.classes)),this.settings=s.default.extend(!0,{},this.settings,e),t&&(this.settings.classes=t)}},{key:"getClassesByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.settings.classes[e];return t?n.join(" "):n}},{key:"reSetPosition",value:function(){var e=this.getRelativeObject().getWorkDomElement();if(l(e))this.destructor();else{var t=this.settings.cssParams,n=this.settings.cssCallbacks,i=n.window,a=n.triangle;if(h(i))i(e,t);else{var s=e.getBoundingClientRect(),o=window.pageYOffset||document.documentElement.scrollTop,u=this.elements.wrapper.style,c=s.width,f=window.innerWidth,d=r(t.margin,4),v=d[0],y=d[1],p=d[2],m=d[3],g=f-m-y,b=this.settings.cssParams.seekWidthTo;if("none"!==b)switch(b){case"max":c=t.maxWidth;break;case"min":c=t.minWidth}g<c&&(c=g),c<t.minWidth&&(c=t.minWidth),c>t.maxWidth&&(c=t.maxWidth);var k=s.left+(s.width-c)/2;k<m&&(k=m),f-(k+c)<y&&(k=f-c-y),u.top=o+s.bottom-(o+document.body.getBoundingClientRect().top)+"px",u.left=Math.ceil(k)+"px",u.width=c+"px",u.position="absolute",v>0&&(u.marginTop=v+"px"),p>0&&(u.marginBottom=p+"px")}var w=this.getElementByKey("wrapperTriangle");if(null!==w){var E=e.getBoundingClientRect(),S=this.elements.wrapper.getBoundingClientRect();if(h(a))a(w,e,t);else{var W=E.left-S.left+E.width/2-w.offsetWidth/2;w.style.left=Math.ceil(W)+"px"}}}}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.haveData=e}},{key:"checkStatus",value:function(){return this.haveData}},{key:"_getList",value:function(){return this.getRelativeObject().savesData}},{key:"getDataForList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._getList().getData(!1,!0===e?"keyId":null)}},{key:"_setHoveredKey",value:function(e){this._getList().hoveredKey=e}},{key:"_getHoveredKey",value:function(){return this._getList().hoveredKey}},{key:"_setActiveKey",value:function(e){this._getList().activeKey=e}},{key:"_getActiveKey",value:function(){return this._getList().activeKey}},{key:"addListElements",value:function(t,n){var r=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.addInfoToList(""),this.setStatus(!0),t.forEach(function(t,i){r.addInfoToList(e.constructElement(t,n,i,r.settings.constructors.element,r.getClassesByKey("elementList",!0)),!0)});var a=this._getActiveKey(),s="null"!==a;if(i)this.setElemListActiveByKey(a,!0,!1);else if(s)this.setElemListActiveByKey(a,!0,!0),this.setElemListHoverByKey(a,!0);else{var o=this._getHoveredKey();"null"!==o&&this.setElemListHoverByKey(o,i)}}},{key:"setToMessage",value:function(t,n){this.setStatus(),this.addInfoToList(e.constructMessage(t,n,this.settings.constructors[t],this.getClassesByKey("message")))}},{key:"setToError",value:function(){this.setStatus();for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];this.addInfoToList(e.constructMessageError.apply(e,n.concat([this.getClassesByKey("error"),this.settings.constructors.error])))}},{key:"setToWait",value:function(){this.setStatus(),this.addInfoToList(e.constructWaitThrobber())}}],[{key:"_getKeyAttrFromDomElement",value:function(e){return e.getAttribute("data-key")}},{key:"getClassesBaseByKey",value:function(e){return this.classesBase[e]}},{key:"constructElement",value:function(e,t,n,r,i){return'\n                <div class="'+i+'" data-key="'+e.key+'" data-numb="'+n+'">\n                    '+r(e.data,t,s.default.highlightMatchesToString)+"\n                </div>\n            "}},{key:"constructMessage",value:function(e,t,n,r){return'\n                <div class="'+r+'">\n                    '+n.apply(void 0,u(t))+"\n                </div>\n            "}},{key:"constructMessageError",value:function(e,t,n,r){return'\n                <div class="'+n+'">\n                    '+r(e,t)+"\n                </div>\n            "}},{key:"constructWaitThrobber",value:function(){return'\n            <div class="InputWithSearchWindow-Load">\n                <div class="InputWithSearchLoader">\n                    <div class="InputWithSearchLoader-Loader"></div>\n                </div>\n            </div>\n            '}},{key:"classesBase",get:function(){return{wrapper:["InputWithSearchWindow"],wrapperSub:["InputWithSearchWindow-Sub"],wrapperInner:["InputWithSearchWindow-Inner"],wrapperList:["InputWithSearchWindow-List"],wrapperTriangle:["InputWithSearchWindow-Triangle"],wrapperCloseBtn:["InputWithSearchWindow-CloseBtn"],elementList:["InputWithSearchWindow-Element"],elementListSelected:["InputWithSearchWindow-Element_selected"],elementListHovered:["InputWithSearchWindow-Element_hovered"],message:["InputWithSearchWindow-Message"],error:["InputWithSearchWindow-Error"]}}},{key:"listCallbacksAndEvents",get:function(){return{inputWithSearchWindow_clickOnElementList:!1,inputWithSearchWindow_destruction:!1,inputWithSearchWindow_changeContent:!1}}},{key:"defaultSettings",get:function(){return{classes:this.classesBase,constructors:{element:function(e,t,n){return n("Данные "+e+" cо значением "+t)},error:function(e){return e},lessSymbols:function(e,t){return"Введите "+t+" или более символов."},notFind:function(e){return"По запросу "+e+" ничего не было найдено!."}},callbacks:this.listCallbacksAndEvents,cssParams:this.defaultCssParams,triangle:!1,closeBtn:!1,baseEventsActive:this.baseEventsActive}}},{key:"baseEventsActive",get:function(){return{mouseEnterElement:!0,interceptionEvents:!0,clickElement:!0}}},{key:"defaultCssParams",get:function(){return{margin:[0,10,0,10],minWidth:200,maxWidth:300,seekWidthTo:"none"}}},{key:"cssCallbacks",get:function(){return{window:"standart",triangle:"standart"}}}]),e}(),l=function(e){return null===e.offsetParent},h=function(e){return"function"==typeof e};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=p(n(13)),l=p(n(5)),h=p(n(0)),f=p(n(4)),d=p(n(2)),v=p(n(11)),y=n(10);function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var g,b,k,w,E,S=(r=function(){function e(t){var n,r,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(r=i)&&Object.defineProperty(this,"id",{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(this):void 0}),this._domElement=t,this.settings=e.settings,this.updateSettings(s),this.createCustomContainer(),this.fireEventAndCallback("inputWithSearch_beforeInit"),this.waitData=!1,this.xhr=!1,this.promiseXhr=!1,this.savesData=new v.default(this.id,{active:function(e){a.fireEventAndCallback("inputWithSearch_changeActive",{key:e})},hover:function(e){a.fireEventAndCallback("inputWithSearch_changeHover",{key:e})}}),this.savesData.addData([],this.getValueFromInput()),this.changeStatus([0]),(n=this.getWorkDomElement().classList).add.apply(n,m(this.getClassesByKey("input"))),this.addEventListeners(),this.wasFirstLoad=!1,e.addAttrToDomInput(this.getWorkDomElement()),this.fireEventAndCallback("inputWithSearch_afterInit")}return u(e,[{key:"getWorkDomElement",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!W(this.settings.delegateElement)?this._domElement:this.settings.delegateElement}},{key:"getListeners",value:function(){return this.listeners}},{key:"addEventListeners",value:function(){var e=this,t=this.getListeners(),n=this.getWorkDomElement();switch(void 0!==t&&t instanceof f.default&&t.removeAllRecords(),t=new f.default(this.getWorkDomElement(!0)),this.settings.onEvents){case"input":t.addListRecords([{name:"onEvents",domElement:n,events:this.settings.onEvents,fn:function(){e.open()},protectedStatus:!0}]);break;case"click":t.addListRecords([{name:"onEvents",domElement:n,events:this.settings.onEvents,fn:function(){e.checkStatus(0)?e.open():e.close()},protectedStatus:!0}]);break;case"hover":var r=null,i=function(){clearTimeout(r),r=setTimeout(function(){e.close()},50)};t.addListRecords([{name:"openWrapperHover",domElement:n,events:"inputWithSearch_afterOpen",fn:function(){clearTimeout(r);var t=e.inputWithSearchWindow.getElementByKey("wrapper"),n=e.inputWithSearchWindow.listeners;n.addRecord("mouseLeaveWrapperHover",t,"mouseleave",i,!0),n.addRecord("mouseEnterWrapperHover",t,"mouseenter",function(){clearTimeout(r)},!0)},protectedStatus:!0},{name:"onEvents",domElement:n,events:"mouseenter",fn:function(){e.checkStatus(0)&&e.open(),e.checkStatus(1)&&clearTimeout(r)},protectedStatus:!0},{name:"mouseLeaveElement",domElement:n,events:"mouseleave",fn:i,protectedStatus:!0}]);break;default:console.warn("Параметр onEvents заполнен неверно!")}this.listeners=t}},{key:"removeEventListeners",value:function(){this.listeners.removeAllRecords()}},{key:"getValueFromInput",value:function(){var e=this.getWorkDomElement();return"function"==typeof this.settings.fns.fnGetValueFromInput?this.settings.fns.fnGetValueFromInput.call(null,e):_(e)?e.value:e.textContent}},{key:"setValueToInput",value:function(e){var t=this.getWorkDomElement();"function"!=typeof this.settings.fns.fnSetValueToInput?_(t)?t.value=e:t.textContent=e:this.settings.fns.fnSetValueToInput.call(null,t,e)}},{key:"updateSettings",value:function(e){var t=!1;"classes"in e&&"object"===o(e.classes)&&(t=h.default.mergeListArraysWithoutDuplicates(this.settings.classes,e.classes)),this.settings=h.default.extend(!0,{},this.settings,e),t&&(this.settings.classes=t)}},{key:"changeStatus",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];void 0===this.status&&(this.status=new window.Set),n.forEach(function(n){n in e.statuses&&t.status.add(n)}),r.forEach(function(n){n in e.statuses&&t.status.delete(n)})}},{key:"checkStatus",value:function(e){return this.status.has(e)}},{key:"fnOnEventFire",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.changeStatus([],[2,3]);var t=this.getWorkDomElement(),n=_(t);if(!1===e&&(e=t.value),!1===n||e.length>=this.settings.lengthStringToOutput){var r=this.savesData;if(r.checkCustomData())this.constructList();else{var i=!0;if(this.settings.useCache&&this.settings.loadOnlyStart)i=!this.wasFirstLoad;else{var a=r.validateSaveDataForRequest(e,this.settings.timeLiveSaveData);i=!this.settings.useCache||!a}i?this.loadData():this.constructList()}}else this.stopLoadData(),this.setToMessage("lessSymbols",[this.settings.lengthStringToOutput])}},{key:"stopLoadData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];clearTimeout(this.waitData),e&&this.changeStatus([],[2]),"object"===o(this.xhr)&&this.xhr.abort()}},{key:"constructList",value:function(){this._allFilterAndSortProcess();var e=this.savesData.getData(!1);if(e.length)return this.fireEventAndCallback("inputWithSearch_beforeListAddDom"),this.inputWithSearchWindow.addListElements(e,this.getValueFromInput(),this.settings.repositionActiveToTop),void this.fireEventAndCallback("inputWithSearch_afterListAddDom");this.setToMessage("notFind")}},{key:"_allFilterAndSortProcess",value:function(){var e,t,n=this,r=this.savesData,i=r.getData(),a=this.getValueFromInput();this.settings.maxViewElements<i.length&&(e=i,t=this.settings.maxViewElements,i=e.length>t?e.slice(0,t):e),"function"==typeof this.settings.fns.filterData&&(i=i.filter(function(e){return n.settings.fns.filterData(e,a)})),!0===this.settings.repositionActiveToTop&&(i=v.default.repositionActiveToTop(i)),r.saveActionData(i),this.fireEventAndCallback("inputWithSearch_onUpdateDataView")}},{key:"onLoadData",value:function(e,t){var n=JSON.parse(e);this.savesData.addData(n,t),this.constructList(),!1===this.wasFirstLoad&&(this.wasFirstLoad=!0)}},{key:"loadData",value:function(){var e,t=this;this.stopLoadData(!1),this.waitData=setTimeout((e=regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setToWait(),e.prev=1,t.promiseXhr=t.request(t.settings.ajaxConfig.url),n=t.getValueFromInput(),e.next=6,t.promiseXhr;case 6:r=e.sent,t.onLoadData(r,n),e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(1),0!==e.t0){e.next=16;break}t.setToError(new Error("Данные не были получены!")),e.next=17;break;case 16:throw e.t0;case 17:return e.prev=17,t.changeStatus([],[2]),e.finish(17);case 20:case"end":return e.stop()}},e,t,[[1,10,17,20]])}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});e(o)}("next")})}),this.settings.delayBeforeSendRequest)}},{key:"request",value:function(t){var n=this;return new window.Promise(function(r,i){var a=n.xhr=new window.XMLHttpRequest;a.onload=function(){r(a.response)},a.timeout=n.settings.ajaxConfig.timeout,a.onerror=function(){i(a.status)},a.open(n.settings.ajaxConfig.type,t+n.generateGetParams(),!0),a.send(e.prepareAjaxSendData(n.settings.ajaxConfig.data))})}},{key:"generateGetParams",value:function(){var e=this.settings.fns.generateGetParams;return"function"==typeof e?"?"+e(this):""}},{key:"getClassesByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.settings.classes[e];return t?n.join(" "):n}},{key:"open",value:function(){var t=window.inputWithSearchWindow instanceof c.default;if(!this.checkStatus(1)){var n=this.getWorkDomElement();this.fireEventAndCallback("inputWithSearch_beforeOpen"),t&&window.inputWithSearchWindow.destructor(),window.inputWithSearchWindow=this.inputWithSearchWindow=new c.default(this.getWorkDomElement(!0),this.configForInitSearchWindow),e.setInputActive(n,!0),this.changeStatus([1],[0])}this.fnOnEventFire(),this.fireEventAndCallback("inputWithSearch_afterOpen")}},{key:"_setActiveByKeyFromList",value:function(e){var t=this.getDataFromLastDataByKey(e),n=this.getValueFromInput();return this.setValueToInput(this.settings.fns.dataToInputByClick(t)),{data:t,currentValue:this.getValueFromInput(),lastValue:n}}},{key:"getDataFromLastDataByKey",value:function(e){return this.savesData.getData(!1,"keyId")[e]}},{key:"close",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.checkStatus(1)){t&&this.fireEventAndCallback("inputWithSearch_beforeClose"),this.changeStatus([0],[1]);try{n&&window.inputWithSearchWindow.destructor()}finally{window.inputWithSearchWindow=null}e.setInputActive(this.getWorkDomElement(),!1),t&&this.fireEventAndCallback("inputWithSearch_afterClose")}}},{key:"setToError",value:function(e){this.changeStatus([3]),this.fireEventAndCallback("inputWithSearch_onError",[e]),this.inputWithSearchWindow.setToError(e.message,e)}},{key:"fireEventAndCallback",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t in e.getListCallbacksAndEvents()){var r=this.getWorkDomElement(!0),i=s({object:this},n);i[Symbol.iterator]=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.object;case 2:e.t0=regeneratorRuntime.keys(this);case 3:if((e.t1=e.t0()).done){e.next=11;break}if(t=e.t1.value,!this.hasOwnProperty(t)){e.next=9;break}if("object"===t){e.next=9;break}return e.next=9,this[t];case 9:e.next=3;break;case 11:case"end":return e.stop()}},e,this)});var a={inputWithSearch:i};h.default.callEvent(r,t,a);var o=this.settings.callbacks[t];"function"==typeof o&&o.apply(void 0,m(i))}}},{key:"setToWait",value:function(){this.checkStatus(2)||(this.changeStatus([2]),this.inputWithSearchWindow.setToWait())}},{key:"setToMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[this.getValueFromInput()].concat(m(t));this.inputWithSearchWindow.setToMessage(e,n)}},{key:"destructor",value:function(){var t;this.fireEventAndCallback("inputWithSearch_beforeDestruction");var n=this.getWorkDomElement();this.close(),this.removeEventListeners(),e.setInputActive(n,!1),(t=n.classList).remove.apply(t,m(this.getClassesByKey("input"))),d.default.getDataWeakMapIWS(l.default.getInstance()).list.removeElement(n)}},{key:"setCustomData",value:function(e){this.savesData.addData(e,this.getValueFromInput(),!0)}},{key:"createCustomContainer",value:function(){this.customContainer=new Map}},{key:"getCustomContainer",value:function(){return this.customContainer}},{key:"setActive",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="null",r=this.savesData;r.getData(!1).some(function(t){var r=e(t.data);return r&&(n=t.key),r}),"null"!==n&&(!1===t&&r.setInactivityCallback("active"),r.activeKey=n,this._setActiveByKeyFromList(n),this.checkStatus(1)&&(this.inputWithSearchWindow.setElemListActiveByKey(n,!0),this.inputWithSearchWindow.setElemListHoverByKey(n,!1)),!1===t&&r.setActivityCallback("active"))}},{key:"getDataByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.savesData.getDataByKey(e,t)}},{key:"getActiveKey",value:function(){return this.savesData.activeKey}},{key:"configForInitSearchWindow",get:function(){var e,t,n,r=this;return{callbacks:{inputWithSearchWindow_destruction:function(){r.close(!0,!1)},inputWithSearchWindow_clickOnElementList:function(e,t){var n=t.getAttribute("data-key"),i=r._setActiveByKeyFromList(n);r.fireEventAndCallback("inputWithSearch_onClickOption",i),r.close()},inputWithSearchWindow_changeContent:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.fireEventAndCallback("inputWithSearch_onChangeWindow",t)}},classes:(t=this.settings.classes,n=c.default.classesBase,Object.keys(t).reduce(function(e,r){return r in n&&(e[r]=t[r]),e},{})),constructors:(e=this.settings.constructors,Object.entries(e).reduce(function(e,t){var n=a(t,2),r=n[0],i=n[1];return"function"==typeof i&&(e[r]=i),e},{})),cssParams:this.settings.cssParamsWindow,cssCallbacks:this.settings.cssCallbacksWindow,triangle:this.settings.triangle,baseEventsActive:this.settings.baseWindowEventsActive,closeBtn:this.settings.closeBtn}}}],[{key:"_counter",value:function(){return void 0===this.counter&&(this.counter=-1),this.counter+=1,this.counter}},{key:"addAttrToDomInput",value:function(e){e.autocomplete="off"}},{key:"prepareAjaxSendData",value:function(e){var t=e;return"function"==typeof t&&(t=t()),null!==t&&(t="string"==typeof t?t:Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")),t}},{key:"setInputActive",value:function(e,t){t?e.classList.add("InputWithSearch_active"):e.classList.remove("InputWithSearch_active")}},{key:"getBaseClassesByKey",value:function(e){return this.baseClasses[e]}},{key:"getListCallbacksAndEvents",value:function(){return{inputWithSearch_beforeInit:!1,inputWithSearch_afterInit:!1,inputWithSearch_beforeDestruction:!1,inputWithSearch_onClickOption:!1,inputWithSearch_beforeListAddDom:!1,inputWithSearch_afterListAddDom:!1,inputWithSearch_beforeOpen:!1,inputWithSearch_afterOpen:!1,inputWithSearch_beforeClose:!1,inputWithSearch_afterClose:!1,inputWithSearch_onError:!1,inputWithSearch_onChangeWindow:!1,inputWithSearch_onUpdateDataView:!1,inputWithSearch_changeActive:!1,inputWithSearch_changeHover:!1}}},{key:"statuses",get:function(){return{0:"close",1:"open",2:"waiting data",3:"error"}}},{key:"baseClasses",get:function(){return{input:["InputWithSearch"],bodyOpen:["InputWithSearchOpen"]}}},{key:"htmlElementsClasses",get:function(){var e=Object.keys(c.default.classesBase).reduce(function(e,t){return e[t]=[],e},{}),t=h.default.extend(this.baseClasses,e);return Object.defineProperties(t,function(e,t){return["input","bodyOpen"].reduce(function(e,n){return e[n]=t,e},{})}(0,{configurable:!0,writable:!1})),t}},{key:"settings",get:function(){return{onEvents:"input",delayBeforeSendRequest:300,ajaxConfig:{url:"http://headers.jsontest.com/",type:"GET",timeout:1e4,data:null},callbacks:this.getListCallbacksAndEvents(),constructors:{element:!1,error:!1,lessSymbols:!1,notFind:!1},fns:{dataToInputByClick:function(e){return e.data},fnSetValueToInput:!1,fnGetValueFromInput:!1,filterData:!1,generateGetParams:!1},useCache:!1,loadOnlyStart:!1,maxViewElements:50,lengthStringToOutput:4,timeLiveSaveData:36e5,classes:this.htmlElementsClasses,data:!1,cssParamsWindow:c.default.defaultCssParams,cssCallbacksWindow:c.default.cssCallbacks,triangle:!1,closeBtn:!1,baseWindowEventsActive:{},delegateElement:!1,repositionActiveToTop:!0}}}]),e}(),g=r.prototype,b="id",k=[y.readOnly],w={enumerable:!0,initializer:function(){return"IWS-"+S._counter()}},E={},Object.keys(w).forEach(function(e){E[e]=w[e]}),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),void 0===(E=k.slice().reverse().reduce(function(e,t){return t(g,b,e)||e},E)).initializer&&(Object.defineProperty(g,b,E),E=null),i=E,r),W=function(e){return e instanceof HTMLElement},_=function(e){return"INPUT"===e.tagName};t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.saves=new window.WeakMap}return r(e,[{key:"addElement",value:function(e,t){this.saves.set(e,t)}},{key:"hasElement",value:function(e){return this.saves.has(e)}},{key:"removeElement",value:function(e){this.saves.delete(e)}},{key:"getElement",value:function(e){return this.saves.get(e)}}]),e}();t.default=i},function(e,t,n){"use strict";Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null})},,function(e,t,n){},function(e,t,n){"use strict";n(18),n(16);var r=a(n(5)),i=a(n(9));function a(e){return e&&e.__esModule?e:{default:e}}window.inputWithSearch=new r.default,(0,i.default)()}]);