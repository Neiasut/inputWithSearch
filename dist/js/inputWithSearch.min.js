!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i={delegateFn:function(e,t,n){for(var r=e.target,i=e.relatedTarget,a=void 0;r&&r!==document&&!(a=r.classList.contains(t));)r=r.parentNode;if(a){for(;i&&i!==r&&i!==document;)i=i.parentNode;if(i!==r)return n(e,r)}},extend:function e(){var t={},n=!1,r=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],r++);for(var a=function(r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n&&"[object Object]"===Object.prototype.toString.call(r[i])?t[i]=e(!0,t[i],r[i]):t[i]=r[i])};r<i;r++)a(arguments[r]);return t},callEvent:function(e,t,n){var r={bubbles:!0};void 0!==n&&(r.detail=n),e.dispatchEvent(new CustomEvent(t,r))},hasClass:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},highlightMatchesToString:function(e,t){var n=new RegExp("("+t+")","gi");return e.replace(n,'<span class="InputWithSearchWindow-Coincidence">$1</span>')},mergeListArraysWithoutDuplicates:function(e,t){return Object.entries(e).reduce(function(e,n){var i=r(n,2),a=i[0],s=i[1];return a in t&&Array.isArray(t[a])?e[a]=Array.from(new Set(s.concat(t[a]))):e[a]=s,e},{})}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new WeakMap,i={setDataWeakMapIWS:function(e,t){r.set(e,t)},getDataWeakMapIWS:function(e){return r.get(e)}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Ошибка в свойстве "+e));return n.property=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.CustomError),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=Symbol("protectedRecordsEventSave"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[a]=new Map,!1!==t&&t instanceof HTMLElement?this.rootDomElement=t:this.rootDomElement=null}return r(e,[{key:"addRecord",value:function(e,t,n,r){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this[a].has(e))throw new i.PropertyError(e);t.addEventListener(n,r),this[a].set(e,{domElement:t,events:n,fn:r,protectedStatus:s})}},{key:"addCustomRecord",value:function(e,t,n){null!==this.rootDomElement&&this.addRecord(e,this.rootDomElement,t,n)}},{key:"getRecordByName",value:function(e){return this[a].get(e)}},{key:"addListRecords",value:function(e){var t=this;e.forEach(function(e){e[Symbol.iterator]=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.name;case 2:return e.next=4,this.domElement;case 4:return e.next=6,this.events;case 6:return e.next=8,this.fn;case 8:return e.next=10,this.protectedStatus;case 10:case"end":return e.stop()}},e,this)}),t.addRecord.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))})}},{key:"removeRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getRecordByName(e);if(!0!==t&&!1!==n.protectedStatus)throw new i.PropertyError(e);n.domElement.removeEventListener(n.events,n.fn),this[a].delete(e)}},{key:"removeAllRecords",value:function(){var e=this;this[a].forEach(function(t,n){e.removeRecord(n,!0)})}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(9)),a=c(n(8)),s=c(n(2)),o=c(n(0)),u=c(n(1));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.hasOwnProperty("singleton"))return e.singleton;Object.defineProperty(e,"singleton",{value:this,enumerable:!1,writable:!1,configurable:!1});var t={list:new i.default,themes:new Map};u.default.setDataWeakMapIWS(this,t)}return r(e,[{key:"getElement",value:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=function(e){return e instanceof HTMLElement},l=c(e)?e:!("string"!=typeof(n=t=e)||!c(document.getElementById(n)))&&document.getElementById(t);if(!1!==l){var h=u.default.getDataWeakMapIWS(this).list;if(!h.hasElement(l)){var f=Object.values(function(){var e={};if(""!==s){Array.isArray(s)||(s=[s]);var t=u.default.getDataWeakMapIWS(r).themes;s.reduce(function(e,n){return t.has(n)&&(e[n]=t.get(n)),e},e)}return e}()),d=!0,v=!1,m=void 0;try{for(var p,y=f[Symbol.iterator]();!(d=(p=y.next()).done);d=!0){var g=p.value.objectData;Object.keys(g).length&&(i=o.default.extend(!0,{},g,i))}}catch(e){v=!0,m=e}finally{try{!d&&y.return&&y.return()}finally{if(v)throw m}}var b=new a.default(l,i);h.addElement(l,b);var S=!0,w=!1,E=void 0;try{for(var k,W=f[Symbol.iterator]();!(S=(k=W.next()).done);S=!0){var C=k.value.fnRunOnStart;"function"==typeof C&&C.call(null,b)}}catch(e){w=!0,E=e}finally{try{!S&&W.return&&W.return()}finally{if(w)throw E}}}return h.getElement(l)}throw new Error("Нет валидного DOM-элемента для выдачи "+e)}},{key:"addTheme",value:function(e,t,n){var r=u.default.getDataWeakMapIWS(this).themes;if(r.has(e))throw new s.default(e);r.set(e,{objectData:t,fnRunOnStart:n})}}],[{key:"getInstance",value:function(){return this.singleton}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){window.inputWithSearch.addTheme("withPerfectScrollbar",{},function(e){if(window.PerfectScrollbar){var t=e.getListeners();t.addCustomRecord("test_afterOpen","inputWithSearch_afterOpen",function(){var t=e.inputWithSearchWindow.getElementByKey("wrapperInner"),n=new window.PerfectScrollbar(t,{wheelPropagation:!1});e.getCustomContainer().set("customScroll",n)}),t.addCustomRecord("test_onChangeWindow","inputWithSearch_onChangeWindow",function(){e.getCustomContainer().get("customScroll").update()}),t.addCustomRecord("test_inputWithSearch_beforeClose","inputWithSearch_beforeClose",function(){var t=e.getCustomContainer();t.get("customScroll").destroy(),t.delete("customScroll")})}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="CustomError",n.message=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();t.CustomError=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=o(n(3)),s=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=e.defaultSettings,this.updateSettings(n),this.addToDomWindow(),this.addElementsToConfig(),this.addListeners(),this.dependElement=t,this.setBlockHoverSelected(),this.setSelectedNumb(),this.clearDataListSave(),this.reSetPosition()}return i(e,[{key:"addToDomWindow",value:function(){document.body.appendChild(this.constructorDOM())}},{key:"constructorDOM",value:function(){var e,t=this.constructorTriangle()+'\n                <div class="'+this.getClassesByKey("wrapperSub",!0)+'">\n                    <div class="'+this.getClassesByKey("wrapperInner",!0)+'">\n                        <div class="'+this.getClassesByKey("wrapperList",!0)+'"></div>\n                    </div>\n                </div>\n            ',n=document.createElement("div");return(e=n.classList).add.apply(e,u(this.getClassesByKey("wrapper"))),n.innerHTML=t,n}},{key:"constructorTriangle",value:function(){return this.settings.triangle?'\n                <div class="'+this.getClassesByKey("wrapperTriangle",!0)+'"></div>\n            ':""}},{key:"addElementsToConfig",value:function(){this.elements={};var t=!0,n=!1,r=void 0;try{for(var i,a=Object.keys(e.classesBase)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;this.addElementToConfig(s)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}this.addMutationObserver()}},{key:"addMutationObserver",value:function(){var e=this,t=new MutationObserver(function(t){e.fireEventAndCallback("inputWithSearchWindow_changeContent",{mutations:t})});t.observe(this.getElementByKey("wrapperList"),{childList:!0}),this.observerList=t}},{key:"removeMutationObserver",value:function(){this.observerList.disconnect()}},{key:"addElementToConfig",value:function(t){var n=e.classesBase[t][0];this.elements[t]=document.querySelector("."+n)}},{key:"getElementByKey",value:function(e){return this.elements[e]}},{key:"addInfoToList",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.getElementByKey("wrapperList").innerHTML=this.getElementByKey("wrapperList").innerHTML+e:this.getElementByKey("wrapperList").innerHTML=e}},{key:"destructor",value:function(){this.fireEventAndCallback("inputWithSearchWindow_destruction"),this.removeListeners(),this.removeMutationObserver(),this.destructorDOM()}},{key:"fireEventAndCallback",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t in e.listCallbacksAndEvents){var r=this.elements.wrapper,i={inputWithSearchWindow:{object:this,data:n}};s.default.callEvent(r,t,{inputWithSearchWindow:this});var a=this.settings.callbacks[t];"function"==typeof a&&a.apply(void 0,u(Object.values(i.inputWithSearchWindow)))}}},{key:"destructorDOM",value:function(){var e=this.getElementByKey("wrapper");e.parentNode.removeChild(e)}},{key:"addListeners",value:function(){var t=this;this.timerWaitToBlockHoverSelected=!1,this.listeners=new a.default;var n=this.elements.wrapper,r=e.getClassesBaseByKey("elementList")[0],i=this.settings.baseEventsActive;[{name:"clickElement",domElement:n,events:"click",fn:function(e){return s.default.delegateFn(e,r,function(e,n){t.fireEventAndCallback("inputWithSearchWindow_clickOnElementList",n)})},protectedStatus:!0},{name:"resize",domElement:window,events:"resize",fn:function(){t.reSetPosition()},protectedStatus:!0},{name:"clickOuter",domElement:document,events:"click",fn:function(e){e.target.closest("."+t.getClassesByKey("wrapper")+", .InputWithSearch")||t.destructor()},protectedStatus:!0},{name:"mouseEnterElement",domElement:n,events:"mouseover",fn:function(e){return s.default.delegateFn(e,r,function(e,n){t.checkBlockHoverSelected()||t.setElemListActive(n)})},protectedStatus:!0},{name:"interceptionEvents",domElement:document,events:"keydown",fn:function(e){var n=t,r=window.inputWithSearch.getElement(t.settings.relativeDomElement);if(r.checkStatus(1)){var i=40===e.keyCode,a=38===e.keyCode,s=13===e.keyCode;(a||i)&&n.checkDataSave()&&(e.preventDefault(),t.timerWaitToBlockHoverSelected=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return clearTimeout(e),t.setBlockHoverSelected(!0),setTimeout(function(){t.setBlockHoverSelected(!1)},n)}(t.timerWaitToBlockHoverSelected,n),i&&n.setElemListActiveByDirection(),a&&n.setElemListActiveByDirection(!1)),s&&(-1!==n.getSelectedNumb()&&r.setActiveByNumbFromList(n.getSelectedNumb()),r.close())}},protectedStatus:!0}].forEach(function(n){var r,a=Object.values(n),s=a[0];s in e.baseEventsActive&&!0!==i[s]||(r=t.listeners).addRecord.apply(r,u(a))})}},{key:"setElemListActiveByNumb",value:function(e){if(this.checkDataSave()&&e<this.getDataFromSave().length)if(e<0)this.unSelectedElements();else{var t=this.getClassesByKey("elementList")[0],n=this.elements.wrapper.querySelector("."+t+'[data-numb="'+e+'"]');null!==n&&this.setElemListActive(n,!0,e)}}},{key:"setElemListActiveByDirection",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setElemListActiveByNumb(this.getSelectedNumb()+(e?1:-1))}},{key:"unSelectedElements",value:function(){this.setSelectedNumb();var t=e.getClassesBaseByKey("elementListSelected")[0];this.elements.wrapper.querySelectorAll("."+t).forEach(function(e){e.classList.remove(t)})}},{key:"setElemListActive",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="number"==typeof r?r:parseInt(t.getAttribute("data-numb")),a=e.getClassesBaseByKey("elementListSelected")[0];i!==this.selectedNumb&&(this.unSelectedElements(),this.setSelectedNumb(i),n&&(this.elements.wrapperInner.scrollTop=t.offsetTop),t.classList.add(a))}},{key:"setBlockHoverSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.blockHoverSelected=e}},{key:"checkBlockHoverSelected",value:function(){return this.blockHoverSelected}},{key:"removeListeners",value:function(){this.listeners.removeAllRecords()}},{key:"updateSettings",value:function(e){var t=!1;"classes"in e&&(t=s.default.mergeListArraysWithoutDuplicates(this.settings.classes,e.classes)),this.settings=s.default.extend(!0,{},this.settings,e),t&&(this.settings.classes=t)}},{key:"getClassesByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.settings.classes[e];return t?n.join(" "):n}},{key:"reSetPosition",value:function(){var e=this.dependElement.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop,n=this.elements.wrapper.style,i=this.settings.cssParams,a=e.width;a<i.minWidth&&(a=i.minWidth),a>i.maxWidth&&(a=i.maxWidth);var s=window.innerWidth,o=r(i.margin,4),u=o[0],c=o[1],l=o[2],h=o[3],f=e.left+(e.width-a)/2;f<h&&(f=h),s-(f+a)<c&&(f=s-a-c),n.top=t+e.bottom-(t+document.body.getBoundingClientRect().top)+"px",n.left=Math.ceil(f)+"px",n.width=a+"px",n.position="absolute",u>0&&(n.marginTop=u+"px"),l>0&&(n.marginBottom=l+"px");var d=this.getElementByKey("wrapperTriangle");if(null!==d){var v=e.left-f+e.width/2-d.offsetWidth/2;d.style.left=Math.ceil(v)+"px"}}},{key:"addDataListSave",value:function(e){this.dataList=e,this.dataListHaveData=!0}},{key:"checkDataSave",value:function(){return this.dataListHaveData}},{key:"getDataFromSave",value:function(){return this.dataList}},{key:"clearDataListSave",value:function(){this.dataList=[],this.dataListHaveData=!1}},{key:"setSelectedNumb",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.selectedNumb=e}},{key:"getSelectedNumb",value:function(){return this.selectedNumb}},{key:"addListElements",value:function(t,n){var r,i,a=this;this.addInfoToList(""),this.addDataListSave(t),(r=t,i=this.settings.maxViewElements<t.length?this.settings.maxViewElements:t.length,r.length>i?r.slice(0,i):r).forEach(function(t,r){a.addInfoToList(e.constructElement(t,n,r,a.settings.constructors.element,a.getClassesByKey("elementList",!0)),!0)})}},{key:"setToMessage",value:function(t,n){this.clearDataListSave(),this.addInfoToList(e.constructMessage(t,n,this.settings.constructors[t],this.getClassesByKey("message")))}},{key:"setToError",value:function(){this.clearDataListSave();for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];this.addInfoToList(e.constructMessageError.apply(e,n.concat([this.getClassesByKey("error"),this.settings.constructors.error])))}},{key:"setToWait",value:function(){this.clearDataListSave(),this.addInfoToList(e.constructWaitThrobber())}}],[{key:"getClassesBaseByKey",value:function(e){return this.classesBase[e]}},{key:"constructElement",value:function(e,t,n,r,i){return'\n                <div class="'+i+'" data-numb="'+n+'">\n                    '+r(e,t,s.default.highlightMatchesToString)+"\n                </div>\n            "}},{key:"constructMessage",value:function(e,t,n,r){return'\n                <div class="'+r+'">\n                    '+n.apply(void 0,u(t))+"\n                </div>\n            "}},{key:"constructMessageError",value:function(e,t,n,r){return'\n                <div class="'+n+'">\n                    '+r(e,t)+"\n                </div>\n            "}},{key:"constructWaitThrobber",value:function(){return'\n            <div class="InputWithSearchWindow-Load">\n                <div class="InputWithSearchLoader">\n                    <div class="InputWithSearchLoader-Loader"></div>\n                </div>\n            </div>\n            '}},{key:"classesBase",get:function(){return{wrapper:["InputWithSearchWindow"],wrapperSub:["InputWithSearchWindow-Sub"],wrapperInner:["InputWithSearchWindow-Inner"],wrapperList:["InputWithSearchWindow-List"],wrapperTriangle:["InputWithSearchWindow-Triangle"],elementList:["InputWithSearchWindow-Element"],elementListSelected:["InputWithSearchWindow-Element_selected"],message:["InputWithSearchWindow-Message"],error:["InputWithSearchWindow-Error"]}}},{key:"listCallbacksAndEvents",get:function(){return{inputWithSearchWindow_clickOnElementList:!1,inputWithSearchWindow_destruction:!1,inputWithSearchWindow_changeContent:!1}}},{key:"defaultSettings",get:function(){return{classes:this.classesBase,constructors:{element:function(e,t,n){return n(e+" c данными "+t)},error:function(e){return e},lessSymbols:function(e,t){return"Введите "+t+" или более символов."},notFind:function(e){return"По запросу "+e+" ничего не было найдено!."}},callbacks:this.listCallbacksAndEvents,cssParams:this.defaultCssParams,triangle:!1,relativeDomElement:!1,baseEventsActive:this.baseEventsActive,maxViewElements:50}}},{key:"baseEventsActive",get:function(){return{mouseEnterElement:!0,interceptionEvents:!0,clickElement:!0}}},{key:"defaultCssParams",get:function(){return{margin:[0,10,0,10],minWidth:200,maxWidth:300}}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(7)),u=f(n(4)),c=f(n(0)),l=f(n(3)),h=f(n(1));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var v=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domElement=t,this.settings=e.settings,this.updateSettings(r),this.clearCustomData(),this.createCustomContainer(),this.fireEventAndCallback("inputWithSearch_beforeInit"),this.waitData=!1,this.xhr=!1,this.promiseXhr=!1,this.savesData(null,this.getValueFromInput()),this.changeStatus([0]),(n=this.domElement.classList).add.apply(n,d(this.getClassesByKey("input"))),this.addEventListeners(),this.lastData=!1,this.wasFirstLoad=!1,e.addAttrToDomInput(this.domElement),this.fireEventAndCallback("inputWithSearch_afterInit")}return s(e,[{key:"getListeners",value:function(){return this.listeners}},{key:"addEventListeners",value:function(){var e=this,t=this.getListeners(),n=this.domElement;switch(void 0!==t&&t instanceof l.default&&t.removeAllRecords(),t=new l.default(this.domElement),this.settings.onEvents){case"input":t.addListRecords([{name:"onEvents",domElement:n,events:this.settings.onEvents,fn:function(){e.open()},protectedStatus:!0}]);break;case"click":t.addListRecords([{name:"onEvents",domElement:n,events:this.settings.onEvents,fn:function(){e.checkStatus(0)?e.open():e.close()},protectedStatus:!0}]);break;case"hover":var r=null,i=function(){clearTimeout(r),r=setTimeout(function(){e.close()},50)};t.addListRecords([{name:"openWrapperHover",domElement:n,events:"inputWithSearch_afterOpen",fn:function(){clearTimeout(r);var t=e.inputWithSearchWindow.getElementByKey("wrapper"),n=e.inputWithSearchWindow.listeners;n.addRecord("mouseLeaveWrapperHover",t,"mouseleave",i,!0),n.addRecord("mouseEnterWrapperHover",t,"mouseenter",function(){clearTimeout(r)},!0)},protectedStatus:!0},{name:"onEvents",domElement:n,events:"mouseenter",fn:function(){e.checkStatus(0)&&e.open(),e.checkStatus(1)&&clearTimeout(r)},protectedStatus:!0},{name:"mouseLeaveElement",domElement:n,events:"mouseleave",fn:i,protectedStatus:!0}]);break;default:console.warn("Параметр onEvents заполнен неверно!")}this.listeners=t}},{key:"removeEventListeners",value:function(){this.listeners.removeAllRecords()}},{key:"savesData",value:function(e,t){this.saveData={data:e,date:Date.now(),value:t}}},{key:"getSaveData",value:function(){return this.saveData}},{key:"getValueFromInput",value:function(){return this.domElement.value}},{key:"setValueToInput",value:function(e){"function"!=typeof this.settings.fns.fnSetValueToInput?m(this.domElement)?this.domElement.value=e:this.domElement.innerHTML=e:this.settings.fns.fnSetValueToInput.call(null,this.domElement,e)}},{key:"updateSettings",value:function(e){var t=!1;"classes"in e&&"object"===a(e.classes)&&(t=c.default.mergeListArraysWithoutDuplicates(this.settings.classes,e.classes)),this.settings=c.default.extend(!0,{},this.settings,e),t&&(this.settings.classes=t)}},{key:"changeStatus",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];void 0===this.status&&(this.status=new window.Set),n.forEach(function(n){n in e.statuses&&t.status.add(n)}),r.forEach(function(n){n in e.statuses&&t.status.delete(n)})}},{key:"checkStatus",value:function(e){return this.status.has(e)}},{key:"fnOnEventFire",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.changeStatus([],[2,3]);var n=m(this.domElement);if(!1===t&&(t=this.domElement.value),!1===n||t.length>=this.settings.lengthStringToOutput)if(this.checkCustomData())this.constructList(this.getCustomData(),this.getValueFromInput());else{var r=!0;if(this.settings.useCache&&this.settings.loadOnlyStart)r=!this.wasFirstLoad;else{var i=e.validateSaveDataForRequest(this.getSaveData(),t,this.settings.timeLiveSaveData);r=!this.settings.useCache||!i}r?this.loadData():this.constructList(this.saveData.data,this.getValueFromInput())}else this.stopLoadData(),this.setToMessage("lessSymbols",[this.settings.lengthStringToOutput])}},{key:"stopLoadData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];clearTimeout(this.waitData),e&&this.changeStatus([],[2]),"object"===a(this.xhr)&&this.xhr.abort()}},{key:"constructList",value:function(e,t){var n=this;if("function"==typeof this.settings.fns.filterData&&(e=e.filter(function(e){return n.settings.fns.filterData(e,t)})),this.lastData=e,e.length)return"number"==typeof this.settings.numberOfResultsForView&&(e=e.slice(0,this.settings.numberOfResultsForView+1)),this.fireEventAndCallback("inputWithSearch_beforeListAddDom"),this.inputWithSearchWindow.addListElements(e),void this.fireEventAndCallback("inputWithSearch_afterListAddDom");this.setToMessage("notFind")}},{key:"onLoadData",value:function(t,n){var r=JSON.parse(t),i=e.getValidateData(r);this.savesData(i,n),this.constructList(i,this.getValueFromInput()),!1===this.wasFirstLoad&&(this.wasFirstLoad=!0)}},{key:"loadData",value:function(){var e,t=this;this.stopLoadData(!1),this.waitData=setTimeout((e=regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setToWait(),e.prev=1,t.promiseXhr=t.request(t.settings.ajaxConfig.url),n=t.getValueFromInput(),e.next=6,t.promiseXhr;case 6:r=e.sent,t.onLoadData(r,n),e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(1),0!==e.t0){e.next=16;break}t.setToError(new Error("Данные не были получены!")),e.next=17;break;case 16:throw e.t0;case 17:return e.prev=17,t.changeStatus([],[2]),e.finish(17);case 20:case"end":return e.stop()}},e,t,[[1,10,17,20]])}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});e(o)}("next")})}),this.settings.delayBeforeSendRequest)}},{key:"request",value:function(t){var n=this;return new window.Promise(function(r,i){var a=n.xhr=new window.XMLHttpRequest;a.onload=function(){r(a.response)},a.timeout=n.settings.ajaxConfig.timeout,a.onerror=function(){i(a.status)},a.open(n.settings.ajaxConfig.type,t+n.generateGetParams(),!0),a.send(e.prepareAjaxSendData(n.settings.ajaxConfig.data))})}},{key:"generateGetParams",value:function(){var e=this.settings.fns.generateGetParams;return"function"==typeof e?"?"+e(this):""}},{key:"getClassesByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.settings.classes[e];return t?n.join(" "):n}},{key:"open",value:function(){var t=window.inputWithSearchWindow instanceof o.default;this.checkStatus(1)||(this.fireEventAndCallback("inputWithSearch_beforeOpen"),t&&window.inputWithSearchWindow.destructor(),window.inputWithSearchWindow=this.inputWithSearchWindow=new o.default(this.domElement,this.configForInitSearchWindow),e.setInputActive(this.domElement,!0),this.changeStatus([1],[0]),this.fireEventAndCallback("inputWithSearch_afterOpen")),this.fnOnEventFire()}},{key:"setActiveByNumbFromList",value:function(e){var t=this.getDataFromLastDataByNumb(e),n=this.getValueFromInput();return this.setValueToInput(this.settings.fns.dataToInputByClick(t)),{data:t,currentValue:this.getValueFromInput(),lastValue:n}}},{key:"getDataFromLastDataByNumb",value:function(e){return this.lastData[e]}},{key:"close",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.checkStatus(1)){t&&this.fireEventAndCallback("inputWithSearch_beforeClose"),this.changeStatus([0],[1]);try{n&&window.inputWithSearchWindow.destructor()}finally{window.inputWithSearchWindow=null}e.setInputActive(this.domElement,!1),t&&this.fireEventAndCallback("inputWithSearch_afterClose")}}},{key:"setToError",value:function(e){this.changeStatus([3]),this.fireEventAndCallback("inputWithSearch_onError",[e]),this.inputWithSearchWindow.setToError(e.message,e)}},{key:"fireEventAndCallback",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t in e.getListCallbacksAndEvents()){var r=this.domElement,a=i({object:this},n);a[Symbol.iterator]=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.object;case 2:e.t0=regeneratorRuntime.keys(this);case 3:if((e.t1=e.t0()).done){e.next=11;break}if(t=e.t1.value,!this.hasOwnProperty(t)){e.next=9;break}if("object"===t){e.next=9;break}return e.next=9,this[t];case 9:e.next=3;break;case 11:case"end":return e.stop()}},e,this)});var s={inputWithSearch:a};c.default.callEvent(r,t,s);var o=this.settings.callbacks[t];"function"==typeof o&&o.apply(void 0,d(a))}}},{key:"setToWait",value:function(){this.checkStatus(2)||(this.changeStatus([2]),this.inputWithSearchWindow.setToWait())}},{key:"setToMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[this.getValueFromInput()].concat(d(t));this.inputWithSearchWindow.setToMessage(e,n)}},{key:"destructor",value:function(){var t;this.close(),this.removeEventListeners(),e.setInputActive(this.domElement,!1),(t=this.domElement.classList).remove.apply(t,d(this.getClassesByKey("input"))),h.default.getDataWeakMapIWS(u.default.getInstance()).list.removeElement(this.domElement)}},{key:"setCustomData",value:function(t){this.customData=e.getValidateData(t)}},{key:"clearCustomData",value:function(){this.customData=null}},{key:"getCustomData",value:function(){return this.customData}},{key:"checkCustomData",value:function(){return null!==this.customData}},{key:"createCustomContainer",value:function(){this.customContainer=new Map}},{key:"getCustomContainer",value:function(){return this.customContainer}},{key:"configForInitSearchWindow",get:function(){var e,t,n,i=this;return{callbacks:{inputWithSearchWindow_destruction:function(){i.close(!0,!1)},inputWithSearchWindow_clickOnElementList:function(e,t){var n=parseInt(t.getAttribute("data-numb")),r=i.setActiveByNumbFromList(n);i.fireEventAndCallback("inputWithSearch_onClickOption",r),i.close()},inputWithSearchWindow_changeContent:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.fireEventAndCallback("inputWithSearch_onChangeWindow",t)}},classes:(t=this.settings.classes,n=o.default.classesBase,Object.keys(t).reduce(function(e,r){return r in n&&(e[r]=t[r]),e},{})),constructors:(e=this.settings.constructors,Object.entries(e).reduce(function(e,t){var n=r(t,2),i=n[0],a=n[1];return"function"==typeof a&&(e[i]=a),e},{})),cssParams:this.settings.cssParamsWindow,triangle:this.settings.triangle,relativeDomElement:this.domElement,baseEventsActive:this.settings.baseWindowEventsActive,maxViewElements:this.settings.maxViewElements}}}],[{key:"addAttrToDomInput",value:function(e){e.autocomplete="off"}},{key:"validateSaveDataForRequest",value:function(e,t,n){var r=function(e){return e.toLowerCase()};return""!==e.value&&-1!==r(t).indexOf(r(e.value))&&Date.now()-e.date<n}},{key:"getValidateData",value:function(e){if(Array.isArray(e))return e;if(e instanceof Object)return Object.values(e);throw new Error("Полученные данные не являются JSON-массивом.")}},{key:"prepareAjaxSendData",value:function(e){var t=e;return"function"==typeof t&&(t=t()),null!==t&&(t="string"==typeof t?t:Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")),t}},{key:"setInputActive",value:function(e,t){t?e.classList.add("InputWithSearch_active"):e.classList.remove("InputWithSearch_active")}},{key:"getBaseClassesByKey",value:function(e){return this.baseClasses[e]}},{key:"getListCallbacksAndEvents",value:function(){return{inputWithSearch_beforeInit:!1,inputWithSearch_afterInit:!1,inputWithSearch_beforeDestruction:!1,inputWithSearch_onClickOption:!1,inputWithSearch_beforeListAddDom:!1,inputWithSearch_afterListAddDom:!1,inputWithSearch_beforeOpen:!1,inputWithSearch_afterOpen:!1,inputWithSearch_beforeClose:!1,inputWithSearch_afterClose:!1,inputWithSearch_onError:!1,inputWithSearch_onChangeWindow:!1}}},{key:"statuses",get:function(){return{0:"close",1:"open",2:"waiting data",3:"error"}}},{key:"baseClasses",get:function(){return{input:["InputWithSearch"],bodyOpen:["InputWithSearchOpen"]}}},{key:"htmlElementsClasses",get:function(){var e=Object.keys(o.default.classesBase).reduce(function(e,t){return e[t]=[],e},{}),t=c.default.extend(this.baseClasses,e);return Object.defineProperties(t,function(e,t){return["input","bodyOpen"].reduce(function(e,n){return e[n]=t,e},{})}(0,{configurable:!0,writable:!1})),t}},{key:"settings",get:function(){return{onEvents:"input",delayBeforeSendRequest:300,ajaxConfig:{url:"http://headers.jsontest.com/",type:"GET",timeout:1e4,data:null},callbacks:this.getListCallbacksAndEvents(),constructors:{element:!1,error:!1,lessSymbols:!1,notFind:!1},fns:{dataToInputByClick:function(e){return e},fnSetValueToInput:!1,filterData:!1,generateGetParams:!1},useCache:!1,loadOnlyStart:!1,maxViewElements:50,lengthStringToOutput:4,numberOfResultsForView:!1,timeLiveSaveData:36e5,classes:this.htmlElementsClasses,data:!1,cssParamsWindow:o.default.defaultCssParams,triangle:!1,baseWindowEventsActive:{}}}}]),e}(),m=function(e){return"INPUT"===e.tagName};t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.saves=new window.WeakMap}return r(e,[{key:"addElement",value:function(e,t){this.saves.set(e,t)}},{key:"hasElement",value:function(e){return this.saves.has(e)}},{key:"removeElement",value:function(e){this.saves.delete(e)}},{key:"getElement",value:function(e){return this.saves.get(e)}}]),e}();t.default=i},function(e,t,n){"use strict";Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null})},,function(e,t,n){},function(e,t,n){"use strict";n(12),n(10);var r=a(n(4)),i=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}window.inputWithSearch=new r.default,(0,i.default)()}]);