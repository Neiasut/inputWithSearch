!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({name:e,object:t,cb:n,cbBefore:i},Symbol.iterator,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e;case 2:return r.next=4,t;case 4:return r.next=6,n;case 6:return r.next=8,i;case 8:case"end":return r.stop()}},r,this)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(){var e={},t=!1,n=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);for(var r=function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t&&"[object Object]"===Object.prototype.toString.call(n[i])?e[i]=s(!0,e[i],n[i]):e[i]=n[i])};n<i;n++)r(arguments[n]);return e}var o={delegateFn:function(e,t,n){for(var i=e.target,r=e.relatedTarget,a=void 0;i&&i!==document&&!(a=i.classList.contains(t));)i=i.parentNode;if(a){for(;r&&r!==i&&r!==document;)r=r.parentNode;if(r!==i)return n(e,i)}},extend:s,callEvent:function(e,t,n){var i={bubbles:!0};void 0!==n&&(i.detail=n),e.dispatchEvent(new CustomEvent(t,i))},hasClass:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},highlightMatchesToString:function(e,t){var n=new RegExp("("+t+")","gi");return e.replace(n,'<span class="InputWithSearchWindow-Coincidence">$1</span>')},mergeListArraysWithoutDuplicates:function(e,t){return Object.entries(e).reduce(function(e,n){var i=r(n,2),a=i[0],s=i[1];return a in t&&Array.isArray(t[a])?e[a]=Array.from(new Set(s.concat(t[a]))):e[a]=s,e},{})},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},sliceObjectArrays:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?{}:1===t.length?s(!0,{},t[0]):t.reduce(function(e,t){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=t.map(function(e){var t={};if("object"!==(void 0===e?"undefined":i(e)))return t;var n=!0,a=!1,s=void 0;try{for(var o,u=Object.entries(e)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=o.value,l=r(c,2),h=l[0],f=l[1];Array.isArray(f)&&(t[h]=f.slice(0))}}catch(e){a=!0,s=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw s}}return t}),o=r(s,2),u=o[0],c=o[1],l=Object.keys(u),h=Object.keys(c);return[].concat(a(new Set([].concat(a(l),a(h))))).reduce(function(e,t){var n=t in u;return n&&t in c?(e[t]=[].concat(a(new Set([].concat(a(u[t]),a(c[t]))))),e):(e[t]=n?u[t]:c[t],e)},{})}(e,t)},{})}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=new WeakMap,r={setDataWeakMapIWS:function(e,t){i.set(e,t)},getDataWeakMapIWS:function(e){return i.get(e)}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Ошибка в свойстве "+e));return n.property=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.CustomError),t}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3),a=Symbol("protectedRecordsEventSave"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[a]=new Map,!1!==t&&t instanceof HTMLElement?this.rootDomElement=t:this.rootDomElement=null}return i(e,[{key:"addRecord",value:function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this[a].has(e))throw new r.PropertyError(e);t.addEventListener(n,i),this[a].set(e,{domElement:t,events:n,fn:i,protectedStatus:s})}},{key:"addCustomRecord",value:function(e,t,n){null!==this.rootDomElement&&this.addRecord(e,this.rootDomElement,t,n)}},{key:"getRecordByName",value:function(e){return this[a].get(e)}},{key:"addListRecords",value:function(e){var t=this;e.forEach(function(e){e[Symbol.iterator]=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.name;case 2:return e.next=4,this.domElement;case 4:return e.next=6,this.events;case 6:return e.next=8,this.fn;case 8:return e.next=10,this.protectedStatus;case 10:case"end":return e.stop()}},e,this)}),t.addRecord.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))})}},{key:"removeRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getRecordByName(e);if(!0!==t&&!1!==n.protectedStatus)throw new r.PropertyError(e);n.domElement.removeEventListener(n.events,n.fn),this[a].delete(e)}},{key:"removeAllRecords",value:function(){var e=this;this[a].forEach(function(t,n){e.removeRecord(n,!0)})}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=c(n(16)),a=c(n(15)),s=c(n(3)),o=c(n(1)),u=c(n(2));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){var t=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.hasOwnProperty("singleton"))return e.singleton;Object.defineProperty(e,"singleton",{value:this,enumerable:!1,writable:!1,configurable:!1});var n={list:new r.default,themes:new Map};u.default.setDataWeakMapIWS(this,n),new MutationObserver(function(e){e.forEach(function(e){Array.prototype.slice.call(e.removedNodes,0).filter(function(e){t.checkInit(e)?t.get(e).destructor():e instanceof HTMLElement&&Array.prototype.slice.call(a.default.getInHtmlElementAllElementsByClass(e),0).forEach(function(e){t.get(e).destructor()})})})}).observe(document.documentElement,{childList:!0,subtree:!0})}return i(e,[{key:"getElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this._getElementFromPage(e);if(!1!==i)return this.checkInit(i)||this.init(i,t,n),this.get(i);throw new Error("Нет валидного DOM-элемента для выдачи "+e)}},{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=u.default.getDataWeakMapIWS(this).list,s=Object.values(function(){var e={};if(""!==i){Array.isArray(i)||(i=[i]);var n=u.default.getDataWeakMapIWS(t).themes;i.reduce(function(e,t){return n.has(t)&&(e[t]=n.get(t)),e},e)}return e}()),c=!0,l=!1,h=void 0;try{for(var f,d=s[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)"function"==typeof(A=f.value.fnRunBeforeStart)&&A.call(null,e)}catch(e){l=!0,h=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw h}}var v=!0,y=!1,m=void 0;try{for(var p,g=s[Symbol.iterator]();!(v=(p=g.next()).done);v=!0){var b=p.value.objectData;if(Object.keys(b).length){var k=o.default.sliceObjectArrays(b.classes,n.classes);(n=o.default.extend(!0,{},b,n)).classes=k}}}catch(e){y=!0,m=e}finally{try{!v&&g.return&&g.return()}finally{if(y)throw m}}var E=new a.default(e,n);r.addElement(e,E);var w=!0,S=!1,_=void 0;try{for(var W,C=s[Symbol.iterator]();!(w=(W=C.next()).done);w=!0){var A;"function"==typeof(A=W.value.fnRunOnStart)&&A.call(null,E)}}catch(e){S=!0,_=e}finally{try{!w&&C.return&&C.return()}finally{if(S)throw _}}return r.getElement(e)}},{key:"_getElementFromPage",value:function(e){var t,n,i=function(e){return e instanceof HTMLElement};return i(e)?e:!("string"!=typeof(n=t=e)||!i(document.getElementById(n)))&&document.getElementById(t)}},{key:"get",value:function(e){return u.default.getDataWeakMapIWS(this).list.getElement(this._getElementFromPage(e))}},{key:"checkInit",value:function(e){return u.default.getDataWeakMapIWS(this).list.hasElement(e)}},{key:"addTheme",value:function(e,t,n,i){var r=u.default.getDataWeakMapIWS(this).themes;if(r.has(e))throw new s.default(e);r.set(e,{objectData:t,fnRunOnStart:n,fnRunBeforeStart:i})}}],[{key:"getInstance",value:function(){return this.singleton}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=n(0))&&i.__esModule?i:{default:i};t.default=(0,r.default)("openInfo",{baseWindowEventsActive:{interceptionEvents:!1,mouseEnterElement:!1,clickElement:!1},constructors:{element:function(e){return e}},maxViewElements:1,classes:{wrapper:["InputWithSearchWindow_theme_openInfo"]},cssParamsWindow:{minWidth:200,maxWidth:286,seekWidthTo:"max"}},function(e){var t=e.getWorkDomElement().getAttribute("data-iws-data");e.setCustomData([t])})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=n(0))&&i.__esModule?i:{default:i},a=function(e){return e.detail.inputWithSearch.object},s=function(e){a(e).getWorkDomElement(!0).style.display="none"},o=function(e){return e.selected},u=function e(t){var n=a(t).getWorkDomElement(!0);n.removeEventListener("inputWithSearch_beforeInit",s),n.removeEventListener("inputWithSearch_beforeDestruction",e),n.style.display=""},c=function(e){var t=e.detail.inputWithSearch.object,n=t.getWorkDomElement(!0),i=t.getDataByKey(e.detail.inputWithSearch.key);if(n.value!==i.value)if(n.value=i.value,"createEvent"in document){var r=document.createEvent("HTMLEvents");r.initEvent("change",!1,!0),n.dispatchEvent(r)}else n.fireEvent("onchange")},l=function(e){var t=e.target,n=t.value,i=window.inputWithSearch.getElement(t);i.getDataByKey(i.getActiveKey()).value!==n&&i.setActive(function(e){return e.value===n})};t.default=(0,r.default)("select",{onEvents:"click",delegateElement:!0,repositionActiveToTop:!1,constructors:{element:function(e){return e.text}},fns:{dataToInputByClick:function(e){return e.data.text}}},function(e){var t,n=e.getWorkDomElement(!0);e.setCustomData((t=n,Array.from(t.querySelectorAll("option")).map(function(e){return{text:e.textContent,value:e.value,selected:e.selected}}))),e.setActive(o),e.listeners.addCustomRecord("changeActiveSelectTheme","inputWithSearch_changeActive",c),e.listeners.addCustomRecord("changeSelectTheme","change",l)},function(e){e.addEventListener("inputWithSearch_beforeInit",s),e.addEventListener("inputWithSearch_beforeDestruction",u)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=n(0))&&i.__esModule?i:{default:i};t.default=(0,r.default)("withPerfectScrollbar",{},function(e){if(window.PerfectScrollbar){var t=e.getListeners();t.addCustomRecord("test_afterOpen","inputWithSearch_afterOpen",function(){var t=e.inputWithSearchWindow.getElementByKey("wrapperInner"),n=new window.PerfectScrollbar(t,{wheelPropagation:!1});e.getCustomContainer().set("customScroll",n)}),t.addCustomRecord("test_onChangeWindow","inputWithSearch_onChangeWindow",function(){e.getCustomContainer().get("customScroll").update()}),t.addCustomRecord("test_inputWithSearch_beforeClose","inputWithSearch_beforeClose",function(){var t=e.getCustomContainer();t.get("customScroll").destroy(),t.delete("customScroll")})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=window.inputWithSearch;e.addTheme.apply(e,o(i.default)),e.addTheme.apply(e,o(r.default)),e.addTheme.apply(e,o(a.default))};var i=s(n(8)),r=s(n(7)),a=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readOnly=function(e,t,n){return n.writable=!1,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._idParent=t,this._callbacks=e._prepareObjectCallbacks(n),this.clear()}return i(e,[{key:"addData",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data=e.wrapListElements(e.validateData(t),this._idParent),this._value=n,this._customData=i,this._date=Date.now(),this._actionData=this._data.slice(0),this.activeKey="clear"}},{key:"saveActionData",value:function(e){this._actionData=e}},{key:"clear",value:function(){this.addData([],"")}},{key:"checkCustomData",value:function(){return this._customData}},{key:"getData",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"typical",i=t?this._data:this._actionData;switch(n){case"clear":return e.unWrapListElement(i);case"keyId":return i.reduce(function(e,t){return e[t.key]=t,e},{});default:return i}}},{key:"getDataByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getData(!1,"keyId")[e];return void 0!==n?t?n:n.data:void 0}},{key:"_setAction",value:function(e,t){if("clear"===e)return u(t,this._actionData),void this._runCbOnName(t,e);this.checkKeyInActionData(e)&&(u(t,this._actionData),this.getData(!1,"keyId")[e][t]=!0,this._runCbOnName(t,e))}},{key:"checkKeyInActionData",value:function(e){return-1!==Object.keys(this.getData(!1,"keyId")).indexOf(e)}},{key:"validateSaveDataForRequest",value:function(e,t){var n=function(e){return e.toLowerCase()};return""!==this._value&&-1!==n(e).indexOf(n(this._value))&&Date.now()-this._date<t}},{key:"_runCbOnName",value:function(e,t){this._checkActivityCallback(e)&&(0,this._callbacks.get(e).cb)(t)}},{key:"setInactivityCallback",value:function(t){e.checkNameInAvailableCbs(t)&&(this._callbacks.get(t).activity=!1)}},{key:"setActivityCallback",value:function(t){e.checkNameInAvailableCbs(t)&&(this._callbacks.get(t).activity=!0)}},{key:"_checkActivityCallback",value:function(e){return this._callbacks.get(e).activity}},{key:"hoveredKey",get:function(){return s("hover",this._actionData)},set:function(e){this._setAction(e,"hover")}},{key:"activeKey",get:function(){return s("active",this._actionData)},set:function(e){this._setAction(e,"active")}}],[{key:"unWrapListElement",value:function(e){return e.map(function(e){return e.data})}},{key:"wrapListElements",value:function(t,n){return t.map(function(t,i){return e.wrapElementList(t,n,i)})}},{key:"wrapElementList",value:function(e,t,n){return{data:e,key:t+"_"+n,hover:!1,active:!1}}},{key:"validateData",value:function(e){if(Array.isArray(e))return e;if(e instanceof Object)return Object.values(e);throw new Error("Полученные данные не являются JSON-массивом.")}},{key:"repositionActiveToTop",value:function(e){var t=o("active",e),n=e.slice(0);return"null"!==t&&e.length>1&&-1!==t.index&&n.unshift.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.splice(t.index,1))),n}},{key:"checkNameInAvailableCbs",value:function(e){return-1!==this.nameCbs.indexOf(e)}},{key:"_prepareObjectCallbacks",value:function(e){return this.nameCbs.reduce(function(t,n){if(void 0!==e[n]){var i="function"==typeof e[n]&&e[n];t.set(n,{cb:i,activity:!0})}return t},new Map)}},{key:"nameCbs",get:function(){return["active","hover"]}}]),e}(),a=function(e,t){var n=-1;return t.some(function(t,i){return!!t[e]&&(n=i,!0)}),n},s=function(e,t){var n=a(e,t);return-1!==n?t[n].key:"null"},o=function(e,t){var n=a(e,t);return-1!==n?{data:t[n],index:n}:"null"},u=function(e,t){t.forEach(function(t){t[e]=!1})};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domWatch=t,this.cb=n,this.timeTik=i,this._savePositionFromElement(),this._addInterval()}return i(e,[{key:"_savePositionFromElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._positionBefore=s.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(!1===e?a(this.domWatch):e))}},{key:"_getPositionBefore",value:function(){return this._positionBefore}},{key:"_addInterval",value:function(){var e=this;this._interval=setInterval(function(){e._fireFunctionOnTik()},this.timeTik)}},{key:"_fireFunctionOnTik",value:function(){var e=a(this.domWatch);o(this._getPositionBefore(),e)&&(this._savePositionFromElement(e),this.cb())}},{key:"destructor",value:function(){clearInterval(this._interval)}}]),e}(),a=function(e){var t,n=e.getBoundingClientRect(),i=(t=document.documentElement,{left:(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),top:(window.pageYOffset||t.scrollTop)-(t.clientTop||0)});return s(n.width,n.height,n.left+i.left,n.top+i.top)},s=function(e,t,n,i){return r={width:e,height:t,left:n,top:i},a=Symbol.iterator,s=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.width;case 2:return e.next=4,this.height;case 4:return e.next=6,this.left;case 6:return e.next=8,this.top;case 8:case"end":return e.stop()}},e,this)}),a in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,r;var r,a,s},o=function(e,t){return!(JSON.stringify(e)===JSON.stringify(t))};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="CustomError",n.message=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();t.CustomError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=u(n(4)),s=u(n(1)),o=u(n(12));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=e.defaultSettings,this.updateSettings(n),this.addToDomWindow(),this.addElementsToConfig(),this.addListeners(),this.dependElement=t,this.setBlockHoverSelected(),this.setStatus(),this.reSetPosition(),this.fireEventAndCallback("inputWithSearchWindow_afterConstruction")}return r(e,[{key:"addToDomWindow",value:function(){document.body.appendChild(this.constructorDOM())}},{key:"constructorDOM",value:function(){var e,t=this.constructorTriangle()+'\n                <div class="'+this.getClassesByKey("wrapperSub",!0)+'">\n                    <div class="'+this.getClassesByKey("wrapperInner",!0)+'">\n                        <div class="'+this.getClassesByKey("wrapperList",!0)+'"></div>\n                        '+this.constructorCloseBtn()+"\n                    </div>\n                </div>\n            ",n=document.createElement("div");return(e=n.classList).add.apply(e,c(this.getClassesByKey("wrapper"))),n.innerHTML=t,n}},{key:"constructorCloseBtn",value:function(){return this.settings.closeBtn?'<div class="'+this.getClassesByKey("wrapperCloseBtn",!0)+'"></div>':""}},{key:"constructorTriangle",value:function(){return this.settings.triangle?'\n                <div class="'+this.getClassesByKey("wrapperTriangle",!0)+'"></div>\n            ':""}},{key:"addElementsToConfig",value:function(){this.elements={};var t=!0,n=!1,i=void 0;try{for(var r,a=Object.keys(e.classesBase)[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;this.addElementToConfig(s)}}catch(e){n=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw i}}this.addMutationObserver()}},{key:"addMutationObserver",value:function(){var e=this,t=new MutationObserver(function(t){e.fireEventAndCallback("inputWithSearchWindow_changeContent",{mutations:t})});t.observe(this.getElementByKey("wrapperList"),{childList:!0}),this.observerList=t}},{key:"removeMutationObserver",value:function(){this.observerList.disconnect()}},{key:"addElementToConfig",value:function(t){var n=e.classesBase[t][0];this.elements[t]=document.querySelector("."+n)}},{key:"getElementByKey",value:function(e){return this.elements[e]}},{key:"addInfoToList",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.getElementByKey("wrapperList").innerHTML=this.getElementByKey("wrapperList").innerHTML+e:this.getElementByKey("wrapperList").innerHTML=e}},{key:"destructor",value:function(){this.fireEventAndCallback("inputWithSearchWindow_destruction"),this.removeListeners(),this.removeMutationObserver(),this._setHoveredKey("clear"),this.destructorDOM()}},{key:"fireEventAndCallback",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t in e.listCallbacksAndEvents){var i=this.elements.wrapper,r={inputWithSearchWindow:{object:this,data:n}};s.default.callEvent(i,t,{inputWithSearchWindow:this});var a=this.settings.callbacks[t];"function"==typeof a&&a.apply(void 0,c(Object.values(r.inputWithSearchWindow)))}}},{key:"destructorDOM",value:function(){var e=this.getElementByKey("wrapper");e.parentNode.removeChild(e)}},{key:"addListeners",value:function(){var t=this;this.timerWaitToBlockHoverSelected=!1,this.listeners=new a.default;var n=this.elements.wrapper,i=e.getClassesBaseByKey("elementList")[0],r=this.settings.baseEventsActive,o=[{name:"clickElement",domElement:n,events:"click",fn:function(n){return s.default.delegateFn(n,i,function(n,i){t.setElemListActiveByKey(e._getKeyAttrFromDomElement(i)),t.fireEventAndCallback("inputWithSearchWindow_clickOnElementList",i)})},protectedStatus:!0},{name:"clickOuter",domElement:document,events:"click",fn:function(e){e.target.closest("."+t.getClassesByKey("wrapper")+", .InputWithSearch")||t.destructor()},protectedStatus:!0},{name:"mouseEnterElement",domElement:n,events:"mouseover",fn:function(e){return s.default.delegateFn(e,i,function(e,n){t.checkBlockHoverSelected()||t._setElemListHover(n)})},protectedStatus:!0},{name:"interceptionEvents",domElement:document,events:"keydown",fn:function(e){var n=t,i=t.getRelativeObject();if(i.checkStatus(1)){var r=40===e.keyCode,a=38===e.keyCode,s=13===e.keyCode;if((a||r)&&n.checkStatus()&&(e.preventDefault(),t.timerWaitToBlockHoverSelected=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return clearTimeout(e),t.setBlockHoverSelected(!0),setTimeout(function(){t.setBlockHoverSelected(!1)},n)}(t.timerWaitToBlockHoverSelected,n),r&&n.setElemListHoverByDirection(),a&&n.setElemListHoverByDirection(!1)),s){var o=n._getHoveredKey();"null"!==o&&(t.setElemListActiveByKey(o),i._setActiveByKeyFromList(o)),i.close()}}},protectedStatus:!0},{name:"watcherPosition",domElement:n,events:"inputWithSearchWindow_afterConstruction",fn:function(){t._addWatcherPosition()},protectedStatus:!0},{name:"removeWatcherPosition",domElement:n,events:"inputWithSearchWindow_destruction",fn:function(){t._removeWatcherPosition()},protectedStatus:!0}];this.settings.closeBtn&&o.push({name:"closeBtnEvent",domElement:this.getElementByKey("wrapperCloseBtn"),events:"click",fn:function(){t.destructor()},protectedStatus:!0}),o.forEach(function(n){var i,a=Object.values(n),s=a[0];s in e.baseEventsActive&&!0!==r[s]||(i=t.listeners).addRecord.apply(i,c(a))})}},{key:"getRelativeObject",value:function(){return window.inputWithSearch.getElement(this.dependElement)}},{key:"setElemListHoverByKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.checkStatus()&&this._getList().checkKeyInActionData(e)){var n=this.getClassesByKey("elementList")[0],i=this.elements.wrapper.querySelector("."+n+'[data-key="'+e+'"]');null!==i&&this._setElemListHover(i,t,e)}}},{key:"setElemListHoverByDirection",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.getDataForList(!0)),n=this._getHoveredKey(),i=t.indexOf(n);return e?-1===n?void this.setElemListHoverByKey(t[0]):t[t.length-1]===n?void this.setElemListHoverByKey(n):void this.setElemListHoverByKey(t[i+1]):0===i?(this._unHoveredElements(),void this._setHoveredKey("clear")):void this.setElemListHoverByKey(t[i-1])}},{key:"_unHoveredElements",value:function(){var t=e.getClassesBaseByKey("elementListHovered")[0];this.elements.wrapper.querySelectorAll("."+t).forEach(function(e){e.classList.remove(t)})}},{key:"_setElemListHover",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="string"==typeof i?i:t.getAttribute("data-key"),a=e.getClassesBaseByKey("elementListHovered")[0];r!==this._getHoveredKey()&&(this._unHoveredElements(),this._setHoveredKey(r),n&&(this.elements.wrapperInner.scrollTop=t.offsetTop)),t.classList.add(a)}},{key:"setElemListActiveByKey",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("null"!==t&&(t!==this._getActiveKey()||n)){var r=e.getClassesBaseByKey("elementListSelected")[0];this._unActiveElements(),n||this._setActiveKey(t);var a=this._getDomElementByKey(t);i&&(this.elements.wrapperInner.scrollTop=a.offsetTop),a.classList.add(r)}}},{key:"_getDomElementByKey",value:function(e){return this.elements.wrapper.querySelector('[data-key="'+e+'"]')}},{key:"_unActiveElements",value:function(){var t=e.getClassesBaseByKey("elementListSelected")[0];this.elements.wrapper.querySelectorAll("."+t).forEach(function(e){e.classList.remove(t)})}},{key:"setBlockHoverSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.blockHoverSelected=e}},{key:"checkBlockHoverSelected",value:function(){return this.blockHoverSelected}},{key:"removeListeners",value:function(){this.listeners.removeAllRecords()}},{key:"updateSettings",value:function(e){var t=!1;"classes"in e&&(t=s.default.mergeListArraysWithoutDuplicates(this.settings.classes,e.classes)),this.settings=s.default.extend(!0,{},this.settings,e),t&&(this.settings.classes=t)}},{key:"getClassesByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.settings.classes[e];return t?n.join(" "):n}},{key:"reSetPosition",value:function(){var e=this.getRelativeObject().getWorkDomElement();if(h(e))this.destructor();else{var t=this.settings.cssParams,n=this.settings.cssCallbacks,r=n.window,a=n.triangle;if(f(r))r(e,t);else{var s=e.getBoundingClientRect(),o=window.pageYOffset||document.documentElement.scrollTop,u=this.elements.wrapper.style,c=s.width,l=window.innerWidth,d=i(t.margin,4),v=d[0],y=d[1],m=d[2],p=d[3],g=l-p-y,b=this.settings.cssParams.seekWidthTo;if("none"!==b)switch(b){case"max":c=t.maxWidth;break;case"min":c=t.minWidth}g<c&&(c=g),c<t.minWidth&&(c=t.minWidth),c>t.maxWidth&&(c=t.maxWidth);var k=s.left+(s.width-c)/2;k<p&&(k=p),l-(k+c)<y&&(k=l-c-y),u.top=o+s.bottom-(o+document.body.getBoundingClientRect().top)+"px",u.left=Math.ceil(k)+"px",u.width=c+"px",u.position="absolute",v>0&&(u.marginTop=v+"px"),m>0&&(u.marginBottom=m+"px")}var E=this.getElementByKey("wrapperTriangle");if(null!==E){var w=e.getBoundingClientRect(),S=this.elements.wrapper.getBoundingClientRect();if(f(a))a(E,e,t);else{var _=w.left-S.left+w.width/2-E.offsetWidth/2;E.style.left=Math.ceil(_)+"px"}}}}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.haveData=e}},{key:"checkStatus",value:function(){return this.haveData}},{key:"_getList",value:function(){return this.getRelativeObject().savesData}},{key:"getDataForList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._getList().getData(!1,!0===e?"keyId":null)}},{key:"_setHoveredKey",value:function(e){this._getList().hoveredKey=e}},{key:"_getHoveredKey",value:function(){return this._getList().hoveredKey}},{key:"_setActiveKey",value:function(e){this._getList().activeKey=e}},{key:"_getActiveKey",value:function(){return this._getList().activeKey}},{key:"addListElements",value:function(t,n){var i=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.addInfoToList(""),this.setStatus(!0),t.forEach(function(t,r){i.addInfoToList(e.constructElement(t,n,r,i.settings.constructors.element,i.getClassesByKey("elementList",!0)),!0)});var a=this._getActiveKey(),s="null"!==a;if(r)this.setElemListActiveByKey(a,!0,!1);else if(s)this.setElemListActiveByKey(a,!0,!0),this.setElemListHoverByKey(a,!0);else{var o=this._getHoveredKey();"null"!==o&&this.setElemListHoverByKey(o,r)}}},{key:"setToMessage",value:function(t,n){this.setStatus(),this.addInfoToList(e.constructMessage(t,n,this.settings.constructors[t],this.getClassesByKey("message")))}},{key:"setToError",value:function(){this.setStatus();for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];this.addInfoToList(e.constructMessageError.apply(e,n.concat([this.getClassesByKey("error"),this.settings.constructors.error])))}},{key:"setToWait",value:function(){this.setStatus(),this.addInfoToList(e.constructWaitThrobber())}},{key:"_addWatcherPosition",value:function(){var e=this,t=this.getRelativeObject().getWorkDomElement();this._watcher=new o.default(t,function(){e.reSetPosition()})}},{key:"_removeWatcherPosition",value:function(){this._watcher.destructor()}}],[{key:"_getKeyAttrFromDomElement",value:function(e){return e.getAttribute("data-key")}},{key:"getClassesBaseByKey",value:function(e){return this.classesBase[e]}},{key:"constructElement",value:function(e,t,n,i,r){return'\n                <div class="'+r+'" data-key="'+e.key+'" data-numb="'+n+'">\n                    '+i(e.data,t,s.default.highlightMatchesToString)+"\n                </div>\n            "}},{key:"constructMessage",value:function(e,t,n,i){return'\n                <div class="'+i+'">\n                    '+n.apply(void 0,c(t))+"\n                </div>\n            "}},{key:"constructMessageError",value:function(e,t,n,i){return'\n                <div class="'+n+'">\n                    '+i(e,t)+"\n                </div>\n            "}},{key:"constructWaitThrobber",value:function(){return'\n            <div class="InputWithSearchWindow-Load">\n                <div class="InputWithSearchLoader">\n                    <div class="InputWithSearchLoader-Loader"></div>\n                </div>\n            </div>\n            '}},{key:"classesBase",get:function(){return{wrapper:["InputWithSearchWindow"],wrapperSub:["InputWithSearchWindow-Sub"],wrapperInner:["InputWithSearchWindow-Inner"],wrapperList:["InputWithSearchWindow-List"],wrapperTriangle:["InputWithSearchWindow-Triangle"],wrapperCloseBtn:["InputWithSearchWindow-CloseBtn"],elementList:["InputWithSearchWindow-Element"],elementListSelected:["InputWithSearchWindow-Element_selected"],elementListHovered:["InputWithSearchWindow-Element_hovered"],message:["InputWithSearchWindow-Message"],error:["InputWithSearchWindow-Error"]}}},{key:"listCallbacksAndEvents",get:function(){return{inputWithSearchWindow_clickOnElementList:!1,inputWithSearchWindow_destruction:!1,inputWithSearchWindow_changeContent:!1,inputWithSearchWindow_afterConstruction:!1}}},{key:"defaultSettings",get:function(){return{classes:this.classesBase,constructors:{element:function(e,t,n){return n("Данные "+e+" cо значением "+t)},error:function(e){return e},lessSymbols:function(e,t){return"Введите "+t+" или более символов."},notFind:function(e){return"По запросу "+e+" ничего не было найдено!."}},callbacks:this.listCallbacksAndEvents,cssParams:this.defaultCssParams,triangle:!1,closeBtn:!1,baseEventsActive:this.baseEventsActive}}},{key:"baseEventsActive",get:function(){return{mouseEnterElement:!0,interceptionEvents:!0,clickElement:!0}}},{key:"defaultCssParams",get:function(){return{margin:[0,10,0,10],minWidth:200,maxWidth:300,seekWidthTo:"none"}}},{key:"cssCallbacks",get:function(){return{window:"standart",triangle:"standart"}}}]),e}(),h=function(e){return null===e.offsetParent},f=function(e){return"function"==typeof e};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r,a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=m(n(14)),l=m(n(5)),h=m(n(1)),f=m(n(4)),d=m(n(2)),v=m(n(11)),y=n(10);function m(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var g,b,k,E,w,S=(i=function(){function e(t){var n,i,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r)&&Object.defineProperty(this,"id",{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(this):void 0}),this._domElement=t,this._delegateElement=!1,this.settings=e.settings,this.updateSettings(s),this.createCustomContainer(),this.fireEventAndCallback("inputWithSearch_beforeInit"),this.waitData=!1,this.xhr=!1,this.promiseXhr=!1,this.savesData=new v.default(this.id,{active:function(e){a.fireEventAndCallback("inputWithSearch_changeActive",{key:e})},hover:function(e){a.fireEventAndCallback("inputWithSearch_changeHover",{key:e})}}),this.savesData.addData([],this.getValueFromInput()),this.changeStatus([0]),(n=this.getWorkDomElement().classList).add.apply(n,p(this.getClassesByKey("input"))),this.addEventListeners(),this.wasFirstLoad=!1,e.addAttrToDomInput(this.getWorkDomElement()),this._toggleInitClass(),this.fireEventAndCallback("inputWithSearch_afterInit")}return u(e,[{key:"_toggleInitClass",value:function(){this._domElement.classList.toggle(e.getBaseClassesByKey("initialize")[0])}},{key:"getWorkDomElement",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!_(this._delegateElement)?this._domElement:this._delegateElement}},{key:"getListeners",value:function(){return this.listeners}},{key:"addEventListeners",value:function(){var e=this,t=this.getListeners(),n=this.getWorkDomElement();switch(void 0!==t&&t instanceof f.default&&t.removeAllRecords(),t=new f.default(this.getWorkDomElement(!0)),this.settings.onEvents){case"input":t.addListRecords([{name:"onEvents",domElement:n,events:this.settings.onEvents,fn:function(){e.open()},protectedStatus:!0}]);break;case"click":t.addListRecords([{name:"onEvents",domElement:n,events:this.settings.onEvents,fn:function(){e.checkStatus(0)?e.open():e.close()},protectedStatus:!0}]);break;case"hover":var i=null,r=function(){clearTimeout(i),i=setTimeout(function(){e.close()},50)};t.addListRecords([{name:"openWrapperHover",domElement:n,events:"inputWithSearch_afterOpen",fn:function(){clearTimeout(i);var t=e.inputWithSearchWindow.getElementByKey("wrapper"),n=e.inputWithSearchWindow.listeners;n.addRecord("mouseLeaveWrapperHover",t,"mouseleave",r,!0),n.addRecord("mouseEnterWrapperHover",t,"mouseenter",function(){clearTimeout(i)},!0)},protectedStatus:!0},{name:"onEvents",domElement:n,events:"mouseenter",fn:function(){e.checkStatus(0)&&e.open(),e.checkStatus(1)&&clearTimeout(i)},protectedStatus:!0},{name:"mouseLeaveElement",domElement:n,events:"mouseleave",fn:r,protectedStatus:!0}]);break;default:console.warn("Параметр onEvents заполнен неверно!")}this.listeners=t}},{key:"removeEventListeners",value:function(){this.listeners.removeAllRecords()}},{key:"getValueFromInput",value:function(){var e=this.getWorkDomElement();return"function"==typeof this.settings.fns.fnGetValueFromInput?this.settings.fns.fnGetValueFromInput.call(null,e):W(e)?e.value:e.textContent}},{key:"setValueToInput",value:function(e){var t=this.getWorkDomElement();"function"!=typeof this.settings.fns.fnSetValueToInput?W(t)?t.value=e:t.textContent=e:this.settings.fns.fnSetValueToInput.call(null,t,e)}},{key:"updateSettings",value:function(e){var t=!1;"classes"in e&&"object"===o(e.classes)&&(t=h.default.mergeListArraysWithoutDuplicates(this.settings.classes,e.classes)),this.settings=h.default.extend(!0,{},this.settings,e),t&&(this.settings.classes=t),this._updateDelegateElement(e.delegateElement)}},{key:"_updateDelegateElement",value:function(e){var t=!1;if(void 0!==e){var n=e,i=!1;"function"==typeof e&&(n=e(this.getWorkDomElement(!0),this.id),i=!0),!0===e&&(n=C(this.getWorkDomElement(!0)),i=!0),this._removeDelegateElement(),n instanceof HTMLElement&&(this._addDelegateElement(n,i),t=n)}this._delegateElement=t}},{key:"_addDelegateElement",value:function(e,t){t?e.setAttribute("data-iws-generated",this.id):e.setAttribute("data-iws-used",this.id),e.setAttribute("data-iws-delegate",this.id)}},{key:"_removeDelegateElement",value:function(){var e=this._delegateElement;!1!==e&&(e.getAttribute("data-iws-generated")?e.parentElement.removeChild(e):(e.removeAttribute("data-iws-used"),e.removeAttribute("data-iws-delegate"))),this._delegateElement=!1}},{key:"changeStatus",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];void 0===this.status&&(this.status=new window.Set),n.forEach(function(n){n in e.statuses&&t.status.add(n)}),i.forEach(function(n){n in e.statuses&&t.status.delete(n)})}},{key:"checkStatus",value:function(e){return this.status.has(e)}},{key:"fnOnEventFire",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.changeStatus([],[2,3]);var t=this.getWorkDomElement(),n=W(t);if(!1===e&&(e=t.value),!1===n||e.length>=this.settings.lengthStringToOutput){var i=this.savesData;if(i.checkCustomData())this.constructList();else{var r=!0;if(this.settings.useCache&&this.settings.loadOnlyStart)r=!this.wasFirstLoad;else{var a=i.validateSaveDataForRequest(e,this.settings.timeLiveSaveData);r=!this.settings.useCache||!a}r?this.loadData():this.constructList()}}else this.stopLoadData(),this.setToMessage("lessSymbols",[this.settings.lengthStringToOutput])}},{key:"stopLoadData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];clearTimeout(this.waitData),e&&this.changeStatus([],[2]),"object"===o(this.xhr)&&this.xhr.abort()}},{key:"constructList",value:function(){this._allFilterAndSortProcess();var e=this.savesData.getData(!1);if(e.length)return this.fireEventAndCallback("inputWithSearch_beforeListAddDom"),this.inputWithSearchWindow.addListElements(e,this.getValueFromInput(),this.settings.repositionActiveToTop),void this.fireEventAndCallback("inputWithSearch_afterListAddDom");this.setToMessage("notFind")}},{key:"_allFilterAndSortProcess",value:function(){var e,t,n=this,i=this.savesData,r=i.getData(),a=this.getValueFromInput();this.settings.maxViewElements<r.length&&(e=r,t=this.settings.maxViewElements,r=e.length>t?e.slice(0,t):e),"function"==typeof this.settings.fns.filterData&&(r=r.filter(function(e){return n.settings.fns.filterData(e,a)})),!0===this.settings.repositionActiveToTop&&(r=v.default.repositionActiveToTop(r)),i.saveActionData(r),this.fireEventAndCallback("inputWithSearch_onUpdateDataView")}},{key:"onLoadData",value:function(e,t){var n=JSON.parse(e);this.savesData.addData(n,t),this.constructList(),!1===this.wasFirstLoad&&(this.wasFirstLoad=!0)}},{key:"loadData",value:function(){var e,t=this;this.stopLoadData(!1),this.waitData=setTimeout((e=regeneratorRuntime.mark(function e(){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setToWait(),e.prev=1,t.promiseXhr=t.request(t.settings.ajaxConfig.url),n=t.getValueFromInput(),e.next=6,t.promiseXhr;case 6:i=e.sent,t.onLoadData(i,n),e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(1),0!==e.t0){e.next=16;break}t.setToError(new Error("Данные не были получены!")),e.next=17;break;case 16:throw e.t0;case 17:return e.prev=17,t.changeStatus([],[2]),e.finish(17);case 20:case"end":return e.stop()}},e,t,[[1,10,17,20]])}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}),this.settings.delayBeforeSendRequest)}},{key:"request",value:function(t){var n=this;return new window.Promise(function(i,r){var a=n.xhr=new window.XMLHttpRequest;a.onload=function(){i(a.response)},a.timeout=n.settings.ajaxConfig.timeout,a.onerror=function(){r(a.status)},a.open(n.settings.ajaxConfig.type,t+n.generateGetParams(),!0),a.send(e.prepareAjaxSendData(n.settings.ajaxConfig.data))})}},{key:"generateGetParams",value:function(){var e=this.settings.fns.generateGetParams;return"function"==typeof e?"?"+e(this):""}},{key:"getClassesByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.settings.classes[e];return t?n.join(" "):n}},{key:"open",value:function(){var t=window.inputWithSearchWindow instanceof c.default;if(!this.checkStatus(1)){var n=this.getWorkDomElement();this.fireEventAndCallback("inputWithSearch_beforeOpen"),t&&window.inputWithSearchWindow.destructor(),window.inputWithSearchWindow=this.inputWithSearchWindow=new c.default(this.getWorkDomElement(!0),this.configForInitSearchWindow),e.setInputActive(n,!0),this.changeStatus([1],[0])}this.fnOnEventFire(),this.fireEventAndCallback("inputWithSearch_afterOpen")}},{key:"_setActiveByKeyFromList",value:function(e){var t=this.getDataFromLastDataByKey(e),n=this.getValueFromInput();return this.setValueToInput(this.settings.fns.dataToInputByClick(t)),{data:t,currentValue:this.getValueFromInput(),lastValue:n}}},{key:"getDataFromLastDataByKey",value:function(e){return this.savesData.getData(!1,"keyId")[e]}},{key:"close",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.checkStatus(1)){t&&this.fireEventAndCallback("inputWithSearch_beforeClose"),this.changeStatus([0],[1]);try{n&&window.inputWithSearchWindow.destructor()}finally{window.inputWithSearchWindow=null}e.setInputActive(this.getWorkDomElement(),!1),t&&this.fireEventAndCallback("inputWithSearch_afterClose")}}},{key:"setToError",value:function(e){this.changeStatus([3]),this.fireEventAndCallback("inputWithSearch_onError",[e]),this.inputWithSearchWindow.setToError(e.message,e)}},{key:"fireEventAndCallback",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t in e.getListCallbacksAndEvents()){var i=this.getWorkDomElement(!0),r=s({object:this},n);r[Symbol.iterator]=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.object;case 2:e.t0=regeneratorRuntime.keys(this);case 3:if((e.t1=e.t0()).done){e.next=11;break}if(t=e.t1.value,!this.hasOwnProperty(t)){e.next=9;break}if("object"===t){e.next=9;break}return e.next=9,this[t];case 9:e.next=3;break;case 11:case"end":return e.stop()}},e,this)});var a={inputWithSearch:r};h.default.callEvent(i,t,a);var o=this.settings.callbacks[t];"function"==typeof o&&o.apply(void 0,p(r))}}},{key:"setToWait",value:function(){this.checkStatus(2)||(this.changeStatus([2]),this.inputWithSearchWindow.setToWait())}},{key:"setToMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[this.getValueFromInput()].concat(p(t));this.inputWithSearchWindow.setToMessage(e,n)}},{key:"destructor",value:function(){var t;this.fireEventAndCallback("inputWithSearch_beforeDestruction");var n=this.getWorkDomElement();this.close(),this.removeEventListeners(),e.setInputActive(n,!1),(t=n.classList).remove.apply(t,p(this.getClassesByKey("input"))),this._toggleInitClass(),d.default.getDataWeakMapIWS(l.default.getInstance()).list.removeElement(n),this._removeDelegateElement()}},{key:"setCustomData",value:function(e){this.savesData.addData(e,this.getValueFromInput(),!0)}},{key:"createCustomContainer",value:function(){this.customContainer=new Map}},{key:"getCustomContainer",value:function(){return this.customContainer}},{key:"setActive",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="null",i=this.savesData;i.getData(!1).some(function(t){var i=e(t.data);return i&&(n=t.key),i}),"null"!==n&&(!1===t&&i.setInactivityCallback("active"),i.activeKey=n,this._setActiveByKeyFromList(n),this.checkStatus(1)&&(this.inputWithSearchWindow.setElemListActiveByKey(n,!0),this.inputWithSearchWindow.setElemListHoverByKey(n,!1)),!1===t&&i.setActivityCallback("active"))}},{key:"getDataByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.savesData.getDataByKey(e,t)}},{key:"getActiveKey",value:function(){return this.savesData.activeKey}},{key:"configForInitSearchWindow",get:function(){var e,t,n,i=this;return{callbacks:{inputWithSearchWindow_destruction:function(){i.close(!0,!1)},inputWithSearchWindow_clickOnElementList:function(e,t){var n=t.getAttribute("data-key"),r=i._setActiveByKeyFromList(n);i.fireEventAndCallback("inputWithSearch_onClickOption",r),i.close()},inputWithSearchWindow_changeContent:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.fireEventAndCallback("inputWithSearch_onChangeWindow",t)}},classes:(t=this.settings.classes,n=c.default.classesBase,Object.keys(t).reduce(function(e,i){return i in n&&(e[i]=t[i]),e},{})),constructors:(e=this.settings.constructors,Object.entries(e).reduce(function(e,t){var n=a(t,2),i=n[0],r=n[1];return"function"==typeof r&&(e[i]=r),e},{})),cssParams:this.settings.cssParamsWindow,cssCallbacks:this.settings.cssCallbacksWindow,triangle:this.settings.triangle,baseEventsActive:this.settings.baseWindowEventsActive,closeBtn:this.settings.closeBtn}}}],[{key:"_counter",value:function(){return void 0===this.counter&&(this.counter=-1),this.counter+=1,this.counter}},{key:"addAttrToDomInput",value:function(e){e.autocomplete="off"}},{key:"prepareAjaxSendData",value:function(e){var t=e;return"function"==typeof t&&(t=t()),null!==t&&(t="string"==typeof t?t:Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")),t}},{key:"setInputActive",value:function(e,t){t?e.classList.add("InputWithSearch_active"):e.classList.remove("InputWithSearch_active")}},{key:"getBaseClassesByKey",value:function(e){return this.baseClasses[e]}},{key:"getListCallbacksAndEvents",value:function(){return{inputWithSearch_beforeInit:!1,inputWithSearch_afterInit:!1,inputWithSearch_beforeDestruction:!1,inputWithSearch_onClickOption:!1,inputWithSearch_beforeListAddDom:!1,inputWithSearch_afterListAddDom:!1,inputWithSearch_beforeOpen:!1,inputWithSearch_afterOpen:!1,inputWithSearch_beforeClose:!1,inputWithSearch_afterClose:!1,inputWithSearch_onError:!1,inputWithSearch_onChangeWindow:!1,inputWithSearch_onUpdateDataView:!1,inputWithSearch_changeActive:!1,inputWithSearch_changeHover:!1}}},{key:"getInHtmlElementAllElementsByClass",value:function(e){return e.querySelectorAll("."+this.getBaseClassesByKey("initialize")[0])}},{key:"statuses",get:function(){return{0:"close",1:"open",2:"waiting data",3:"error"}}},{key:"baseClasses",get:function(){return{initialize:["InputWithSearchRoot"],input:["InputWithSearch"],bodyOpen:["InputWithSearchOpen"]}}},{key:"htmlElementsClasses",get:function(){var e=Object.keys(c.default.classesBase).reduce(function(e,t){return e[t]=[],e},{}),t=h.default.extend(this.baseClasses,e);return Object.defineProperties(t,function(e,t){return["input","bodyOpen","initialize"].reduce(function(e,n){return e[n]=t,e},{})}(0,{configurable:!0,writable:!1})),t}},{key:"settings",get:function(){return{onEvents:"input",delayBeforeSendRequest:300,ajaxConfig:{url:"http://headers.jsontest.com/",type:"GET",timeout:1e4,data:null},callbacks:this.getListCallbacksAndEvents(),constructors:{element:!1,error:!1,lessSymbols:!1,notFind:!1},fns:{dataToInputByClick:function(e){return e.data},fnSetValueToInput:!1,fnGetValueFromInput:!1,filterData:!1,generateGetParams:!1},useCache:!1,loadOnlyStart:!1,maxViewElements:50,lengthStringToOutput:4,timeLiveSaveData:36e5,classes:this.htmlElementsClasses,data:!1,cssParamsWindow:c.default.defaultCssParams,cssCallbacksWindow:c.default.cssCallbacks,triangle:!1,closeBtn:!1,baseWindowEventsActive:{},delegateElement:!1,repositionActiveToTop:!0}}}]),e}(),g=i.prototype,b="id",k=[y.readOnly],E={enumerable:!0,initializer:function(){return"IWS-"+S._counter()}},w={},Object.keys(E).forEach(function(e){w[e]=E[e]}),w.enumerable=!!w.enumerable,w.configurable=!!w.configurable,("value"in w||w.initializer)&&(w.writable=!0),void 0===(w=k.slice().reverse().reduce(function(e,t){return t(g,b,e)||e},w)).initializer&&(Object.defineProperty(g,b,w),w=null),r=w,i),_=function(e){return e instanceof HTMLElement},W=function(e){return"INPUT"===e.tagName},C=function(e){var t=document.createElement("div");return h.default.insertAfter(t,e)};t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.saves=new window.WeakMap}return i(e,[{key:"addElement",value:function(e,t){this.saves.set(e,t)}},{key:"hasElement",value:function(e){return this.saves.has(e)}},{key:"removeElement",value:function(e){this.saves.delete(e)}},{key:"getElement",value:function(e){return this.saves.get(e)}}]),e}();t.default=r},function(e,t,n){"use strict";Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null})},,function(e,t,n){},function(e,t,n){"use strict";n(19),n(17);var i=a(n(5)),r=a(n(9));function a(e){return e&&e.__esModule?e:{default:e}}window.inputWithSearch=new i.default,(0,r.default)()}]);