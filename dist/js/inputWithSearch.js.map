{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/classes/ContainerData.js","webpack:///./src/js/classes/Errors/CustomError.js","webpack:///./src/js/classes/Errors/PropertyError.js","webpack:///./src/js/classes/EventSave.js","webpack:///./src/js/classes/InputWithSearch.js","webpack:///./src/js/classes/InputWithSearchForWindow.js","webpack:///./src/js/classes/InputWithSearchWindow.js","webpack:///./src/js/classes/ListInputWithSearch.js","webpack:///./src/js/classes/WatcherPosition.js","webpack:///./src/js/functions/decorators.js","webpack:///./src/js/functions/functions.js","webpack:///./src/js/functions/weakMapIWS.js","webpack:///./src/js/inputWithSearch.js","webpack:///./src/js/polyfills/polyfills.js","webpack:///./src/js/themes/defaultExportTheme.js","webpack:///./src/js/themes/listThemes/openInfo.js","webpack:///./src/js/themes/listThemes/select.js","webpack:///./src/js/themes/listThemes/withPerfectScrollbar.js","webpack:///./src/js/themes/themes.js","webpack:///./src/scss/inputWithSearch.scss?cd4a"],"names":["ContainerData","idParent","callbacks","_idParent","_callbacks","_prepareObjectCallbacks","clear","data","value","customData","_data","wrapListElements","validateData","_value","_customData","_date","Date","now","_actionData","slice","activeKey","addData","startedData","type","unWrapListElement","reduce","acc","cur","key","full","getData","undefined","nameAction","clearAction","_runCbOnName","checkKeyInActionData","Object","keys","indexOf","stringRequest","timeLiveSaveData","toLower","toLowerCase","name","_checkActivityCallback","cb","get","checkNameInAvailableCbs","getActionKey","_setAction","arrData","map","element","i","wrapElementList","numb","hover","active","Array","isArray","values","Error","info","getActionFullData","arrWork","length","index","unshift","splice","nameCbs","objectCallbacks","current","set","activity","Map","getActionKeyIndex","arr","indexArr","some","forEach","CustomError","message","PropertyError","property","protectedRecordsEventSave","Symbol","EventSave","rootDomElement","HTMLElement","domElement","events","fn","protectedStatus","has","addEventListener","addRecord","arrInfo","recordInfo","iterator","removeProtected","record","getRecordByName","removeEventListener","delete","removeRecord","InputWithSearch","settings","_domElement","_delegateElement","updateSettings","createCustomContainer","fireEventAndCallback","waitData","xhr","promiseXhr","savesData","id","getValueFromInput","changeStatus","getWorkDomElement","classList","add","getClassesByKey","addEventListeners","wasFirstLoad","addAttrToDomInput","_toggleInitClass","toggle","getBaseClassesByKey","useInitDomImportant","checkDomElement","listeners","getListeners","removeAllRecords","onEvents","addListRecords","open","checkStatus","close","timerHover","timerHoverFn","clearTimeout","setTimeout","wrapper","inputWithSearchWindow","getElementByKey","listenersWrapper","console","warn","fns","fnGetValueFromInput","call","checkDomOnInput","textContent","fnSetValueToInput","newSettings","classes","funcs","mergeListArraysWithoutDuplicates","extend","_updateDelegateElement","delegateElement","newDelegateElement","returnValue","newElement","constructed","constructDelegateElement","_removeDelegateElement","_addDelegateElement","setAttribute","getAttribute","parentElement","removeChild","removeAttribute","addStatuses","removeStatuses","status","window","Set","statuses","idStatus","domElementIsInput","lengthStringToOutput","checkCustomData","constructList","needLoad","useCache","loadOnlyStart","validCache","validateSaveDataForRequest","loadData","stopLoadData","setToMessage","removeStatus","abort","_allFilterAndSortProcess","addListElements","repositionActiveToTop","sliceData","maxLength","maxViewElements","filterData","filter","elemData","saveActionData","dataSort","JSON","parse","setToWait","request","ajaxConfig","url","onLoadData","setToError","delayBeforeSendRequest","Promise","resolve","reject","XMLHttpRequest","onload","response","timeout","onerror","generateGetParams","send","prepareAjaxSendData","join","checkWindow","InputWithSearchWindow","checkOpen","destructor","configForInitSearchWindow","setInputActive","fnOnEventFire","getDataFromLastDataByKey","inputValue","setValueToInput","dataToInputByClick","currentValue","lastValue","runEvents","runDestructor","error","getListCallbacksAndEvents","caller","inputWithSearch","object","hasOwnProperty","dataToOutput","callEvent","func","typeMessage","params","toOutput","removeEventListeners","remove","weakMapIWS","getDataWeakMapIWS","InputWithSearchForWindow","getInstance","list","removeElement","customContainer","withRunEvent","changeKey","result","setInactivityCallback","_setActiveByKeyFromList","setElemListActiveByKey","setElemListHoverByKey","setActivityCallback","getDataByKey","getClassesFromSettings","classesWindow","classesBase","nameElement","getNeedConstructors","constructors","entries","inputWithSearchWindow_destruction","inputWithSearchWindow_clickOnElementList","objectWindow","configForEvent","inputWithSearchWindow_changeContent","args","cssParams","cssParamsWindow","cssCallbacks","cssCallbacksWindow","triangle","baseEventsActive","baseWindowEventsActive","closeBtn","counter","input","autocomplete","sendData","k","encodeURIComponent","flag","baseClasses","querySelectorAll","initialize","bodyOpen","objectNotChangeable","configurable","writable","notChangeableKeys","generateObjectForChange","voidClassWindowClasses","defineProperties","lessSymbols","notFind","htmlElementsClasses","defaultCssParams","readOnly","_counter","tagName","document","createElement","insertAfter","toAppend","singleton","defineProperty","enumerable","protectedFields","ListInputWithSearch","themes","setDataWeakMapIWS","mutationObserver","MutationObserver","mutations","prototype","mutation","removedNodes","checkInit","getInHtmlElementAllElementsByClass","elementWasInit","observe","documentElement","childList","subtree","objectConfig","_getElementFromPage","init","getListAvailableThemeConfig","retObject","themesList","themeName","availableThemeConfigs","objectTheme","fnRunBeforeStart","objectData","sliceObjectArrays","exemplar","addElement","fnRunOnStart","getElement","checkIdFn","someData","checkHTMLfn","getElementById","getElemById","stringId","hasElement","dependElement","defaultSettings","addToDomWindow","addElementsToConfig","addListeners","setBlockHoverSelected","setStatus","reSetPosition","body","appendChild","constructorDOM","content","constructorTriangle","constructorCloseBtn","innerHTML","elements","addElementToConfig","addMutationObserver","observer","config","observerList","disconnect","querySelector","htmlToList","plus","removeListeners","removeMutationObserver","_setHoveredKey","destructorDOM","listCallbacksAndEvents","parentNode","setTimeoutOnBlockSelected","timer","winSh","time","timerWaitToBlockHoverSelected","elemListClass","getClassesBaseByKey","eventsArr","event","delegateFn","e","elem","_getKeyAttrFromDomElement","target","closest","checkBlockHoverSelected","_setElemListHover","windowSh","relativeClass","getRelativeObject","down","keyCode","up","enter","preventDefault","setElemListHoverByDirection","hoveredKey","_getHoveredKey","_addWatcherPosition","_removeWatcherPosition","push","withScroll","_getList","arrKeys","getDataForList","_unHoveredElements","domListElement","keyElement","wrapperInner","scrollTop","offsetTop","updateOnlyDom","_getActiveKey","_unActiveElements","_setActiveKey","_getDomElementByKey","blockHoverSelected","isHidden","customFunctionForResizing","customFnResize","customFnRePositionTriangle","checkOnFunction","elem_character","getBoundingClientRect","scroll","pageYOffset","style","width","winWidth","innerWidth","margin","mTop","mRight","mBot","mLeft","availablePlaceWidth","seekWidthTo","maxWidth","minWidth","left","top","bottom","Math","ceil","position","marginTop","marginBottom","window_character","leftTriangle","offsetWidth","withData","haveData","dataList","reposition","addInfoToList","dataElement","constructElement","checkActiveKey","constructMessage","constructMessageError","constructWaitThrobber","_watcher","WatcherPosition","highlightMatchesToString","textError","errorCode","wrapperSub","wrapperList","wrapperTriangle","wrapperCloseBtn","elementList","elementListSelected","elementListHovered","errorText","needSymbolsLength","mouseEnterElement","interceptionEvents","clickElement","el","offsetParent","saves","WeakMap","objectInfo","domWatch","timeTik","_savePositionFromElement","_addInterval","positionObject","_positionBefore","saveParams","getParamsFromDomElement","_interval","setInterval","_fireFunctionOnTik","newPosition","differentTwoObjectPosition","_getPositionBefore","clearInterval","getScrolls","doc","pageXOffset","scrollLeft","clientLeft","clientTop","scrolls","height","obj1","obj2","stringify","descriptor","findClass","related","relatedTarget","match","contains","extended","deep","arguments","toString","merge","obj","prop","string","query","reg","RegExp","replace","hasClass","cls","className","eventConfig","bubbles","detail","dispatchEvent","CustomEvent","oldArr","newArr","classesElement","from","concat","newNode","referenceNode","insertBefore","nextSibling","classesArraysSlice","dataArgs","newObject","firstArg","secondArg","keysTheme","keysObject","summKeys","inTheme","inObject","arg","InputWithSearchForWindowWeakMap","Element","css","node","matches","cbBefore","rootElement","innHTML","setCustomData","getFromEventObject","cbBeforeStart","display","getArrayInfoFromSelect","selectDom","text","option","selected","checkActiveObjectInfoFromSelect","objectCheck","cbBeforeDestruct","HTMLElem","cbOnChangeData","select","evt","createEvent","initEvent","fireEvent","callbackOnExternalChange","activeObject","getActiveKey","setActive","addCustomRecord","PerfectScrollbar","ps","wheelPropagation","getCustomContainer","update","container","destroy","runDefaultThemes","addTheme","withPerfectScrollbarTheme","selectTheme","openInfo"],"mappings":"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","file":"inputWithSearch.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/inputWithSearch.js\");\n","class ContainerData{\r\n\r\n    /**\r\n     * constructor\r\n     * @param {string} idParent\r\n     * @param {object} callbacks\r\n     */\r\n    constructor(idParent, callbacks){\r\n        this._idParent = idParent;\r\n        /**\r\n         * @typedef {Map.<string, {cb: function|boolean, activity: boolean}>} _callbacks\r\n         * @type _callbacks\r\n         */\r\n        this._callbacks = ContainerData._prepareObjectCallbacks(callbacks);\r\n        this.clear();\r\n    }\r\n\r\n    /**\r\n     * Add values to container\r\n     * @param {array|object} data\r\n     * @param {string} value\r\n     * @param {boolean} customData - Data was added programmatically\r\n     */\r\n    addData(data, value, customData = false){\r\n        this._data = ContainerData.wrapListElements(\r\n            ContainerData.validateData(data),\r\n            this._idParent\r\n        );\r\n        this._value = value;\r\n        this._customData = customData;\r\n        this._date = Date.now();\r\n        this._actionData = this._data.slice(0);\r\n        this.activeKey = 'clear';\r\n    }\r\n\r\n    saveActionData(data){\r\n        this._actionData = data;\r\n    }\r\n\r\n    clear(){\r\n        this.addData([], '');\r\n    }\r\n\r\n    checkCustomData(){\r\n        return this._customData;\r\n    }\r\n\r\n    getData(startedData = true, type = 'typical'){\r\n\r\n        const data = startedData ? this._data : this._actionData;\r\n\r\n        switch (type){\r\n            case 'clear':\r\n                return ContainerData.unWrapListElement(data);\r\n            case 'keyId':\r\n                return data.reduce((acc, cur) => {\r\n                    acc[cur.key] = cur;\r\n                    return acc;\r\n                }, {});\r\n            default:\r\n                return data;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get data\r\n     * @param {string} key\r\n     * @param {boolean} full\r\n     * @return {Object|undefined}\r\n     */\r\n    getDataByKey(key, full = false){\r\n        let data = this.getData(false, 'keyId')[key];\r\n        return typeof data !== 'undefined'\r\n            ? full\r\n                ? data\r\n                : data['data']\r\n            : undefined;\r\n    }\r\n\r\n    /**\r\n     * Getter key hover\r\n     * @returns {string}\r\n     */\r\n    get hoveredKey(){\r\n        return getActionKey('hover', this._actionData);\r\n    }\r\n\r\n    /**\r\n     * Setter key hover\r\n     * @param {string} key\r\n     */\r\n    set hoveredKey(key){\r\n        this._setAction(key, 'hover');\r\n    }\r\n\r\n    /**\r\n     * Getter key active\r\n     * @returns {string}\r\n     */\r\n    get activeKey(){\r\n        return getActionKey('active', this._actionData);\r\n    }\r\n\r\n    /**\r\n     * Setter key active\r\n     * @param {string} key\r\n     */\r\n    set activeKey(key){\r\n        this._setAction(key, 'active');\r\n    }\r\n\r\n    _setAction(key, nameAction){\r\n        if (key === 'clear'){\r\n            clearAction(nameAction, this._actionData);\r\n            this._runCbOnName(nameAction, key);\r\n            return;\r\n        }\r\n        if (this.checkKeyInActionData(key)){\r\n            clearAction(nameAction, this._actionData);\r\n            this.getData(false, 'keyId')[key][nameAction] = true;\r\n            this._runCbOnName(nameAction, key);\r\n        }\r\n    }\r\n\r\n    checkKeyInActionData(key){\r\n        return Object.keys(this.getData(false, 'keyId')).indexOf(key) !== -1;\r\n    }\r\n\r\n    static unWrapListElement(arrData){\r\n        return arrData.map(element => element.data);\r\n    }\r\n\r\n    static wrapListElements(arrData, idParent){\r\n        return arrData.map((data, i) => ContainerData.wrapElementList(data, idParent, i));\r\n    }\r\n\r\n    static wrapElementList(element, idParent, numb){\r\n        return {\r\n            data: element,\r\n            key: `${idParent}_${numb}`,\r\n            hover: false,\r\n            active: false\r\n        };\r\n    }\r\n\r\n    static validateData(data){\r\n        if (Array.isArray(data)){\r\n            return data;\r\n        } else {\r\n            if (data instanceof Object){\r\n                return Object.values(data);\r\n            } else {\r\n                throw new Error('Полученные данные не являются JSON-массивом.');\r\n            }\r\n        }\r\n    }\r\n\r\n    static repositionActiveToTop(arrData){\r\n        const info = getActionFullData('active', arrData);\r\n        let arrWork = arrData.slice(0);\r\n        if (info !== 'null' && arrData.length > 1 && info.index !== -1){\r\n            arrWork.unshift(...arrWork.splice(info.index,1));\r\n        }\r\n        return arrWork;\r\n    }\r\n\r\n    validateSaveDataForRequest(stringRequest, timeLiveSaveData){\r\n\r\n        const toLower = value => value.toLowerCase();\r\n\r\n        if (this._value === '' || toLower(stringRequest).indexOf(toLower(this._value)) === -1){\r\n            return false;\r\n        }\r\n\r\n        return Date.now() - this._date < timeLiveSaveData;\r\n    }\r\n\r\n    /**\r\n     * Get available name fields\r\n     * @return {string[]}\r\n     */\r\n    static get nameCbs(){\r\n        return ['active', 'hover'];\r\n    }\r\n\r\n    /**\r\n     * Check name on available callbacks\r\n     * @param name\r\n     * @return {boolean}\r\n     */\r\n    static checkNameInAvailableCbs(name){\r\n        return this.nameCbs.indexOf(name) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Start prepare objectCallbacks\r\n     * @param {Object.<string, function>} objectCallbacks\r\n     * @private\r\n     * @return {_callbacks}\r\n     */\r\n    static _prepareObjectCallbacks(objectCallbacks){\r\n        return this.nameCbs.reduce((acc, current) => {\r\n            if (typeof objectCallbacks[current] !== 'undefined'){\r\n                let cb = typeof objectCallbacks[current] === 'function' ? objectCallbacks[current] : false;\r\n                acc.set(current, {\r\n                    cb,\r\n                    activity: true\r\n                });\r\n            }\r\n            return acc;\r\n        }, new Map());\r\n    }\r\n\r\n    _runCbOnName(name, key){\r\n        if (this._checkActivityCallback(name)){\r\n            let cb = this._callbacks.get(name)['cb'];\r\n            cb(key);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Disable runs callbacks with name\r\n     * @param {string} name\r\n     */\r\n    setInactivityCallback(name){\r\n        if (ContainerData.checkNameInAvailableCbs(name)){\r\n            this._callbacks.get(name)['activity'] = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Able runs callbacks with name\r\n     * @param {string} name\r\n     */\r\n    setActivityCallback(name){\r\n        if (ContainerData.checkNameInAvailableCbs(name)) {\r\n            this._callbacks.get(name)['activity'] = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check activity run callback with name\r\n     * @param name\r\n     * @return {boolean}\r\n     * @private\r\n     */\r\n    _checkActivityCallback(name){\r\n        return this._callbacks.get(name)['activity'];\r\n    }\r\n}\r\n\r\nconst getActionKeyIndex = (nameAction, arr) => {\r\n\r\n    let indexArr = -1;\r\n\r\n    arr.some((element, index) => {\r\n        if (element[nameAction]){\r\n            indexArr = index;\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n\r\n    return indexArr;\r\n};\r\n\r\nconst getActionKey = (nameAction, arr) => {\r\n    let index = getActionKeyIndex(nameAction, arr);\r\n    return index !== -1 ? arr[index]['key'] : 'null';\r\n};\r\n\r\nconst getActionFullData = (nameAction, arr) => {\r\n    let index = getActionKeyIndex(nameAction, arr);\r\n    return index !== -1 ? {data: arr[index], index} : 'null';\r\n};\r\n\r\nconst clearAction = (nameAction, arr) => {\r\n    arr.forEach(element => {\r\n        element[nameAction] = false;\r\n    });\r\n};\r\n\r\nexport default ContainerData;","class CustomError extends Error{\r\n    constructor(message){\r\n        super(message);\r\n        this.name = 'CustomError';\r\n        this.message = message;\r\n    }\r\n}\r\n\r\nexport {CustomError};","import {CustomError} from './CustomError.js';\r\n\r\nclass PropertyError extends CustomError{\r\n    constructor(property){\r\n        super('Ошибка в свойстве ' + property);\r\n        this.property = property;\r\n    }\r\n}\r\n\r\nexport default PropertyError;","import {PropertyError} from './Errors/PropertyError.js';\r\n\r\n/**\r\n * Symbol for incapsulated Map with events\r\n * @type {symbol}\r\n */\r\nconst protectedRecordsEventSave = Symbol('protectedRecordsEventSave');\r\n\r\nclass EventSave{\r\n\r\n    constructor(rootDomElement = false){\r\n        /**\r\n         *\r\n         * @type {Map}\r\n         */\r\n        this[protectedRecordsEventSave] = new Map();\r\n        if (rootDomElement !== false && rootDomElement instanceof HTMLElement){\r\n            this.rootDomElement = rootDomElement;\r\n        } else {\r\n            this.rootDomElement = null;\r\n        }\r\n    }\r\n\r\n    addRecord(name, domElement, events, fn, protectedStatus = false){\r\n        if (!this[protectedRecordsEventSave].has(name)){\r\n            domElement.addEventListener(events, fn);\r\n            this[protectedRecordsEventSave].set(name, {\r\n                domElement,\r\n                events,\r\n                fn,\r\n                protectedStatus\r\n            });\r\n        } else {\r\n            throw new PropertyError(name);\r\n        }\r\n    }\r\n\r\n    addCustomRecord(name, events, fn){\r\n        if (this.rootDomElement !== null){\r\n            this.addRecord(name, this.rootDomElement, events, fn);\r\n        }\r\n    }\r\n\r\n    getRecordByName(name){\r\n        return this[protectedRecordsEventSave].get(name);\r\n    }\r\n\r\n    addListRecords(arrInfo){\r\n        arrInfo.forEach((recordInfo) => {\r\n            recordInfo[Symbol.iterator] = function* () {\r\n                yield this.name;\r\n                yield this.domElement;\r\n                yield this.events;\r\n                yield this.fn;\r\n                yield this.protectedStatus;\r\n            };\r\n            this.addRecord(...recordInfo);\r\n        });\r\n    }\r\n\r\n    removeRecord(name, removeProtected = false){\r\n        let record = this.getRecordByName(name);\r\n        if (removeProtected === true || record.protectedStatus === false){\r\n            record.domElement.removeEventListener(record.events, record.fn);\r\n            this[protectedRecordsEventSave].delete(name);\r\n        } else {\r\n            throw new PropertyError(name);\r\n        }\r\n    }\r\n\r\n    removeAllRecords(){\r\n        this[protectedRecordsEventSave].forEach((record, name) => {\r\n            this.removeRecord(name, true);\r\n        });\r\n    }\r\n}\r\n\r\nexport default EventSave;","import InputWithSearchWindow from './InputWithSearchWindow';\r\nimport InputWithSearchForWindow from './InputWithSearchForWindow';\r\nimport funcs from '../functions/functions';\r\nimport EventSave from './EventSave';\r\nimport weakMapIWS from '../functions/weakMapIWS';\r\nimport ContainerData from './ContainerData';\r\nimport {readOnly} from '../functions/decorators';\r\n\r\nclass InputWithSearch{\r\n\r\n    constructor(domElement, settings = {}){\r\n\r\n        this._domElement = domElement;\r\n        this._delegateElement = false;\r\n        this.settings = InputWithSearch.settings;\r\n        this.updateSettings(settings);\r\n        this.createCustomContainer();\r\n\r\n        this.fireEventAndCallback('inputWithSearch_beforeInit');\r\n\r\n        this.waitData = false;\r\n        this.xhr = false;\r\n        this.promiseXhr = false;\r\n\r\n        this.savesData = new ContainerData(this.id, {\r\n            active: (key) => {\r\n                this.fireEventAndCallback('inputWithSearch_changeActive', {key});\r\n            },\r\n            hover: (key) => {\r\n                this.fireEventAndCallback('inputWithSearch_changeHover', {key});\r\n            }\r\n        });\r\n        this.savesData.addData([], this.getValueFromInput());\r\n\r\n        this.changeStatus([0]);\r\n        this.getWorkDomElement().classList.add(...this.getClassesByKey('input'));\r\n\r\n        this.addEventListeners();\r\n\r\n        this.wasFirstLoad = false;\r\n\r\n        InputWithSearch.addAttrToDomInput(this.getWorkDomElement());\r\n\r\n        this._toggleInitClass();\r\n        this.fireEventAndCallback('inputWithSearch_afterInit');\r\n    }\r\n\r\n    _toggleInitClass(){\r\n        this._domElement.classList.toggle(\r\n            InputWithSearch.getBaseClassesByKey('initialize')[0]\r\n        );\r\n    }\r\n\r\n    getWorkDomElement(useInitDomImportant = false){\r\n        return useInitDomImportant || !checkDomElement(this._delegateElement)\r\n            ? this._domElement\r\n            : this._delegateElement;\r\n    }\r\n\r\n    @readOnly\r\n    id = 'IWS-' + InputWithSearch._counter();\r\n\r\n    static _counter(){\r\n        if (typeof this.counter === 'undefined'){\r\n            this.counter = -1;\r\n        }\r\n        this.counter += 1;\r\n        return this.counter;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @return {EventSave}\r\n     */\r\n    getListeners(){\r\n        return this.listeners;\r\n    }\r\n\r\n    addEventListeners(){\r\n\r\n        let listeners = this.getListeners();\r\n        let domElement = this.getWorkDomElement();\r\n\r\n        if (typeof listeners !== 'undefined' && listeners instanceof EventSave){\r\n            listeners.removeAllRecords();\r\n        }\r\n\r\n        listeners = new EventSave(this.getWorkDomElement(true));\r\n\r\n        let onEvents = this.settings.onEvents;\r\n\r\n        switch (onEvents){\r\n            case 'input':\r\n                listeners.addListRecords([\r\n                    {\r\n                        name: 'onEvents',\r\n                        domElement: domElement,\r\n                        events: this.settings.onEvents,\r\n                        fn: () => {\r\n                            this.open();\r\n                        },\r\n                        protectedStatus: true\r\n                    }\r\n                ]);\r\n                break;\r\n            case 'click':\r\n                listeners.addListRecords([\r\n                    {\r\n                        name: 'onEvents',\r\n                        domElement: domElement,\r\n                        events: this.settings.onEvents,\r\n                        fn: () => {\r\n                            if (this.checkStatus(0)){\r\n                                this.open();\r\n                            } else {\r\n                                this.close();\r\n                            }\r\n                        },\r\n                        protectedStatus: true\r\n                    }\r\n                ]);\r\n                break;\r\n            case 'hover': {\r\n\r\n                let timerHover = null;\r\n\r\n                const timerHoverFn = () => {\r\n                    clearTimeout(timerHover);\r\n                    timerHover = setTimeout(() => {\r\n                        this.close();\r\n                    }, 50);\r\n                };\r\n\r\n                listeners.addListRecords([\r\n                    {\r\n                        name: 'openWrapperHover',\r\n                        domElement: domElement,\r\n                        events: 'inputWithSearch_afterOpen',\r\n                        fn: () => {\r\n                            clearTimeout(timerHover);\r\n                            let wrapper = this.inputWithSearchWindow.getElementByKey('wrapper');\r\n                            let listenersWrapper = this.inputWithSearchWindow.listeners;\r\n                            listenersWrapper.addRecord(\r\n                                'mouseLeaveWrapperHover',\r\n                                wrapper,\r\n                                'mouseleave',\r\n                                timerHoverFn,\r\n                                true\r\n                            );\r\n                            listenersWrapper.addRecord(\r\n                                'mouseEnterWrapperHover',\r\n                                wrapper,\r\n                                'mouseenter',\r\n                                () => {\r\n                                    clearTimeout(timerHover);\r\n                                },\r\n                                true\r\n                            );\r\n                        },\r\n                        protectedStatus: true\r\n                    },\r\n                    {\r\n                        name: 'onEvents',\r\n                        domElement: domElement,\r\n                        events: 'mouseenter',\r\n                        fn: () => {\r\n                            if (this.checkStatus(0)){\r\n                                this.open();\r\n                            }\r\n                            if (this.checkStatus(1)){\r\n                                clearTimeout(timerHover);\r\n                            }\r\n                        },\r\n                        protectedStatus: true\r\n                    }, {\r\n                        name: 'mouseLeaveElement',\r\n                        domElement: domElement,\r\n                        events: 'mouseleave',\r\n                        fn: timerHoverFn,\r\n                        protectedStatus: true\r\n                    }\r\n                ]);\r\n                break;\r\n            }\r\n            default:\r\n                console.warn('Параметр onEvents заполнен неверно!');\r\n        }\r\n\r\n        this.listeners = listeners;\r\n    }\r\n\r\n    removeEventListeners(){\r\n        this.listeners.removeAllRecords();\r\n    }\r\n\r\n    static addAttrToDomInput(input){\r\n        input.autocomplete = 'off';\r\n    }\r\n\r\n    getValueFromInput(){\r\n        let HTMLElement = this.getWorkDomElement();\r\n        if (typeof this.settings.fns.fnGetValueFromInput === 'function'){\r\n            return this.settings.fns.fnGetValueFromInput.call(null, HTMLElement);\r\n        }\r\n        if (checkDomOnInput(HTMLElement)){\r\n            return HTMLElement.value;\r\n        }\r\n        return HTMLElement.textContent;\r\n    }\r\n\r\n    setValueToInput(value){\r\n        let HTMLElement = this.getWorkDomElement();\r\n        if (typeof this.settings.fns.fnSetValueToInput === 'function'){\r\n            this.settings.fns.fnSetValueToInput.call(null, HTMLElement, value);\r\n            return;\r\n        }\r\n        if (checkDomOnInput(HTMLElement)){\r\n            HTMLElement.value = value;\r\n            return;\r\n        }\r\n        HTMLElement.textContent = value;\r\n    }\r\n\r\n    updateSettings(newSettings){\r\n\r\n        let classes = false;\r\n\r\n        if ('classes' in newSettings && typeof newSettings['classes'] === 'object'){\r\n            classes = funcs.mergeListArraysWithoutDuplicates(this.settings.classes, newSettings['classes']);\r\n        }\r\n\r\n        this.settings = funcs.extend(true, {}, this.settings, newSettings);\r\n        /* Update classes */\r\n        if (classes){\r\n            this.settings.classes = classes;\r\n        }\r\n        /* end update classes */\r\n\r\n        this._updateDelegateElement(newSettings.delegateElement);\r\n    }\r\n\r\n    /* section delegate elements */\r\n\r\n    _updateDelegateElement(newDelegateElement) {\r\n        let returnValue = false;\r\n        if (typeof newDelegateElement !== 'undefined') {\r\n            let newElement = newDelegateElement;\r\n            let constructed = false;\r\n            if (typeof newDelegateElement === 'function') {\r\n                newElement = newDelegateElement(this.getWorkDomElement(true), this.id);\r\n                constructed = true;\r\n            }\r\n            if (newDelegateElement === true) {\r\n                newElement = constructDelegateElement(this.getWorkDomElement(true));\r\n                constructed = true;\r\n            }\r\n            this._removeDelegateElement();\r\n            if (newElement instanceof HTMLElement) {\r\n                this._addDelegateElement(newElement, constructed);\r\n                returnValue = newElement;\r\n            }\r\n        }\r\n        this._delegateElement = returnValue;\r\n    }\r\n\r\n    /**\r\n     * Configure domElement\r\n     * @param {HTMLElement} domElement\r\n     * @param {boolean} constructed\r\n     * @private\r\n     */\r\n    _addDelegateElement(domElement, constructed) {\r\n        if (constructed) {\r\n            domElement.setAttribute('data-iws-generated', this.id);\r\n        } else {\r\n            domElement.setAttribute('data-iws-used', this.id);\r\n        }\r\n        domElement.setAttribute('data-iws-delegate', this.id);\r\n    }\r\n\r\n    _removeDelegateElement() {\r\n        let delegateElement = this._delegateElement;\r\n        if (delegateElement !== false) {\r\n            if (delegateElement.getAttribute('data-iws-generated')) {\r\n                delegateElement.parentElement.removeChild(delegateElement);\r\n            } else {\r\n                delegateElement.removeAttribute('data-iws-used');\r\n                delegateElement.removeAttribute('data-iws-delegate');\r\n            }\r\n        }\r\n        this._delegateElement = false;\r\n    }\r\n\r\n    /* end section delegate elements */\r\n\r\n    changeStatus(addStatuses = [], removeStatuses = []){\r\n        if (typeof this.status === 'undefined'){\r\n            this.status = new window.Set();\r\n        }\r\n        addStatuses.forEach((status) => {\r\n            if (status in InputWithSearch.statuses){\r\n                this.status.add(status);\r\n            }\r\n        });\r\n        removeStatuses.forEach((status) => {\r\n            if (status in InputWithSearch.statuses){\r\n                this.status.delete(status);\r\n            }\r\n        });\r\n    }\r\n\r\n    checkStatus(idStatus){\r\n        return this.status.has(idStatus);\r\n    }\r\n\r\n    fnOnEventFire(value = false){\r\n\r\n        this.changeStatus([], [2, 3]);\r\n\r\n        let HTMLElement = this.getWorkDomElement();\r\n        let domElementIsInput = checkDomOnInput(HTMLElement);\r\n\r\n        if (value === false){\r\n            value = HTMLElement.value;\r\n        }\r\n\r\n        if (domElementIsInput === false || value.length >= this.settings.lengthStringToOutput){\r\n\r\n            let savesData = this.savesData;\r\n\r\n            if (savesData.checkCustomData()){\r\n                this.constructList();\r\n            } else {\r\n                let needLoad = true;\r\n\r\n                if (this.settings.useCache && this.settings.loadOnlyStart){\r\n                    needLoad = !this.wasFirstLoad;\r\n                } else {\r\n\r\n                    let validCache = savesData.validateSaveDataForRequest(\r\n                        value,\r\n                        this.settings.timeLiveSaveData\r\n                    );\r\n\r\n                    needLoad = !this.settings.useCache || !validCache;\r\n                }\r\n\r\n                if (needLoad){\r\n                    this.loadData();\r\n                } else {\r\n                    this.constructList();\r\n                }\r\n            }\r\n        } else {\r\n            this.stopLoadData();\r\n            this.setToMessage('lessSymbols', [this.settings.lengthStringToOutput]);\r\n        }\r\n    }\r\n\r\n    stopLoadData(removeStatus = true){\r\n        clearTimeout(this.waitData);\r\n        if (removeStatus){\r\n            this.changeStatus([], [2]);\r\n        }\r\n        if (typeof this.xhr === 'object'){\r\n            this.xhr.abort();\r\n        }\r\n    }\r\n\r\n    constructList(){\r\n\r\n        this._allFilterAndSortProcess();\r\n\r\n        let data = this.savesData.getData(false);\r\n\r\n        if (data.length){\r\n\r\n            this.fireEventAndCallback('inputWithSearch_beforeListAddDom');\r\n            this.inputWithSearchWindow.addListElements(data, this.getValueFromInput(), this.settings.repositionActiveToTop);\r\n            this.fireEventAndCallback('inputWithSearch_afterListAddDom');\r\n\r\n            return;\r\n        }\r\n\r\n        this.setToMessage('notFind');\r\n    }\r\n\r\n    _allFilterAndSortProcess(){\r\n\r\n        const sliceData = (arr, maxLength) => {\r\n            return arr.length > maxLength\r\n                ? arr.slice(0, maxLength)\r\n                : arr;\r\n        };\r\n\r\n        let savesData = this.savesData;\r\n        let data = savesData.getData();\r\n        let value = this.getValueFromInput();\r\n\r\n        if (this.settings.maxViewElements < data.length){\r\n            data = sliceData(data, this.settings.maxViewElements);\r\n        }\r\n\r\n        if (typeof this.settings.fns.filterData === 'function'){\r\n            data = data.filter((elemData) => {\r\n                return this.settings.fns.filterData(elemData, value);\r\n            });\r\n        }\r\n\r\n        if (this.settings.repositionActiveToTop === true){\r\n            data = ContainerData.repositionActiveToTop(data);\r\n        }\r\n\r\n        savesData.saveActionData(data);\r\n\r\n        this.fireEventAndCallback('inputWithSearch_onUpdateDataView');\r\n    }\r\n\r\n    onLoadData(data, value){\r\n\r\n        const dataSort = JSON.parse(data);\r\n\r\n        this.savesData.addData(dataSort, value);\r\n        this.constructList();\r\n        if (this.wasFirstLoad === false){\r\n            this.wasFirstLoad = true;\r\n        }\r\n    }\r\n\r\n    loadData(){\r\n        this.stopLoadData(false);\r\n        this.waitData = setTimeout(async () => {\r\n            this.setToWait();\r\n            try{\r\n                this.promiseXhr = this.request(this.settings.ajaxConfig.url);\r\n                const value = this.getValueFromInput();\r\n                const data = await this.promiseXhr;\r\n                this.onLoadData(data, value);\r\n            } catch (e){\r\n                if (e === 0){\r\n                    this.setToError(new Error('Данные не были получены!'));\r\n                } else {\r\n                    throw e;\r\n                }\r\n            } finally {\r\n                this.changeStatus([], [2]);\r\n            }\r\n        }, this.settings.delayBeforeSendRequest);\r\n    }\r\n\r\n    request(url) {\r\n        return new window.Promise((resolve, reject) => {\r\n            const xhr = this.xhr = new window.XMLHttpRequest();\r\n            xhr.onload = function() {\r\n                resolve(xhr.response);\r\n            };\r\n            xhr.timeout = this.settings.ajaxConfig.timeout;\r\n            xhr.onerror = function () {\r\n                reject(xhr.status);\r\n            };\r\n\r\n            xhr.open(this.settings.ajaxConfig.type, url + this.generateGetParams(), true);\r\n\r\n            xhr.send(InputWithSearch.prepareAjaxSendData(this.settings.ajaxConfig.data));\r\n        });\r\n    }\r\n\r\n    generateGetParams(){\r\n        const fn = this.settings.fns.generateGetParams;\r\n        return typeof fn === 'function' ? '?' + fn(this) : '';\r\n    }\r\n\r\n    static prepareAjaxSendData(data){\r\n\r\n        let sendData = data;\r\n\r\n        if (typeof sendData === 'function'){\r\n            sendData = sendData();\r\n        }\r\n\r\n        if (sendData !== null){\r\n            sendData = typeof sendData === 'string' ? sendData : Object.keys(sendData).map(\r\n                function(k){ return encodeURIComponent(k) + '=' + encodeURIComponent(sendData[k]); }\r\n            ).join('&');\r\n        }\r\n\r\n        return sendData;\r\n    }\r\n\r\n    getClassesByKey(key, join = false){\r\n        let classes = this.settings.classes[key];\r\n        return join ? classes.join(' ') : classes;\r\n    }\r\n\r\n    static get statuses(){\r\n        return {\r\n            0: 'close',\r\n            1: 'open',\r\n            2: 'waiting data',\r\n            3: 'error'\r\n        };\r\n    }\r\n\r\n    open(){\r\n\r\n        let checkWindow = window.inputWithSearchWindow instanceof InputWithSearchWindow,\r\n            checkOpen = this.checkStatus(1);\r\n\r\n        if (!checkOpen){\r\n            let HTMLElement = this.getWorkDomElement();\r\n            this.fireEventAndCallback('inputWithSearch_beforeOpen');\r\n            if (checkWindow){\r\n                window.inputWithSearchWindow.destructor();\r\n            }\r\n            window.inputWithSearchWindow =\r\n                this.inputWithSearchWindow =\r\n                    new InputWithSearchWindow(\r\n                        this.getWorkDomElement(true),\r\n                        this.configForInitSearchWindow\r\n                    );\r\n            InputWithSearch.setInputActive(HTMLElement, true);\r\n            this.changeStatus([1], [0]);\r\n        }\r\n        this.fnOnEventFire();\r\n        this.fireEventAndCallback('inputWithSearch_afterOpen');\r\n    }\r\n\r\n    get configForInitSearchWindow(){\r\n\r\n        const getClassesFromSettings = (classes) => {\r\n            const classesWindow = InputWithSearchWindow.classesBase;\r\n            return Object.keys(classes).reduce((acc, nameElement) => {\r\n                if (nameElement in classesWindow){\r\n                    acc[nameElement] = classes[nameElement];\r\n                }\r\n                return acc;\r\n            }, {});\r\n        };\r\n\r\n        const getNeedConstructors = (constructors) => {\r\n            return Object.entries(constructors).reduce((object, data) => {\r\n                let [key, value] = data;\r\n                if (typeof value === 'function'){\r\n                    object[key] = value;\r\n                }\r\n                return object;\r\n            }, {});\r\n        };\r\n\r\n        return {\r\n            callbacks: {\r\n                inputWithSearchWindow_destruction: () => {\r\n                    this.close(true, false);\r\n                },\r\n                inputWithSearchWindow_clickOnElementList: (objectWindow, domElement) => {\r\n                    const key = domElement.getAttribute('data-key');\r\n                    let configForEvent = this._setActiveByKeyFromList(key);\r\n                    this.fireEventAndCallback('inputWithSearch_onClickOption', configForEvent);\r\n                    this.close();\r\n                },\r\n                inputWithSearchWindow_changeContent: (...args) => {\r\n                    this.fireEventAndCallback('inputWithSearch_onChangeWindow', args);\r\n                }\r\n            },\r\n            classes: getClassesFromSettings(this.settings.classes),\r\n            constructors: getNeedConstructors(this.settings.constructors),\r\n            cssParams: this.settings.cssParamsWindow,\r\n            cssCallbacks: this.settings.cssCallbacksWindow,\r\n            triangle: this.settings.triangle,\r\n            baseEventsActive: this.settings.baseWindowEventsActive,\r\n            closeBtn: this.settings.closeBtn\r\n        };\r\n    }\r\n\r\n    _setActiveByKeyFromList(key){\r\n\r\n        const data = this.getDataFromLastDataByKey(key);\r\n        const inputValue = this.getValueFromInput();\r\n\r\n        this.setValueToInput(\r\n            this.settings.fns.dataToInputByClick(\r\n                data\r\n            )\r\n        );\r\n\r\n        return {\r\n            data,\r\n            currentValue: this.getValueFromInput(),\r\n            lastValue: inputValue\r\n        };\r\n    }\r\n\r\n    getDataFromLastDataByKey(key){\r\n        return this.savesData.getData(false, 'keyId')[key];\r\n    }\r\n\r\n    close(runEvents = true, runDestructor = true){\r\n        if (this.checkStatus(1)){\r\n            if (runEvents) this.fireEventAndCallback('inputWithSearch_beforeClose');\r\n            this.changeStatus([0], [1]);\r\n            try {\r\n                if (runDestructor) window.inputWithSearchWindow.destructor();\r\n            } finally {\r\n                window.inputWithSearchWindow = null;\r\n            }\r\n            InputWithSearch.setInputActive(this.getWorkDomElement(), false);\r\n            if (runEvents) this.fireEventAndCallback('inputWithSearch_afterClose');\r\n        }\r\n    }\r\n\r\n    setToError(error){\r\n        this.changeStatus([3]);\r\n        this.fireEventAndCallback('inputWithSearch_onError', [error]);\r\n        this.inputWithSearchWindow.setToError(error.message, error);\r\n    }\r\n\r\n    fireEventAndCallback(name, data = {}){\r\n        if (name in InputWithSearch.getListCallbacksAndEvents()){\r\n\r\n            let caller = this.getWorkDomElement(true);\r\n            let inputWithSearch = {\r\n                object: this,\r\n                ...data\r\n            };\r\n\r\n            inputWithSearch[Symbol.iterator] = function* () {\r\n                yield this.object;\r\n                for (let key in this){\r\n                    if (this.hasOwnProperty(key)){\r\n                        if (key !== 'object'){\r\n                            yield this[key];\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n\r\n            let dataToOutput = {\r\n                inputWithSearch\r\n            };\r\n\r\n            funcs.callEvent(caller, name, dataToOutput);\r\n\r\n            let func = this.settings.callbacks[name];\r\n\r\n            if (typeof func === 'function'){\r\n                func(...inputWithSearch);\r\n            }\r\n        }\r\n    }\r\n\r\n    /* sets to */\r\n\r\n    setToWait(){\r\n        if (!this.checkStatus(2)){\r\n            this.changeStatus([2]);\r\n            this.inputWithSearchWindow.setToWait();\r\n        }\r\n    }\r\n\r\n    setToMessage(typeMessage, params = []){\r\n        let toOutput = [this.getValueFromInput(), ...params];\r\n        this.inputWithSearchWindow.setToMessage(typeMessage, toOutput);\r\n    }\r\n\r\n    /* end sets to */\r\n\r\n    destructor(){\r\n        this.fireEventAndCallback('inputWithSearch_beforeDestruction');\r\n        let HTMLElement = this.getWorkDomElement();\r\n        this.close();\r\n        this.removeEventListeners();\r\n        InputWithSearch.setInputActive(HTMLElement, false);\r\n        HTMLElement.classList.remove(...this.getClassesByKey('input'));\r\n        this._toggleInitClass();\r\n        weakMapIWS.getDataWeakMapIWS(InputWithSearchForWindow.getInstance()).list.removeElement(HTMLElement);\r\n        this._removeDelegateElement();\r\n    }\r\n\r\n    static setInputActive(input, flag){\r\n        if (flag){\r\n            input.classList.add('InputWithSearch_active');\r\n            return;\r\n        }\r\n        input.classList.remove('InputWithSearch_active');\r\n    }\r\n\r\n    static get baseClasses(){\r\n        return {\r\n            initialize: ['InputWithSearchRoot'],\r\n            input: ['InputWithSearch'],\r\n            bodyOpen: ['InputWithSearchOpen']\r\n        };\r\n    }\r\n\r\n    static getBaseClassesByKey(key){\r\n        return this.baseClasses[key];\r\n    }\r\n\r\n    static get htmlElementsClasses(){\r\n\r\n        const objectNotChangeable = {\r\n            configurable: true,\r\n            writable: false\r\n        };\r\n\r\n        const notChangeableKeys = ['input', 'bodyOpen', 'initialize'];\r\n\r\n        const generateObjectForChange = (keys, object) => {\r\n            return keys.reduce((acc, current) => {\r\n                acc[current] = object;\r\n                return acc;\r\n            }, {});\r\n        };\r\n\r\n        let voidClassWindowClasses = Object.keys(InputWithSearchWindow.classesBase).reduce((acc, current) => {\r\n            acc[current] = [];\r\n            return acc;\r\n        }, {});\r\n\r\n        let object = funcs.extend(\r\n            this.baseClasses,\r\n            voidClassWindowClasses\r\n        );\r\n\r\n        Object.defineProperties(object, generateObjectForChange(notChangeableKeys, objectNotChangeable));\r\n\r\n        return object;\r\n    }\r\n\r\n    /* for not downloaded data */\r\n\r\n    setCustomData(data){\r\n        this.savesData.addData(data, this.getValueFromInput(), true);\r\n    }\r\n\r\n    /* end for not downloaded data */\r\n\r\n    /* custom container */\r\n\r\n    createCustomContainer(){\r\n        this.customContainer = new Map();\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @return {Map}\r\n     */\r\n    getCustomContainer(){\r\n        return this.customContainer;\r\n    }\r\n\r\n    /* end custom container */\r\n\r\n    static getListCallbacksAndEvents(){\r\n        return {\r\n            'inputWithSearch_beforeInit': false,\r\n            'inputWithSearch_afterInit': false,\r\n            'inputWithSearch_beforeDestruction': false,\r\n            'inputWithSearch_onClickOption': false,\r\n            'inputWithSearch_beforeListAddDom': false,\r\n            'inputWithSearch_afterListAddDom': false,\r\n            'inputWithSearch_beforeOpen': false,\r\n            'inputWithSearch_afterOpen': false,\r\n            'inputWithSearch_beforeClose': false,\r\n            'inputWithSearch_afterClose': false,\r\n            'inputWithSearch_onError': false,\r\n            'inputWithSearch_onChangeWindow': false,\r\n            'inputWithSearch_onUpdateDataView': false,\r\n            'inputWithSearch_changeActive': false,\r\n            'inputWithSearch_changeHover': false\r\n        };\r\n    }\r\n\r\n    static getInHtmlElementAllElementsByClass(domElement){\r\n        return domElement.querySelectorAll(`.${this.getBaseClassesByKey('initialize')[0]}`);\r\n    }\r\n\r\n    static get settings(){\r\n        return {\r\n            onEvents: 'input',\r\n            delayBeforeSendRequest: 300,\r\n            ajaxConfig: {\r\n                url: 'http://headers.jsontest.com/',\r\n                type: 'GET',\r\n                timeout: 10000,\r\n                data: null\r\n            },\r\n            callbacks: this.getListCallbacksAndEvents(),\r\n            constructors: {\r\n                element: false,\r\n                error: false,\r\n                lessSymbols: false,\r\n                notFind: false\r\n            },\r\n            fns: {\r\n                /**\r\n                 *\r\n                 * @param data\r\n                 * @return String\r\n                 */\r\n                dataToInputByClick: (data) => {\r\n                    return data.data;\r\n                },\r\n                fnSetValueToInput: false,\r\n                fnGetValueFromInput: false,\r\n                filterData: false,\r\n                generateGetParams: false\r\n            },\r\n            useCache: false,\r\n            loadOnlyStart: false,\r\n            maxViewElements: 50,\r\n            lengthStringToOutput: 4,\r\n            timeLiveSaveData: 60*60*1000,\r\n            classes: this.htmlElementsClasses,\r\n            data: false,\r\n            cssParamsWindow: InputWithSearchWindow.defaultCssParams,\r\n            cssCallbacksWindow: InputWithSearchWindow.cssCallbacks,\r\n            triangle: false,\r\n            closeBtn: false,\r\n            baseWindowEventsActive: {},\r\n            delegateElement: false,\r\n            repositionActiveToTop: true\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Set active data by first element function fire\r\n     * @param {function(object):boolean} cb\r\n     * @param {boolean} withRunEvent\r\n     */\r\n    setActive(cb, withRunEvent = true){\r\n        let changeKey = 'null';\r\n        let savesData = this.savesData;\r\n        savesData.getData(false).some(data => {\r\n            let result = cb(data.data);\r\n            if (result){\r\n                changeKey = data.key;\r\n            }\r\n            return result;\r\n        });\r\n        if (changeKey !== 'null'){\r\n            if (withRunEvent === false){\r\n                savesData.setInactivityCallback('active');\r\n            }\r\n            savesData.activeKey = changeKey;\r\n            this._setActiveByKeyFromList(changeKey);\r\n            if (this.checkStatus(1)){\r\n                this.inputWithSearchWindow.setElemListActiveByKey(changeKey, true);\r\n                this.inputWithSearchWindow.setElemListHoverByKey(changeKey, false);\r\n            }\r\n            if (withRunEvent === false){\r\n                savesData.setActivityCallback('active');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param key\r\n     * @param full\r\n     * @return {Object}\r\n     */\r\n    getDataByKey(key, full = false){\r\n        return this.savesData.getDataByKey(key, full);\r\n    }\r\n\r\n    getActiveKey(){\r\n        return this.savesData.activeKey;\r\n    }\r\n}\r\n\r\nconst checkDomElement = element => element instanceof HTMLElement;\r\n\r\nconst checkDomOnInput = (domElement) => {\r\n    return domElement.tagName === 'INPUT';\r\n} ;\r\n\r\nconst constructDelegateElement = toAppend => {\r\n    let delegateElement = document.createElement('div');\r\n    return funcs.insertAfter(delegateElement, toAppend);\r\n};\r\n\r\nexport default InputWithSearch;","import ListInputWithSearch from './ListInputWithSearch';\r\nimport InputWithSearch from './InputWithSearch';\r\nimport PropertyError from './Errors/PropertyError';\r\nimport funcs from '../functions/functions';\r\nimport weakMapIWS from '../functions/weakMapIWS';\r\n\r\nclass InputWithSearchForWindow{\r\n\r\n    constructor() {\r\n\r\n        if (InputWithSearchForWindow.hasOwnProperty('singleton'))\r\n            return InputWithSearchForWindow.singleton;\r\n\r\n        Object.defineProperty(InputWithSearchForWindow, 'singleton', {\r\n            value: this,\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: false\r\n        });\r\n\r\n        /**\r\n         *\r\n         * @type {protectedFieldsIWS}\r\n         */\r\n        let protectedFields = {\r\n            list: new ListInputWithSearch(),\r\n            themes: new Map()\r\n        };\r\n\r\n        weakMapIWS.setDataWeakMapIWS(this, protectedFields);\r\n\r\n        let mutationObserver = new MutationObserver(mutations => {\r\n            mutations.forEach(mutation => {\r\n                Array.prototype.slice.call(mutation.removedNodes, 0).filter(element => {\r\n                    if (this.checkInit(element)){\r\n                        this.get(element).destructor();\r\n                    } else {\r\n                        if (element instanceof HTMLElement){\r\n                            Array.prototype.slice.call(\r\n                                InputWithSearch.getInHtmlElementAllElementsByClass(element),\r\n                                0\r\n                            ).forEach(elementWasInit => {\r\n                                this.get(elementWasInit).destructor();\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        });\r\n\r\n        mutationObserver.observe(document.documentElement, {\r\n            childList: true,\r\n            subtree: true,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get example class InputWithsSearch from store\r\n     * @param {HTMLElement|string} domElement\r\n     * @param {object} objectConfig\r\n     * @param {string|string[]} themes\r\n     * @returns {InputWithSearch}\r\n     */\r\n    getElement(domElement, objectConfig = {}, themes = ''){\r\n        let element = this._getElementFromPage(domElement);\r\n\r\n        if (element !== false){\r\n            if (!this.checkInit(element)){\r\n                this.init(element, objectConfig, themes);\r\n            }\r\n            return this.get(element);\r\n        }\r\n\r\n        throw new Error(`Нет валидного DOM-элемента для выдачи ${domElement}`);\r\n    }\r\n\r\n    /**\r\n     * InitFunction\r\n     * @param {HTMLElement} element\r\n     * @param {object} objectConfig\r\n     * @param {string|string[]} themes\r\n     * @returns {InputWithSearch}\r\n     */\r\n    init(element, objectConfig = {}, themes = ''){\r\n\r\n        const getListAvailableThemeConfig = () => {\r\n\r\n            let retObject = {};\r\n\r\n            if (themes !== ''){\r\n                if (!Array.isArray(themes)){\r\n                    themes = [themes];\r\n                }\r\n                let themesList = weakMapIWS.getDataWeakMapIWS(this).themes;\r\n\r\n                themes.reduce((acc, themeName) => {\r\n                    if (themesList.has(themeName)){\r\n                        acc[themeName] = themesList.get(themeName);\r\n                    }\r\n                    return acc;\r\n                }, retObject);\r\n            }\r\n            return retObject;\r\n        };\r\n\r\n        let list = weakMapIWS.getDataWeakMapIWS(this).list;\r\n        let availableThemeConfigs = Object.values(getListAvailableThemeConfig());\r\n        for (let objectTheme of availableThemeConfigs){\r\n            let fn = objectTheme.fnRunBeforeStart;\r\n            if (typeof fn === 'function'){\r\n                fn.call(null, element);\r\n            }\r\n        }\r\n        for (let objectTheme of availableThemeConfigs){\r\n            let objectData = objectTheme.objectData;\r\n            if (Object.keys(objectData).length){\r\n                let classes = funcs.sliceObjectArrays(objectData.classes, objectConfig.classes);\r\n                objectConfig = funcs.extend(true, {}, objectData, objectConfig);\r\n                objectConfig.classes = classes;\r\n            }\r\n        }\r\n        let exemplar = new InputWithSearch(element, objectConfig);\r\n        list.addElement(element, exemplar);\r\n        for (let objectTheme of availableThemeConfigs){\r\n            let fn = objectTheme.fnRunOnStart;\r\n            if (typeof fn === 'function'){\r\n                fn.call(null, exemplar);\r\n            }\r\n        }\r\n\r\n        return list.getElement(element);\r\n    }\r\n\r\n    /**\r\n     * Get element from page by string or return HTMLElement\r\n     * @param {HTMLElement|string} domElement\r\n     * @return {boolean|HTMLElement}\r\n     * @private\r\n     */\r\n    _getElementFromPage(domElement){\r\n        const checkIdFn = (someData) => {\r\n            if (typeof someData === 'string'){\r\n                return checkHTMLfn(document.getElementById(someData));\r\n            }\r\n            return false;\r\n        };\r\n\r\n        const checkHTMLfn = (someData) => {\r\n            return someData instanceof HTMLElement;\r\n        };\r\n\r\n        const getElemById = (stringId) => {\r\n            return checkIdFn(stringId) ? document.getElementById(stringId) : false;\r\n        };\r\n\r\n        let element = checkHTMLfn(domElement)\r\n            ? domElement\r\n            : getElemById(domElement);\r\n\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Get element\r\n     * @param {HTMLElement|string} domElement\r\n     * @return {InputWithSearch|undefined}\r\n     */\r\n    get(domElement){\r\n        return weakMapIWS.getDataWeakMapIWS(this).list.getElement(this._getElementFromPage(domElement));\r\n    }\r\n\r\n    /**\r\n     * Check dom element init\r\n     * @param {HTMLElement} domElement\r\n     * @return {boolean}\r\n     */\r\n    checkInit(domElement){\r\n        return weakMapIWS.getDataWeakMapIWS(this).list.hasElement(domElement);\r\n    }\r\n\r\n    /**\r\n     * Add theme for use in objects\r\n     * @param {string} name\r\n     * @param {object} objectData\r\n     * @param {function(InputWithSearch)} fnRunOnStart\r\n     * @param {function(HTMLElement)} fnRunBeforeStart\r\n     */\r\n    addTheme(name, objectData, fnRunOnStart, fnRunBeforeStart){\r\n\r\n        let themes = weakMapIWS.getDataWeakMapIWS(this).themes;\r\n\r\n        if (!themes.has(name)){\r\n            themes.set(name, {\r\n                objectData,\r\n                fnRunOnStart,\r\n                fnRunBeforeStart\r\n            });\r\n        } else {\r\n            throw new PropertyError(name);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @return {InputWithSearchForWindow}\r\n     */\r\n    static getInstance(){\r\n        return this.singleton;\r\n    }\r\n\r\n}\r\n\r\nexport default InputWithSearchForWindow;","import EventSave from './EventSave';\r\nimport funcs from '../functions/functions';\r\nimport WatcherPosition from './WatcherPosition';\r\n\r\nclass InputWithSearchWindow{\r\n\r\n    constructor(dependElement, settings){\r\n\r\n        this.settings = InputWithSearchWindow.defaultSettings;\r\n        this.updateSettings(settings);\r\n\r\n        this.addToDomWindow();\r\n        this.addElementsToConfig();\r\n        this.addListeners();\r\n        this.dependElement = dependElement;\r\n        this.setBlockHoverSelected();\r\n\r\n        this.setStatus();\r\n\r\n        this.reSetPosition();\r\n        this.fireEventAndCallback('inputWithSearchWindow_afterConstruction');\r\n    }\r\n\r\n    addToDomWindow(){\r\n        document.body.appendChild(this.constructorDOM());\r\n    }\r\n\r\n    constructorDOM(){\r\n        let content = this.constructorTriangle() + `\r\n                <div class=\"${this.getClassesByKey('wrapperSub', true)}\">\r\n                    <div class=\"${this.getClassesByKey('wrapperInner', true)}\">\r\n                        <div class=\"${this.getClassesByKey('wrapperList', true)}\"></div>\r\n                        ${this.constructorCloseBtn()}\r\n                    </div>\r\n                </div>\r\n            `;\r\n        let wrapper = document.createElement('div');\r\n        wrapper.classList.add(...this.getClassesByKey('wrapper'));\r\n        wrapper.innerHTML = content;\r\n\r\n        return wrapper;\r\n    }\r\n\r\n    constructorCloseBtn(){\r\n        let closeBtn = this.settings.closeBtn;\r\n\r\n        if (closeBtn){\r\n            return `<div class=\"${this.getClassesByKey('wrapperCloseBtn', true)}\"></div>`;\r\n        }\r\n        return '';\r\n\r\n    }\r\n\r\n    constructorTriangle(){\r\n        let triangle = this.settings.triangle;\r\n\r\n        if (triangle){\r\n            return `\r\n                <div class=\"${this.getClassesByKey('wrapperTriangle', true)}\"></div>\r\n            `;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    addElementsToConfig(){\r\n        this.elements = {};\r\n        for (let nameElement of Object.keys(InputWithSearchWindow.classesBase)){\r\n            this.addElementToConfig(nameElement);\r\n        }\r\n\r\n        this.addMutationObserver();\r\n    }\r\n\r\n    /* mutation observer on change content in list */\r\n\r\n    addMutationObserver(){\r\n\r\n        let observer = new MutationObserver((mutations) => {\r\n            this.fireEventAndCallback('inputWithSearchWindow_changeContent', {mutations});\r\n        });\r\n\r\n        let config = { childList: true };\r\n\r\n        observer.observe(this.getElementByKey('wrapperList'), config);\r\n\r\n        this.observerList = observer;\r\n    }\r\n\r\n    removeMutationObserver(){\r\n        this.observerList.disconnect();\r\n    }\r\n\r\n    /* end mutation observer on change content in list */\r\n\r\n    addElementToConfig(nameElement){\r\n        const classes = InputWithSearchWindow.classesBase[nameElement][0];\r\n        this.elements[nameElement] = document.querySelector('.' + classes);\r\n    }\r\n\r\n    getElementByKey(key){\r\n        return this.elements[key];\r\n    }\r\n\r\n    addInfoToList(htmlToList, plus = false){\r\n        if (plus){\r\n            this.getElementByKey('wrapperList').innerHTML = this.getElementByKey('wrapperList').innerHTML + htmlToList;\r\n            return;\r\n        }\r\n        this.getElementByKey('wrapperList').innerHTML = htmlToList;\r\n    }\r\n\r\n    destructor(){\r\n        this.fireEventAndCallback('inputWithSearchWindow_destruction');\r\n        this.removeListeners();\r\n        this.removeMutationObserver();\r\n        this._setHoveredKey('clear');\r\n        this.destructorDOM();\r\n    }\r\n\r\n    fireEventAndCallback(name, data = {}){\r\n\r\n        if (name in InputWithSearchWindow.listCallbacksAndEvents){\r\n            let caller = this.elements.wrapper;\r\n            let dataToOutput = {\r\n                inputWithSearchWindow: {\r\n                    object: this,\r\n                    data\r\n                }\r\n            };\r\n            funcs.callEvent(caller, name, {\r\n                inputWithSearchWindow: this\r\n            });\r\n            let func = this.settings.callbacks[name];\r\n            if (typeof func === 'function'){\r\n                func(...Object.values(dataToOutput.inputWithSearchWindow));\r\n            }\r\n        }\r\n    }\r\n\r\n    destructorDOM(){\r\n        let element = this.getElementByKey('wrapper');\r\n        element.parentNode.removeChild(element);\r\n    }\r\n\r\n    addListeners(){\r\n\r\n        const setTimeoutOnBlockSelected = (timer, winSh, time = 200) => {\r\n            clearTimeout(timer);\r\n            winSh.setBlockHoverSelected(true);\r\n            return setTimeout(() => {\r\n                winSh.setBlockHoverSelected(false);\r\n            }, time);\r\n        };\r\n\r\n        this.timerWaitToBlockHoverSelected = false;\r\n\r\n        this.listeners = new EventSave();\r\n        let wrapper = this.elements.wrapper;\r\n        const elemListClass = InputWithSearchWindow.getClassesBaseByKey('elementList')[0];\r\n\r\n        let baseEventsActive = this.settings.baseEventsActive;\r\n        const eventsArr = [\r\n            {\r\n                name: 'clickElement',\r\n                domElement: wrapper,\r\n                events: 'click',\r\n                fn: (event) => funcs.delegateFn(event, elemListClass, (e, elem) => {\r\n                    this.setElemListActiveByKey( InputWithSearchWindow._getKeyAttrFromDomElement(elem) );\r\n                    this.fireEventAndCallback('inputWithSearchWindow_clickOnElementList', elem);\r\n                }),\r\n                protectedStatus: true\r\n            },\r\n            {\r\n                name: 'clickOuter',\r\n                domElement: document,\r\n                events: 'click',\r\n                fn: (event) => {\r\n                    if (event.target.closest(`.${this.getClassesByKey('wrapper')}, .InputWithSearch`)){\r\n                        return;\r\n                    }\r\n                    this.destructor();\r\n                },\r\n                protectedStatus: true\r\n            },\r\n            {\r\n                name: 'mouseEnterElement',\r\n                domElement: wrapper,\r\n                events: 'mouseover',\r\n                fn: (e) => funcs.delegateFn(e, elemListClass, (e, elem) => {\r\n                    if (!this.checkBlockHoverSelected()){\r\n                        this._setElemListHover(elem);\r\n                    }\r\n                }),\r\n                protectedStatus: true\r\n            },\r\n            {\r\n                name: 'interceptionEvents',\r\n                domElement: document,\r\n                events: 'keydown',\r\n                fn: (event) => {\r\n\r\n                    let windowSh = this;\r\n                    let relativeClass = this.getRelativeObject();\r\n\r\n\r\n                    if (relativeClass.checkStatus(1)){\r\n\r\n                        const down = event.keyCode === 40;\r\n                        const up = event.keyCode === 38;\r\n                        const enter = event.keyCode === 13;\r\n\r\n                        if ((up || down) && windowSh.checkStatus()){\r\n                            event.preventDefault();\r\n                            this.timerWaitToBlockHoverSelected = setTimeoutOnBlockSelected(\r\n                                this.timerWaitToBlockHoverSelected,\r\n                                windowSh\r\n                            );\r\n                            if ( down ){\r\n                                windowSh.setElemListHoverByDirection();\r\n                            }\r\n                            if ( up ){\r\n                                windowSh.setElemListHoverByDirection(false);\r\n                            }\r\n                        }\r\n\r\n                        if (enter){\r\n\r\n                            const hoveredKey = windowSh._getHoveredKey();\r\n\r\n                            if (hoveredKey !== 'null'){\r\n                                this.setElemListActiveByKey( hoveredKey );\r\n                                relativeClass._setActiveByKeyFromList( hoveredKey );\r\n                            }\r\n\r\n                            relativeClass.close();\r\n                        }\r\n                    }\r\n                },\r\n                protectedStatus: true\r\n            },\r\n            {\r\n                name: 'watcherPosition',\r\n                domElement: wrapper,\r\n                events: 'inputWithSearchWindow_afterConstruction',\r\n                fn: () => {\r\n                    this._addWatcherPosition();\r\n                },\r\n                protectedStatus: true\r\n            },\r\n            {\r\n                name: 'removeWatcherPosition',\r\n                domElement: wrapper,\r\n                events: 'inputWithSearchWindow_destruction',\r\n                fn: () => {\r\n                    this._removeWatcherPosition();\r\n                },\r\n                protectedStatus: true\r\n            }\r\n        ];\r\n\r\n        if (this.settings.closeBtn){\r\n            eventsArr.push({\r\n                name: 'closeBtnEvent',\r\n                domElement: this.getElementByKey('wrapperCloseBtn'),\r\n                events: 'click',\r\n                fn: () => {\r\n                    this.destructor();\r\n                },\r\n                protectedStatus: true\r\n            });\r\n        }\r\n\r\n        eventsArr.forEach((info) => {\r\n            let arrInfo = Object.values(info);\r\n            let name = arrInfo[0];\r\n            if (!(name in InputWithSearchWindow.baseEventsActive) || baseEventsActive[name] === true){\r\n                this.listeners.addRecord(...arrInfo);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @return {InputWithSearch}\r\n     */\r\n    getRelativeObject(){\r\n        return window.inputWithSearch.getElement(this.dependElement);\r\n    }\r\n\r\n    setElemListHoverByKey(key, withScroll = true){\r\n        if (this.checkStatus() && this._getList().checkKeyInActionData(key)){\r\n            const classes = this.getClassesByKey('elementList')[0];\r\n            let domElement = this.elements.wrapper.querySelector(`.${classes}[data-key=\"${key}\"]`);\r\n            if (domElement !== null){\r\n                this._setElemListHover(domElement, withScroll, key);\r\n            }\r\n        }\r\n    }\r\n\r\n    setElemListHoverByDirection(down = true){\r\n\r\n        let arrKeys = Object.keys(this.getDataForList(true));\r\n        let hoveredKey = this._getHoveredKey();\r\n        let index = arrKeys.indexOf(hoveredKey);\r\n\r\n        if (down){\r\n            if (hoveredKey === -1){\r\n                this.setElemListHoverByKey(arrKeys[0]);\r\n                return;\r\n            }\r\n            if (arrKeys[arrKeys.length - 1] === hoveredKey){\r\n                this.setElemListHoverByKey(hoveredKey);\r\n                return;\r\n            }\r\n            this.setElemListHoverByKey(arrKeys[index+1]);\r\n            return;\r\n        }\r\n        if (index === 0){\r\n            this._unHoveredElements();\r\n            this._setHoveredKey('clear');\r\n            return;\r\n        }\r\n        this.setElemListHoverByKey(arrKeys[index-1]);\r\n    }\r\n\r\n    _unHoveredElements(){\r\n        const classes = InputWithSearchWindow.getClassesBaseByKey('elementListHovered')[0];\r\n        this.elements.wrapper.querySelectorAll(`.${classes}`).forEach((element) => {\r\n            element.classList.remove(classes);\r\n        });\r\n    }\r\n\r\n    _setElemListHover(domListElement, withScroll = false, keyElement = false){\r\n\r\n        const key = typeof keyElement === 'string' ? keyElement : domListElement.getAttribute('data-key');\r\n        const classes = InputWithSearchWindow.getClassesBaseByKey('elementListHovered')[0];\r\n\r\n        if (key !== this._getHoveredKey()){\r\n\r\n            this._unHoveredElements();\r\n            this._setHoveredKey(key);\r\n\r\n            if (withScroll){\r\n                this.elements.wrapperInner.scrollTop = domListElement.offsetTop;\r\n            }\r\n        }\r\n\r\n        domListElement.classList.add(classes);\r\n    }\r\n\r\n    setElemListActiveByKey(key, updateOnlyDom = false, withScroll = true){\r\n\r\n        if (key !== 'null' && (key !== this._getActiveKey() || updateOnlyDom)){\r\n\r\n            const classes = InputWithSearchWindow.getClassesBaseByKey('elementListSelected')[0];\r\n\r\n            this._unActiveElements();\r\n            if (!updateOnlyDom){\r\n                this._setActiveKey(key);\r\n            }\r\n\r\n            let domElement = this._getDomElementByKey(key);\r\n\r\n            if (withScroll){\r\n                this.elements.wrapperInner.scrollTop = domElement.offsetTop;\r\n            }\r\n\r\n            domElement.classList.add(classes);\r\n        }\r\n    }\r\n\r\n    static _getKeyAttrFromDomElement(domElement){\r\n        return domElement.getAttribute('data-key');\r\n    }\r\n\r\n    _getDomElementByKey(key){\r\n        return this.elements.wrapper.querySelector(`[data-key=\"${key}\"]`);\r\n    }\r\n\r\n    _unActiveElements(){\r\n        const classes = InputWithSearchWindow.getClassesBaseByKey('elementListSelected')[0];\r\n        this.elements.wrapper.querySelectorAll(`.${classes}`).forEach((element) => {\r\n            element.classList.remove(classes);\r\n        });\r\n    }\r\n\r\n    setBlockHoverSelected(set = false){\r\n        this.blockHoverSelected = set;\r\n    }\r\n\r\n    checkBlockHoverSelected(){\r\n        return this.blockHoverSelected;\r\n    }\r\n\r\n    removeListeners(){\r\n        this.listeners.removeAllRecords();\r\n    }\r\n\r\n    updateSettings(newSettings){\r\n\r\n        let classes = false;\r\n\r\n        if ('classes' in newSettings){\r\n            classes = funcs.mergeListArraysWithoutDuplicates(this.settings.classes, newSettings['classes']);\r\n        }\r\n\r\n        this.settings = funcs.extend(true, {}, this.settings, newSettings);\r\n\r\n        if (classes){\r\n            this.settings.classes = classes;\r\n        }\r\n    }\r\n\r\n    getClassesByKey(key, join = false){\r\n        let classes = this.settings.classes[key];\r\n        return join ? classes.join(' ') : classes;\r\n    }\r\n\r\n    reSetPosition(){\r\n\r\n        let elem = this.getRelativeObject().getWorkDomElement();\r\n\r\n        if (isHidden(elem)) {\r\n            this.destructor();\r\n            return;\r\n        }\r\n\r\n        let cssParams = this.settings.cssParams;\r\n        let customFunctionForResizing = this.settings.cssCallbacks;\r\n        let {window: customFnResize, triangle: customFnRePositionTriangle} = customFunctionForResizing;\r\n\r\n        if (checkOnFunction(customFnResize)) {\r\n            customFnResize(elem, cssParams);\r\n        } else {\r\n            let elem_character = elem.getBoundingClientRect();\r\n            let scroll = window.pageYOffset || document.documentElement.scrollTop;\r\n            let style = this.elements.wrapper.style;\r\n            let width = elem_character.width;\r\n            let winWidth = window.innerWidth;\r\n            let [mTop, mRight, mBot, mLeft] = cssParams.margin;\r\n            let availablePlaceWidth = winWidth - mLeft - mRight;\r\n            let seekWidthTo = this.settings.cssParams.seekWidthTo;\r\n\r\n            if (seekWidthTo !== 'none') {\r\n                switch (seekWidthTo) {\r\n                    case 'max':\r\n                        width = cssParams.maxWidth;\r\n                        break;\r\n                    case 'min':\r\n                        width = cssParams.minWidth;\r\n                        break;\r\n                }\r\n            }\r\n\r\n            if (availablePlaceWidth < width) {\r\n                width = availablePlaceWidth;\r\n            }\r\n\r\n            if (width < cssParams.minWidth){\r\n                width = cssParams.minWidth;\r\n            }\r\n            if (width > cssParams.maxWidth){\r\n                width = cssParams.maxWidth;\r\n            }\r\n\r\n            let left = elem_character.left + (elem_character.width - width)/2;\r\n\r\n            if (left < mLeft){\r\n                left = mLeft;\r\n            }\r\n            if (winWidth - (left + width) < mRight){\r\n                left = winWidth - width - mRight;\r\n            }\r\n\r\n            style.top = scroll + elem_character.bottom - (scroll + document.body.getBoundingClientRect().top) + 'px';\r\n            style.left = Math.ceil(left) + 'px';\r\n            style.width = width + 'px';\r\n            style.position = 'absolute';\r\n            if (mTop > 0){\r\n                style.marginTop = mTop + 'px';\r\n            }\r\n            if (mBot > 0){\r\n                style.marginBottom = mBot + 'px';\r\n            }\r\n        }\r\n\r\n        let triangle = this.getElementByKey('wrapperTriangle');\r\n\r\n        if (triangle !== null) {\r\n\r\n            let elem_character = elem.getBoundingClientRect();\r\n            let window_character = this.elements.wrapper.getBoundingClientRect();\r\n\r\n            if (checkOnFunction(customFnRePositionTriangle)) {\r\n                customFnRePositionTriangle(triangle, elem, cssParams);\r\n            } else {\r\n                let leftTriangle = (elem_character.left - window_character.left) + elem_character.width/2\r\n                    - triangle.offsetWidth/2;\r\n                triangle.style.left = Math.ceil(leftTriangle) + 'px';\r\n            }\r\n        }\r\n    }\r\n\r\n    static get classesBase(){\r\n        return {\r\n            wrapper: ['InputWithSearchWindow'],\r\n            wrapperSub: ['InputWithSearchWindow-Sub'],\r\n            wrapperInner: ['InputWithSearchWindow-Inner'],\r\n            wrapperList: ['InputWithSearchWindow-List'],\r\n            wrapperTriangle: ['InputWithSearchWindow-Triangle'],\r\n            wrapperCloseBtn: ['InputWithSearchWindow-CloseBtn'],\r\n            elementList: ['InputWithSearchWindow-Element'],\r\n            elementListSelected: ['InputWithSearchWindow-Element_selected'],\r\n            elementListHovered: ['InputWithSearchWindow-Element_hovered'],\r\n            message: ['InputWithSearchWindow-Message'],\r\n            error: ['InputWithSearchWindow-Error']\r\n        };\r\n    }\r\n\r\n    static getClassesBaseByKey(key){\r\n        return this.classesBase[key];\r\n    }\r\n\r\n    static get listCallbacksAndEvents(){\r\n        return {\r\n            'inputWithSearchWindow_clickOnElementList': false,\r\n            'inputWithSearchWindow_destruction': false,\r\n            'inputWithSearchWindow_changeContent': false,\r\n            'inputWithSearchWindow_afterConstruction': false\r\n        };\r\n    }\r\n\r\n    static get defaultSettings(){\r\n        return {\r\n            classes: this.classesBase,\r\n            constructors: {\r\n                element: (data, value, fn) => fn(`Данные ${data} cо значением ${value}`),\r\n                error: errorText => errorText,\r\n                lessSymbols: (value, needSymbolsLength) => `Введите ${needSymbolsLength} или более символов.`,\r\n                notFind: (value) => `По запросу ${value} ничего не было найдено!.`\r\n            },\r\n            callbacks: this.listCallbacksAndEvents,\r\n            cssParams: this.defaultCssParams,\r\n            triangle: false,\r\n            closeBtn: false,\r\n            baseEventsActive: this.baseEventsActive\r\n        };\r\n    }\r\n\r\n    static get baseEventsActive(){\r\n        return {\r\n            mouseEnterElement: true,\r\n            interceptionEvents: true,\r\n            clickElement: true\r\n        };\r\n    }\r\n\r\n    static get defaultCssParams(){\r\n        return {\r\n            margin: [0, 10, 0, 10],\r\n            minWidth: 200,\r\n            maxWidth: 300,\r\n            seekWidthTo: 'none'\r\n        };\r\n    }\r\n\r\n    static get cssCallbacks() {\r\n        return {\r\n            window: 'standart',\r\n            triangle: 'standart'\r\n        };\r\n    }\r\n\r\n    setStatus(withData = false){\r\n        this.haveData = withData;\r\n    }\r\n\r\n    checkStatus(){\r\n        return this.haveData;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {ContainerData}\r\n     * @private\r\n     */\r\n    _getList(){\r\n        return this.getRelativeObject().savesData;\r\n    }\r\n\r\n    getDataForList(keys = false){\r\n        return this._getList().getData(false, keys === true ? 'keyId' : null);\r\n    }\r\n\r\n    _setHoveredKey(key){\r\n        this._getList().hoveredKey = key;\r\n    }\r\n\r\n    _getHoveredKey(){\r\n        return this._getList().hoveredKey;\r\n    }\r\n\r\n    _setActiveKey(key){\r\n        this._getList().activeKey = key;\r\n    }\r\n\r\n    _getActiveKey(){\r\n        return this._getList().activeKey;\r\n    }\r\n\r\n    addListElements(dataList, value, reposition = true){\r\n\r\n        this.addInfoToList('');\r\n        this.setStatus(true);\r\n\r\n        dataList\r\n            .forEach((dataElement, numb) => {\r\n                this.addInfoToList(\r\n                    InputWithSearchWindow.constructElement(\r\n                        dataElement,\r\n                        value,\r\n                        numb,\r\n                        this.settings.constructors['element'],\r\n                        this.getClassesByKey('elementList', true)\r\n                    ),\r\n                    true\r\n                );\r\n            });\r\n\r\n        const activeKey = this._getActiveKey();\r\n        const checkActiveKey = activeKey !== 'null';\r\n\r\n        if (reposition){\r\n            this.setElemListActiveByKey(activeKey, true, false);\r\n        } else {\r\n            if (checkActiveKey){\r\n                this.setElemListActiveByKey(activeKey, true, true);\r\n                this.setElemListHoverByKey(activeKey, true);\r\n            } else {\r\n                const hoveredKey = this._getHoveredKey();\r\n                if (hoveredKey !== 'null'){\r\n                    this.setElemListHoverByKey(hoveredKey, reposition);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setToMessage(typeMessage, params){\r\n        this.setStatus();\r\n        this.addInfoToList(\r\n            InputWithSearchWindow.constructMessage(\r\n                typeMessage,\r\n                params,\r\n                this.settings.constructors[typeMessage],\r\n                this.getClassesByKey('message')\r\n            )\r\n        );\r\n    }\r\n\r\n    setToError(...args){\r\n        this.setStatus();\r\n        this.addInfoToList(\r\n            InputWithSearchWindow.constructMessageError(\r\n                ...args,\r\n                this.getClassesByKey('error'),\r\n                this.settings.constructors['error']\r\n            )\r\n        );\r\n    }\r\n\r\n    setToWait(){\r\n        this.setStatus();\r\n        this.addInfoToList(\r\n            InputWithSearchWindow.constructWaitThrobber()\r\n        );\r\n    }\r\n\r\n    _addWatcherPosition(){\r\n        let element = this.getRelativeObject().getWorkDomElement();\r\n        this._watcher = new WatcherPosition(\r\n            element,\r\n            () => {\r\n                this.reSetPosition();\r\n            }\r\n        );\r\n    }\r\n\r\n    _removeWatcherPosition(){\r\n        this._watcher.destructor();\r\n    }\r\n\r\n    static constructElement(data, value, numb, fn, classes){\r\n        return `\r\n                <div class=\"${classes}\" data-key=\"${data.key}\" data-numb=\"${numb}\">\r\n                    ${fn(data.data, value, funcs.highlightMatchesToString)}\r\n                </div>\r\n            `;\r\n    }\r\n\r\n    static constructMessage(typeMessage, params, fn, classes){\r\n        return `\r\n                <div class=\"${classes}\">\r\n                    ${fn(...params)}\r\n                </div>\r\n            `;\r\n    }\r\n\r\n    static constructMessageError(textError, errorCode, classes, fn){\r\n        return `\r\n                <div class=\"${classes}\">\r\n                    ${fn(textError, errorCode)}\r\n                </div>\r\n            `;\r\n    }\r\n\r\n    static constructWaitThrobber(){\r\n        return `\r\n            <div class=\"InputWithSearchWindow-Load\">\r\n                <div class=\"InputWithSearchLoader\">\r\n                    <div class=\"InputWithSearchLoader-Loader\"></div>\r\n                </div>\r\n            </div>\r\n            `;\r\n    }\r\n}\r\n\r\nconst isHidden = el => el.offsetParent === null;\r\n\r\nconst checkOnFunction = el => typeof el === 'function';\r\n\r\nexport default InputWithSearchWindow;","class ListInputWithSearch{\r\n\r\n    constructor(){\r\n        this.saves = new window.WeakMap();\r\n    }\r\n\r\n    addElement(domElement, objectInfo){\r\n        this.saves.set(domElement, objectInfo);\r\n    }\r\n\r\n    hasElement(domElement){\r\n        return this.saves.has(domElement);\r\n    }\r\n\r\n    removeElement(domElement){\r\n        this.saves.delete(domElement);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param domElement\r\n     * @returns {InputWithSearch}\r\n     */\r\n    getElement(domElement){\r\n        return this.saves.get(domElement);\r\n    }\r\n}\r\n\r\nexport default ListInputWithSearch;","class WatcherPosition{\r\n    constructor(domWatch, cb, timeTik = 50){\r\n        this.domWatch = domWatch;\r\n        this.cb = cb;\r\n        this.timeTik = timeTik;\r\n        this._savePositionFromElement();\r\n        this._addInterval();\r\n    }\r\n\r\n    _savePositionFromElement(positionObject = false){\r\n        this._positionBefore = saveParams(\r\n            ...(positionObject === false ? getParamsFromDomElement(this.domWatch) : positionObject)\r\n        );\r\n    }\r\n\r\n    _getPositionBefore(){\r\n        return this._positionBefore;\r\n    }\r\n\r\n    _addInterval(){\r\n        this._interval = setInterval(() => {\r\n            this._fireFunctionOnTik();\r\n        }, this.timeTik);\r\n    }\r\n\r\n    _fireFunctionOnTik() {\r\n        let newPosition = getParamsFromDomElement(this.domWatch);\r\n        if (differentTwoObjectPosition(this._getPositionBefore(), newPosition)){\r\n            this._savePositionFromElement(newPosition);\r\n            this.cb();\r\n        }\r\n    }\r\n\r\n    destructor(){\r\n        clearInterval(this._interval);\r\n    }\r\n}\r\n\r\nconst getScrolls = () => {\r\n    let doc = document.documentElement;\r\n    let left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\r\n    let top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);\r\n\r\n    return {\r\n        left,\r\n        top\r\n    };\r\n};\r\n\r\nconst getParamsFromDomElement = domElement => {\r\n    let position = domElement.getBoundingClientRect();\r\n    let scrolls = getScrolls();\r\n    return saveParams(\r\n        position.width,\r\n        position.height,\r\n        position.left + scrolls.left,\r\n        position.top + scrolls.top\r\n    );\r\n};\r\n\r\nconst saveParams = (width, height, left, top) => ({\r\n    width,\r\n    height,\r\n    left,\r\n    top,\r\n    [Symbol.iterator]: function* (){\r\n        yield this.width;\r\n        yield this.height;\r\n        yield this.left;\r\n        yield this.top;\r\n    }\r\n});\r\n\r\nconst differentTwoObjectPosition = (obj1, obj2) => !(JSON.stringify(obj1) === JSON.stringify(obj2));\r\n\r\nexport default WatcherPosition;","const readOnly = (target, key, descriptor) => {\r\n    descriptor.writable = false;\r\n    return descriptor;\r\n};\r\n\r\nexport {readOnly};","const delegateFn = (event, findClass, fn) => {\r\n    let target = event.target,\r\n        related = event.relatedTarget,\r\n        match;\r\n\r\n    // search for a parent node matching the delegation selector\r\n    while ( target && target !== document && !( match = target.classList.contains(findClass) ) ) {\r\n        target = target.parentNode;\r\n    }\r\n\r\n    // exit if no matching node has been found\r\n    if ( !match ) { return; }\r\n\r\n    // loop through the parent of the related target to make sure that it's not a child of the target\r\n    while ( related && related !== target && related !== document ) {\r\n        related = related.parentNode;\r\n    }\r\n\r\n    // exit if this is the case\r\n    if ( related === target ) { return; }\r\n\r\n    return fn(event, target);\r\n};\r\n\r\nfunction extend() {\r\n\r\n    // Variables\r\n    let extended = {};\r\n    let deep = false;\r\n    let i = 0;\r\n    let length = arguments.length;\r\n\r\n    // Check if a deep merge\r\n    if ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {\r\n        deep = arguments[0];\r\n        i++;\r\n    }\r\n\r\n    let merge = function (obj) {\r\n        for ( let prop in obj ) {\r\n            if ( Object.prototype.hasOwnProperty.call( obj, prop ) ) {\r\n                if ( deep && Object.prototype.toString.call(obj[prop]) === '[object Object]' ) {\r\n                    extended[prop] = extend( true, extended[prop], obj[prop] );\r\n                } else {\r\n                    extended[prop] = obj[prop];\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    for ( ; i < length; i++ ) {\r\n        let obj = arguments[i];\r\n        merge(obj);\r\n    }\r\n\r\n    return extended;\r\n\r\n}\r\n\r\nfunction highlightMatchesToString(string, query){\r\n    const reg = new RegExp('('+query+')', 'gi');\r\n    return string.replace(reg, '<span class=\"InputWithSearchWindow-Coincidence\">$1</span>');\r\n}\r\n\r\nfunction hasClass(element, cls) {\r\n    return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;\r\n}\r\n\r\nconst callEvent = (element, name, data) => {\r\n\r\n    let eventConfig = {\r\n        bubbles: true\r\n    };\r\n\r\n    if (typeof data !== 'undefined'){\r\n        eventConfig.detail = data;\r\n    }\r\n\r\n    element.dispatchEvent(new CustomEvent(name, eventConfig));\r\n};\r\n\r\nconst mergeListArraysWithoutDuplicates = (oldArr, newArr) => {\r\n\r\n    return Object.entries(oldArr).reduce((acc, info) => {\r\n        let [nameElement, classesElement] = info;\r\n        if (nameElement in newArr && Array.isArray(newArr[nameElement])){\r\n            acc[nameElement] = Array.from(new Set(classesElement.concat(newArr[nameElement])));\r\n        } else {\r\n            acc[nameElement] = classesElement;\r\n        }\r\n        return acc;\r\n    }, {});\r\n};\r\n\r\nconst insertAfter = (newNode, referenceNode) => {\r\n    return referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\r\n};\r\n\r\n/**\r\n *\r\n * @param {...Object} args\r\n * @return {string|{}}\r\n */\r\nconst classesArraysSlice = (...args) => {\r\n\r\n    let dataArgs = args.map(element => {\r\n        let newObject = {};\r\n        if (typeof element !== 'object') {\r\n            return newObject;\r\n        }\r\n        for (let [key, value] of Object.entries(element)){\r\n            if (Array.isArray(value)){\r\n                newObject[key] = value.slice(0);\r\n            }\r\n        }\r\n        return newObject;\r\n    });\r\n\r\n    let [firstArg, secondArg] = dataArgs;\r\n\r\n    let keysTheme = Object.keys(firstArg),\r\n        keysObject = Object.keys(secondArg),\r\n        summKeys =  [...new Set([...keysTheme,...keysObject])];\r\n\r\n    return summKeys.reduce((acc, key) => {\r\n        let inTheme = key in firstArg,\r\n            inObject = key in secondArg;\r\n        if (inTheme && inObject) {\r\n            acc[key] = [...new Set([...firstArg[key], ...secondArg[key]])];\r\n            return acc;\r\n        }\r\n        acc[key] = inTheme ? firstArg[key] : secondArg[key];\r\n        return acc;\r\n    }, {});\r\n};\r\n\r\n/**\r\n *\r\n * @param {...Object} args\r\n * @return {Object}\r\n */\r\nconst sliceObjectArrays = (...args) => {\r\n    if (args.length === 0){\r\n        return {};\r\n    }\r\n    if (args.length === 1){\r\n        return extend(true, {}, args[0]);\r\n    }\r\n    return args.reduce((acc, arg) => classesArraysSlice(acc, arg), {});\r\n};\r\n\r\nconst funcs = {\r\n    delegateFn,\r\n    extend,\r\n    callEvent,\r\n    hasClass,\r\n    highlightMatchesToString,\r\n    mergeListArraysWithoutDuplicates,\r\n    insertAfter,\r\n    sliceObjectArrays\r\n};\r\n\r\nexport default funcs;","const InputWithSearchForWindowWeakMap = new WeakMap();\r\n\r\n/**\r\n * @typedef {object} protectedFieldsIWS\r\n * @property {ListInputWithSearch} list\r\n * @property {Map} themes\r\n */\r\n\r\n/**\r\n *\r\n * @param object\r\n * @param {protectedFieldsIWS} data\r\n */\r\nconst setDataWeakMapIWS = (object, data) => {\r\n    InputWithSearchForWindowWeakMap.set(object, data);\r\n};\r\n\r\n/**\r\n *\r\n * @param object\r\n * @return {...protectedFieldsIWS} data\r\n */\r\nconst getDataWeakMapIWS = (object) => {\r\n    return InputWithSearchForWindowWeakMap.get(object);\r\n};\r\n\r\nconst weakMapIWS = {\r\n    setDataWeakMapIWS,\r\n    getDataWeakMapIWS\r\n};\r\n\r\nexport default weakMapIWS;","import '../scss/inputWithSearch.scss';\r\nimport './polyfills/polyfills';\r\nimport InputWithSearchForWindow from './classes/InputWithSearchForWindow';\r\nimport runDefaultThemes from './themes/themes';\r\n\r\n/**\r\n * Global object\r\n * @type {InputWithSearchForWindow}\r\n */\r\nwindow.inputWithSearch = new InputWithSearchForWindow();\r\nrunDefaultThemes();","(function() {\r\n    if (!Element.prototype.closest) {\r\n        Element.prototype.closest = function(css) {\r\n            let node = this;\r\n            while (node) {\r\n                if (node.matches(css)) return node;\r\n                else node = node.parentElement;\r\n            }\r\n            return null;\r\n        };\r\n    }\r\n})();","/**\r\n *\r\n * @param {string} name\r\n * @param {object} object\r\n * @param {function(InputWithSearch)|boolean} cb\r\n * @param {function(HTMLElement)|boolean} cbBefore\r\n * @return {{name: *, object: *, cb: *, cbBefore: *, [Symbol.iterator]: Function}}\r\n */\r\nexport default function(name, object, cb, cbBefore){\r\n    return {\r\n        name,\r\n        object,\r\n        cb,\r\n        cbBefore,\r\n        [Symbol.iterator]: function* (){\r\n            yield name;\r\n            yield object;\r\n            yield cb;\r\n            yield cbBefore;\r\n        }\r\n    };\r\n}","import defaultExportTheme from '../defaultExportTheme';\r\n\r\nexport default defaultExportTheme(\r\n    'openInfo',\r\n    {\r\n        baseWindowEventsActive: {\r\n            interceptionEvents: false,\r\n            mouseEnterElement: false,\r\n            clickElement: false\r\n        },\r\n        constructors: {\r\n            element: data => data\r\n        },\r\n        maxViewElements: 1,\r\n        classes: {\r\n            wrapper: ['InputWithSearchWindow_theme_openInfo']\r\n        },\r\n        cssParamsWindow: {\r\n            minWidth: 200,\r\n            maxWidth: 286,\r\n            seekWidthTo: 'max'\r\n        }\r\n    },\r\n    (object) => {\r\n        let rootElement = object.getWorkDomElement();\r\n        let innHTML = rootElement.getAttribute('data-iws-data');\r\n        object.setCustomData([\r\n            innHTML\r\n        ]);\r\n    }\r\n);","import defaultExportTheme from '../defaultExportTheme';\r\n\r\n/**\r\n * Get from event object element\r\n * @param e\r\n * @return {InputWithSearch}\r\n */\r\nconst getFromEventObject = e => e.detail.inputWithSearch.object;\r\n\r\n/**\r\n * Callback for inputWithSearch_beforeInit event\r\n * @param e\r\n */\r\nconst cbBeforeStart = e => {\r\n    let object = getFromEventObject(e);\r\n    let domElement = object.getWorkDomElement(true);\r\n    domElement.style.display = 'none';\r\n};\r\n\r\nconst getArrayInfoFromSelect = selectDom => Array.from(selectDom.querySelectorAll('option')).map(option => ({\r\n    text: option.textContent,\r\n    value: option.value,\r\n    selected: option.selected\r\n}));\r\n\r\nconst checkActiveObjectInfoFromSelect = objectCheck => objectCheck.selected;\r\n\r\n/**\r\n * Callback for inputWithSearch_beforeDestruction event\r\n * @param e\r\n */\r\nconst cbBeforeDestruct = (e) => {\r\n    /**\r\n     * @type {InputWithSearch}\r\n     */\r\n    let object = getFromEventObject(e);\r\n    let HTMLElem = object.getWorkDomElement(true);\r\n    HTMLElem.removeEventListener('inputWithSearch_beforeInit', cbBeforeStart);\r\n    HTMLElem.removeEventListener('inputWithSearch_beforeDestruction', cbBeforeDestruct);\r\n    HTMLElem.style.display = '';\r\n};\r\n\r\nconst cbOnChangeData = e => {\r\n    /**\r\n     * @type {InputWithSearch}\r\n     */\r\n    let object = e.detail.inputWithSearch.object;\r\n    let select = object.getWorkDomElement(true);\r\n    let data = object.getDataByKey(e.detail.inputWithSearch.key);\r\n    if (select.value !== data.value) {\r\n        select.value = data.value;\r\n        if ('createEvent' in document) {\r\n            let evt = document.createEvent('HTMLEvents');\r\n            evt.initEvent('change', false, true);\r\n            select.dispatchEvent(evt);\r\n        }\r\n        else {\r\n            select.fireEvent('onchange');\r\n        }\r\n    }\r\n};\r\n\r\nconst callbackOnExternalChange = e => {\r\n    let target = e.target;\r\n    let selected = target.value;\r\n    let object = window.inputWithSearch.getElement(target);\r\n    let activeObject = object.getDataByKey(object.getActiveKey());\r\n    if (activeObject.value !== selected) {\r\n        object.setActive(data => data.value === selected);\r\n    }\r\n};\r\n\r\nexport default defaultExportTheme(\r\n    'select',\r\n    {\r\n        onEvents: 'click',\r\n        delegateElement: true,\r\n        repositionActiveToTop: false,\r\n        constructors: {\r\n            element: objectInfo => {\r\n                return objectInfo.text;\r\n            }\r\n        },\r\n        fns: {\r\n            dataToInputByClick: (data) => {\r\n                return data.data.text;\r\n            }\r\n        }\r\n    },\r\n    object => {\r\n        let domElement = object.getWorkDomElement(true);\r\n        object.setCustomData(getArrayInfoFromSelect(domElement));\r\n        object.setActive(checkActiveObjectInfoFromSelect);\r\n        object.listeners.addCustomRecord(\r\n            'changeActiveSelectTheme',\r\n            'inputWithSearch_changeActive',\r\n            cbOnChangeData\r\n        );\r\n        object.listeners.addCustomRecord(\r\n            'changeSelectTheme',\r\n            'change',\r\n            callbackOnExternalChange\r\n        );\r\n    },\r\n    HTMLElem => {\r\n        HTMLElem.addEventListener('inputWithSearch_beforeInit', cbBeforeStart);\r\n        HTMLElem.addEventListener('inputWithSearch_beforeDestruction', cbBeforeDestruct);\r\n    }\r\n);","import defaultExportTheme from '../defaultExportTheme';\r\n\r\nexport default defaultExportTheme('withPerfectScrollbar', {}, (object) => {\r\n    if (window.PerfectScrollbar){\r\n        let listeners = object.getListeners();\r\n        listeners.addCustomRecord('test_afterOpen', 'inputWithSearch_afterOpen', () => {\r\n            let wrapperInner = object.inputWithSearchWindow.getElementByKey('wrapperInner');\r\n            const ps = new window.PerfectScrollbar(wrapperInner, {\r\n                wheelPropagation: false\r\n            });\r\n            object.getCustomContainer().set('customScroll', ps);\r\n        });\r\n        listeners.addCustomRecord('test_onChangeWindow', 'inputWithSearch_onChangeWindow', () => {\r\n            object.getCustomContainer().get('customScroll').update();\r\n        });\r\n        listeners.addCustomRecord('test_inputWithSearch_beforeClose', 'inputWithSearch_beforeClose', () => {\r\n            let container = object.getCustomContainer();\r\n            container.get('customScroll').destroy();\r\n            container.delete('customScroll');\r\n        });\r\n    }\r\n});","import withPerfectScrollbarTheme from './listThemes/withPerfectScrollbar';\r\nimport selectTheme from './listThemes/select';\r\nimport openInfo from './listThemes/openInfo';\r\n\r\nexport default function runDefaultThemes() {\r\n\r\n    let inputWithSearch = window.inputWithSearch;\r\n\r\n    inputWithSearch.addTheme(...withPerfectScrollbarTheme);\r\n    inputWithSearch.addTheme(...selectTheme);\r\n    inputWithSearch.addTheme(...openInfo);\r\n}","// extracted by mini-css-extract-plugin"],"sourceRoot":""}