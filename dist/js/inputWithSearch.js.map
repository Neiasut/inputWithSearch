{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/classes/ContainerData.js","webpack:///./src/js/classes/Errors/CustomError.js","webpack:///./src/js/classes/Errors/PropertyError.js","webpack:///./src/js/classes/EventSave.js","webpack:///./src/js/classes/InputWithSearch.js","webpack:///./src/js/classes/InputWithSearchForWindow.js","webpack:///./src/js/classes/InputWithSearchWindow.js","webpack:///./src/js/classes/ListInputWithSearch.js","webpack:///./src/js/functions/decorators.js","webpack:///./src/js/functions/functions.js","webpack:///./src/js/functions/weakMapIWS.js","webpack:///./src/js/inputWithSearch.js","webpack:///./src/js/polyfills/polyfills.js","webpack:///./src/js/themes/defaultExportTheme.js","webpack:///./src/js/themes/listThemes/openInfo.js","webpack:///./src/js/themes/listThemes/select.js","webpack:///./src/js/themes/listThemes/withPerfectScrollbar.js","webpack:///./src/js/themes/themes.js","webpack:///./src/scss/inputWithSearch.scss?cd4a"],"names":["ContainerData","idParent","callbacks","_idParent","_callbacks","_prepareObjectCallbacks","clear","data","value","customData","_data","wrapListElements","validateData","_value","_customData","_date","Date","now","_actionData","slice","activeKey","addData","startedData","type","unWrapListElement","reduce","acc","cur","key","full","getData","undefined","nameAction","clearAction","_runCbOnName","checkKeyInActionData","Object","keys","indexOf","stringRequest","timeLiveSaveData","toLower","toLowerCase","name","_checkActivityCallback","cb","get","checkNameInAvailableCbs","getActionKey","_setAction","arrData","map","element","i","wrapElementList","numb","hover","active","Array","isArray","values","Error","info","getActionFullData","arrWork","length","index","unshift","splice","nameCbs","objectCallbacks","current","set","activity","Map","getActionKeyIndex","arr","indexArr","some","forEach","CustomError","message","PropertyError","property","protectedRecordsEventSave","Symbol","EventSave","rootDomElement","HTMLElement","domElement","events","fn","protectedStatus","has","addEventListener","addRecord","arrInfo","recordInfo","iterator","removeProtected","record","getRecordByName","removeEventListener","delete","removeRecord","InputWithSearch","settings","_domElement","updateSettings","createCustomContainer","fireEventAndCallback","waitData","xhr","promiseXhr","savesData","id","getValueFromInput","changeStatus","getWorkDomElement","classList","add","getClassesByKey","addEventListeners","wasFirstLoad","addAttrToDomInput","useInitDomImportant","checkDomElement","delegateElement","listeners","getListeners","removeAllRecords","onEvents","addListRecords","open","checkStatus","close","timerHover","timerHoverFn","clearTimeout","setTimeout","wrapper","inputWithSearchWindow","getElementByKey","listenersWrapper","console","warn","fns","fnGetValueFromInput","call","checkDomOnInput","textContent","fnSetValueToInput","newSettings","classes","funcs","mergeListArraysWithoutDuplicates","extend","addStatuses","removeStatuses","status","window","Set","statuses","idStatus","domElementIsInput","lengthStringToOutput","checkCustomData","constructList","needLoad","useCache","loadOnlyStart","validCache","validateSaveDataForRequest","loadData","stopLoadData","setToMessage","removeStatus","abort","_allFilterAndSortProcess","addListElements","repositionActiveToTop","sliceData","maxLength","maxViewElements","filterData","filter","elemData","saveActionData","dataSort","JSON","parse","setToWait","request","ajaxConfig","url","onLoadData","setToError","delayBeforeSendRequest","Promise","resolve","reject","XMLHttpRequest","onload","response","timeout","onerror","generateGetParams","send","prepareAjaxSendData","join","checkWindow","InputWithSearchWindow","checkOpen","destructor","configForInitSearchWindow","setInputActive","fnOnEventFire","getDataFromLastDataByKey","inputValue","setValueToInput","dataToInputByClick","currentValue","lastValue","runEvents","runDestructor","error","getListCallbacksAndEvents","caller","inputWithSearch","object","hasOwnProperty","dataToOutput","callEvent","func","typeMessage","params","toOutput","removeEventListeners","remove","weakMapIWS","getDataWeakMapIWS","InputWithSearchForWindow","getInstance","list","removeElement","customContainer","withRunEvent","changeKey","result","setInactivityCallback","_setActiveByKeyFromList","setElemListActiveByKey","setElemListHoverByKey","setActivityCallback","getDataByKey","getClassesFromSettings","classesWindow","classesBase","nameElement","getNeedConstructors","constructors","entries","inputWithSearchWindow_destruction","inputWithSearchWindow_clickOnElementList","objectWindow","getAttribute","configForEvent","inputWithSearchWindow_changeContent","args","cssParams","cssParamsWindow","cssCallbacks","cssCallbacksWindow","triangle","baseEventsActive","baseWindowEventsActive","closeBtn","counter","input","autocomplete","sendData","k","encodeURIComponent","flag","baseClasses","bodyOpen","objectNotChangeable","configurable","writable","notChangeableKeys","generateObjectForChange","voidClassWindowClasses","defineProperties","lessSymbols","notFind","htmlElementsClasses","defaultCssParams","readOnly","_counter","tagName","singleton","defineProperty","enumerable","protectedFields","ListInputWithSearch","themes","setDataWeakMapIWS","objectConfig","checkIdFn","someData","checkHTMLfn","document","getElementById","getElemById","stringId","getListAvailableThemeConfig","retObject","themesList","themeName","classesArraysSlice","themeClasses","objectClasses","keysTheme","keysObject","summKeys","inTheme","inObject","hasElement","availableThemeConfigs","objectTheme","fnRunBeforeStart","objectData","exemplar","addElement","fnRunOnStart","getElement","dependElement","defaultSettings","addToDomWindow","addElementsToConfig","addListeners","setBlockHoverSelected","setStatus","reSetPosition","body","appendChild","constructorDOM","content","constructorTriangle","constructorCloseBtn","createElement","innerHTML","elements","addElementToConfig","addMutationObserver","observer","MutationObserver","mutations","config","childList","observe","observerList","disconnect","querySelector","htmlToList","plus","removeListeners","removeMutationObserver","_setHoveredKey","destructorDOM","listCallbacksAndEvents","parentNode","removeChild","setTimeoutOnBlockSelected","timer","winSh","time","timerWaitToBlockHoverSelected","elemListClass","getClassesBaseByKey","eventsArr","event","delegateFn","e","elem","_getKeyAttrFromDomElement","target","closest","checkBlockHoverSelected","_setElemListHover","windowSh","relativeClass","getRelativeObject","down","keyCode","up","enter","preventDefault","setElemListHoverByDirection","hoveredKey","_getHoveredKey","push","withScroll","_getList","arrKeys","getDataForList","_unHoveredElements","querySelectorAll","domListElement","keyElement","wrapperInner","scrollTop","offsetTop","updateOnlyDom","_getActiveKey","_unActiveElements","_setActiveKey","_getDomElementByKey","blockHoverSelected","isHidden","customFunctionForResizing","customFnResize","customFnRePositionTriangle","checkOnFunction","elem_character","getBoundingClientRect","scroll","pageYOffset","documentElement","style","width","winWidth","innerWidth","margin","mTop","mRight","mBot","mLeft","availablePlaceWidth","seekWidthTo","maxWidth","minWidth","left","top","bottom","Math","ceil","position","marginTop","marginBottom","window_character","leftTriangle","offsetWidth","withData","haveData","dataList","reposition","addInfoToList","dataElement","constructElement","checkActiveKey","constructMessage","constructMessageError","constructWaitThrobber","highlightMatchesToString","textError","errorCode","wrapperSub","wrapperList","wrapperTriangle","wrapperCloseBtn","elementList","elementListSelected","elementListHovered","errorText","needSymbolsLength","mouseEnterElement","interceptionEvents","clickElement","el","offsetParent","saves","WeakMap","objectInfo","descriptor","findClass","related","relatedTarget","match","contains","extended","deep","arguments","prototype","toString","merge","obj","prop","string","query","reg","RegExp","replace","hasClass","cls","className","eventConfig","bubbles","detail","dispatchEvent","CustomEvent","oldArr","newArr","classesElement","from","concat","insertAfter","newNode","referenceNode","insertBefore","nextSibling","InputWithSearchForWindowWeakMap","Element","css","node","matches","parentElement","cbBefore","rootElement","innHTML","setCustomData","getFromEventObject","constructorDelegateElement","text","addDelegateElement","toAppend","setAttribute","constructIdSelect","objectId","cbBeforeStart","display","cbBeforeDestruct","HTMLElem","cbOnChangeData","log","PerfectScrollbar","addCustomRecord","ps","wheelPropagation","getCustomContainer","update","container","destroy","runDefaultThemes","addTheme","withPerfectScrollbarTheme","selectTheme","openInfo"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;IClFMA,a;;AAEF;;;;;AAKA,2BAAYC,QAAZ,EAAsBC,SAAtB,EAAgC;AAAA;;AAC5B,aAAKC,SAAL,GAAiBF,QAAjB;AACA;;;;AAIA,aAAKG,UAAL,GAAkBJ,cAAcK,uBAAd,CAAsCH,SAAtC,CAAlB;AACA,aAAKI,KAAL;AACH;;AAED;;;;;;;;;;gCAMQC,I,EAAMC,K,EAA0B;AAAA,gBAAnBC,UAAmB,uEAAN,KAAM;;AACpC,iBAAKC,KAAL,GAAaV,cAAcW,gBAAd,CACTX,cAAcY,YAAd,CAA2BL,IAA3B,CADS,EAET,KAAKJ,SAFI,CAAb;AAIA,iBAAKU,MAAL,GAAcL,KAAd;AACA,iBAAKM,WAAL,GAAmBL,UAAnB;AACA,iBAAKM,KAAL,GAAaC,KAAKC,GAAL,EAAb;AACA,iBAAKC,WAAL,GAAmB,KAAKR,KAAL,CAAWS,KAAX,CAAiB,CAAjB,CAAnB;AACA,iBAAKC,SAAL,GAAiB,OAAjB;AACH;;;uCAEcb,I,EAAK;AAChB,iBAAKW,WAAL,GAAmBX,IAAnB;AACH;;;gCAEM;AACH,iBAAKc,OAAL,CAAa,EAAb,EAAiB,EAAjB;AACH;;;0CAEgB;AACb,mBAAO,KAAKP,WAAZ;AACH;;;kCAE4C;AAAA,gBAArCQ,WAAqC,uEAAvB,IAAuB;AAAA,gBAAjBC,IAAiB,uEAAV,SAAU;;;AAEzC,gBAAMhB,OAAOe,cAAc,KAAKZ,KAAnB,GAA2B,KAAKQ,WAA7C;;AAEA,oBAAQK,IAAR;AACI,qBAAK,OAAL;AACI,2BAAOvB,cAAcwB,iBAAd,CAAgCjB,IAAhC,CAAP;AACJ,qBAAK,OAAL;AACI,2BAAOA,KAAKkB,MAAL,CAAY,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7BD,4BAAIC,IAAIC,GAAR,IAAeD,GAAf;AACA,+BAAOD,GAAP;AACH,qBAHM,EAGJ,EAHI,CAAP;AAIJ;AACI,2BAAOnB,IAAP;AATR;AAWH;;AAED;;;;;;;;;qCAMaqB,G,EAAkB;AAAA,gBAAbC,IAAa,uEAAN,KAAM;;AAC3B,gBAAItB,OAAO,KAAKuB,OAAL,CAAa,KAAb,EAAoB,OAApB,EAA6BF,GAA7B,CAAX;AACA,mBAAO,OAAOrB,IAAP,KAAgB,WAAhB,GACDsB,OACItB,IADJ,GAEIA,KAAK,MAAL,CAHH,GAIDwB,SAJN;AAKH;;AAED;;;;;;;mCAgCWH,G,EAAKI,U,EAAW;AACvB,gBAAIJ,QAAQ,OAAZ,EAAoB;AAChBK,4BAAYD,UAAZ,EAAwB,KAAKd,WAA7B;AACA,qBAAKgB,YAAL,CAAkBF,UAAlB,EAA8BJ,GAA9B;AACA;AACH;AACD,gBAAI,KAAKO,oBAAL,CAA0BP,GAA1B,CAAJ,EAAmC;AAC/BK,4BAAYD,UAAZ,EAAwB,KAAKd,WAA7B;AACA,qBAAKY,OAAL,CAAa,KAAb,EAAoB,OAApB,EAA6BF,GAA7B,EAAkCI,UAAlC,IAAgD,IAAhD;AACA,qBAAKE,YAAL,CAAkBF,UAAlB,EAA8BJ,GAA9B;AACH;AACJ;;;6CAEoBA,G,EAAI;AACrB,mBAAOQ,OAAOC,IAAP,CAAY,KAAKP,OAAL,CAAa,KAAb,EAAoB,OAApB,CAAZ,EAA0CQ,OAA1C,CAAkDV,GAAlD,MAA2D,CAAC,CAAnE;AACH;;;mDAwC0BW,a,EAAeC,gB,EAAiB;;AAEvD,gBAAMC,UAAU,SAAVA,OAAU;AAAA,uBAASjC,MAAMkC,WAAN,EAAT;AAAA,aAAhB;;AAEA,gBAAI,KAAK7B,MAAL,KAAgB,EAAhB,IAAsB4B,QAAQF,aAAR,EAAuBD,OAAvB,CAA+BG,QAAQ,KAAK5B,MAAb,CAA/B,MAAyD,CAAC,CAApF,EAAsF;AAClF,uBAAO,KAAP;AACH;;AAED,mBAAOG,KAAKC,GAAL,KAAa,KAAKF,KAAlB,GAA0ByB,gBAAjC;AACH;;AAED;;;;;;;qCAoCaG,I,EAAMf,G,EAAI;AACnB,gBAAI,KAAKgB,sBAAL,CAA4BD,IAA5B,CAAJ,EAAsC;AAClC,oBAAIE,KAAK,KAAKzC,UAAL,CAAgB0C,GAAhB,CAAoBH,IAApB,EAA0B,IAA1B,CAAT;AACAE,mBAAGjB,GAAH;AACH;AACJ;;AAED;;;;;;;8CAIsBe,I,EAAK;AACvB,gBAAI3C,cAAc+C,uBAAd,CAAsCJ,IAAtC,CAAJ,EAAgD;AAC5C,qBAAKvC,UAAL,CAAgB0C,GAAhB,CAAoBH,IAApB,EAA0B,UAA1B,IAAwC,KAAxC;AACH;AACJ;;AAED;;;;;;;4CAIoBA,I,EAAK;AACrB,gBAAI3C,cAAc+C,uBAAd,CAAsCJ,IAAtC,CAAJ,EAAiD;AAC7C,qBAAKvC,UAAL,CAAgB0C,GAAhB,CAAoBH,IAApB,EAA0B,UAA1B,IAAwC,IAAxC;AACH;AACJ;;AAED;;;;;;;;;+CAMuBA,I,EAAK;AACxB,mBAAO,KAAKvC,UAAL,CAAgB0C,GAAhB,CAAoBH,IAApB,EAA0B,UAA1B,CAAP;AACH;;;4BArKe;AACZ,mBAAOK,aAAa,OAAb,EAAsB,KAAK9B,WAA3B,CAAP;AACH;;AAED;;;;;0BAIeU,G,EAAI;AACf,iBAAKqB,UAAL,CAAgBrB,GAAhB,EAAqB,OAArB;AACH;;AAED;;;;;;;4BAIe;AACX,mBAAOoB,aAAa,QAAb,EAAuB,KAAK9B,WAA5B,CAAP;AACH;;AAED;;;;;0BAIcU,G,EAAI;AACd,iBAAKqB,UAAL,CAAgBrB,GAAhB,EAAqB,QAArB;AACH;;;0CAmBwBsB,O,EAAQ;AAC7B,mBAAOA,QAAQC,GAAR,CAAY;AAAA,uBAAWC,QAAQ7C,IAAnB;AAAA,aAAZ,CAAP;AACH;;;yCAEuB2C,O,EAASjD,Q,EAAS;AACtC,mBAAOiD,QAAQC,GAAR,CAAY,UAAC5C,IAAD,EAAO8C,CAAP;AAAA,uBAAarD,cAAcsD,eAAd,CAA8B/C,IAA9B,EAAoCN,QAApC,EAA8CoD,CAA9C,CAAb;AAAA,aAAZ,CAAP;AACH;;;wCAEsBD,O,EAASnD,Q,EAAUsD,I,EAAK;AAC3C,mBAAO;AACHhD,sBAAM6C,OADH;AAEHxB,qBAAQ3B,QAAR,SAAoBsD,IAFjB;AAGHC,uBAAO,KAHJ;AAIHC,wBAAQ;AAJL,aAAP;AAMH;;;qCAEmBlD,I,EAAK;AACrB,gBAAImD,MAAMC,OAAN,CAAcpD,IAAd,CAAJ,EAAwB;AACpB,uBAAOA,IAAP;AACH,aAFD,MAEO;AACH,oBAAIA,gBAAgB6B,MAApB,EAA2B;AACvB,2BAAOA,OAAOwB,MAAP,CAAcrD,IAAd,CAAP;AACH,iBAFD,MAEO;AACH,0BAAM,IAAIsD,KAAJ,CAAU,8CAAV,CAAN;AACH;AACJ;AACJ;;;8CAE4BX,O,EAAQ;AACjC,gBAAMY,OAAOC,kBAAkB,QAAlB,EAA4Bb,OAA5B,CAAb;AACA,gBAAIc,UAAUd,QAAQ/B,KAAR,CAAc,CAAd,CAAd;AACA,gBAAI2C,SAAS,MAAT,IAAmBZ,QAAQe,MAAR,GAAiB,CAApC,IAAyCH,KAAKI,KAAL,KAAe,CAAC,CAA7D,EAA+D;AAC3DF,wBAAQG,OAAR,mCAAmBH,QAAQI,MAAR,CAAeN,KAAKI,KAApB,EAA0B,CAA1B,CAAnB;AACH;AACD,mBAAOF,OAAP;AACH;;;;;AAqBD;;;;;gDAK+BrB,I,EAAK;AAChC,mBAAO,KAAK0B,OAAL,CAAa/B,OAAb,CAAqBK,IAArB,MAA+B,CAAC,CAAvC;AACH;;AAED;;;;;;;;;gDAM+B2B,e,EAAgB;AAC3C,mBAAO,KAAKD,OAAL,CAAa5C,MAAb,CAAoB,UAACC,GAAD,EAAM6C,OAAN,EAAkB;AACzC,oBAAI,OAAOD,gBAAgBC,OAAhB,CAAP,KAAoC,WAAxC,EAAoD;AAChD,wBAAI1B,KAAK,OAAOyB,gBAAgBC,OAAhB,CAAP,KAAoC,UAApC,GAAiDD,gBAAgBC,OAAhB,CAAjD,GAA4E,KAArF;AACA7C,wBAAI8C,GAAJ,CAAQD,OAAR,EAAiB;AACb1B,8BADa;AAEb4B,kCAAU;AAFG,qBAAjB;AAIH;AACD,uBAAO/C,GAAP;AACH,aATM,EASJ,IAAIgD,GAAJ,EATI,CAAP;AAUH;;;4BA9BmB;AAChB,mBAAO,CAAC,QAAD,EAAW,OAAX,CAAP;AACH;;;;;;AAoEL,IAAMC,oBAAoB,SAApBA,iBAAoB,CAAC3C,UAAD,EAAa4C,GAAb,EAAqB;;AAE3C,QAAIC,WAAW,CAAC,CAAhB;;AAEAD,QAAIE,IAAJ,CAAS,UAAC1B,OAAD,EAAUc,KAAV,EAAoB;AACzB,YAAId,QAAQpB,UAAR,CAAJ,EAAwB;AACpB6C,uBAAWX,KAAX;AACA,mBAAO,IAAP;AACH;AACD,eAAO,KAAP;AACH,KAND;;AAQA,WAAOW,QAAP;AACH,CAbD;;AAeA,IAAM7B,eAAe,SAAfA,YAAe,CAAChB,UAAD,EAAa4C,GAAb,EAAqB;AACtC,QAAIV,QAAQS,kBAAkB3C,UAAlB,EAA8B4C,GAA9B,CAAZ;AACA,WAAOV,UAAU,CAAC,CAAX,GAAeU,IAAIV,KAAJ,EAAW,KAAX,CAAf,GAAmC,MAA1C;AACH,CAHD;;AAKA,IAAMH,oBAAoB,SAApBA,iBAAoB,CAAC/B,UAAD,EAAa4C,GAAb,EAAqB;AAC3C,QAAIV,QAAQS,kBAAkB3C,UAAlB,EAA8B4C,GAA9B,CAAZ;AACA,WAAOV,UAAU,CAAC,CAAX,GAAe,EAAC3D,MAAMqE,IAAIV,KAAJ,CAAP,EAAmBA,YAAnB,EAAf,GAA2C,MAAlD;AACH,CAHD;;AAKA,IAAMjC,cAAc,SAAdA,WAAc,CAACD,UAAD,EAAa4C,GAAb,EAAqB;AACrCA,QAAIG,OAAJ,CAAY,mBAAW;AACnB3B,gBAAQpB,UAAR,IAAsB,KAAtB;AACH,KAFD;AAGH,CAJD;;kBAMehC,a;;;;;;;;;;;;;;;;;;;;;;;;IC1RTgF,W;;;AACF,yBAAYC,OAAZ,EAAoB;AAAA;;AAAA,8HACVA,OADU;;AAEhB,cAAKtC,IAAL,GAAY,aAAZ;AACA,cAAKsC,OAAL,GAAeA,OAAf;AAHgB;AAInB;;;EALqBpB,K;;QAQlBmB,W,GAAAA,W;;;;;;;;;;;;;;;;;;ACRR;;;;;;;;IAEME,a;;;AACF,2BAAYC,QAAZ,EAAqB;AAAA;;AAAA,kIACX,uBAAuBA,QADZ;;AAEjB,cAAKA,QAAL,GAAgBA,QAAhB;AAFiB;AAGpB;;;EAJuBH,yB;;kBAObE,a;;;;;;;;;;;;;;;;;;;;ACTf;;;;;;AAEA;;;;AAIA,IAAME,4BAA4BC,OAAO,2BAAP,CAAlC;;IAEMC,S;AAEF,yBAAmC;AAAA,YAAvBC,cAAuB,uEAAN,KAAM;;AAAA;;AAC/B;;;;AAIA,aAAKH,yBAAL,IAAkC,IAAIV,GAAJ,EAAlC;AACA,YAAIa,mBAAmB,KAAnB,IAA4BA,0BAA0BC,WAA1D,EAAsE;AAClE,iBAAKD,cAAL,GAAsBA,cAAtB;AACH,SAFD,MAEO;AACH,iBAAKA,cAAL,GAAsB,IAAtB;AACH;AACJ;;;;kCAES5C,I,EAAM8C,U,EAAYC,M,EAAQC,E,EAA4B;AAAA,gBAAxBC,eAAwB,uEAAN,KAAM;;AAC5D,gBAAI,CAAC,KAAKR,yBAAL,EAAgCS,GAAhC,CAAoClD,IAApC,CAAL,EAA+C;AAC3C8C,2BAAWK,gBAAX,CAA4BJ,MAA5B,EAAoCC,EAApC;AACA,qBAAKP,yBAAL,EAAgCZ,GAAhC,CAAoC7B,IAApC,EAA0C;AACtC8C,0CADsC;AAEtCC,kCAFsC;AAGtCC,0BAHsC;AAItCC;AAJsC,iBAA1C;AAMH,aARD,MAQO;AACH,sBAAM,IAAIV,4BAAJ,CAAkBvC,IAAlB,CAAN;AACH;AACJ;;;wCAEeA,I,EAAM+C,M,EAAQC,E,EAAG;AAC7B,gBAAI,KAAKJ,cAAL,KAAwB,IAA5B,EAAiC;AAC7B,qBAAKQ,SAAL,CAAepD,IAAf,EAAqB,KAAK4C,cAA1B,EAA0CG,MAA1C,EAAkDC,EAAlD;AACH;AACJ;;;wCAEehD,I,EAAK;AACjB,mBAAO,KAAKyC,yBAAL,EAAgCtC,GAAhC,CAAoCH,IAApC,CAAP;AACH;;;uCAEcqD,O,EAAQ;AAAA;;AACnBA,oBAAQjB,OAAR,CAAgB,UAACkB,UAAD,EAAgB;AAC5BA,2BAAWZ,OAAOa,QAAlB,yCAA8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACpB,KAAKvD,IADe;;AAAA;AAAA;AAAA,2CAEpB,KAAK8C,UAFe;;AAAA;AAAA;AAAA,2CAGpB,KAAKC,MAHe;;AAAA;AAAA;AAAA,2CAIpB,KAAKC,EAJe;;AAAA;AAAA;AAAA,2CAKpB,KAAKC,eALe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAA9B;AAOA,sBAAKG,SAAL,iCAAkBE,UAAlB;AACH,aATD;AAUH;;;qCAEYtD,I,EAA8B;AAAA,gBAAxBwD,eAAwB,uEAAN,KAAM;;AACvC,gBAAIC,SAAS,KAAKC,eAAL,CAAqB1D,IAArB,CAAb;AACA,gBAAIwD,oBAAoB,IAApB,IAA4BC,OAAOR,eAAP,KAA2B,KAA3D,EAAiE;AAC7DQ,uBAAOX,UAAP,CAAkBa,mBAAlB,CAAsCF,OAAOV,MAA7C,EAAqDU,OAAOT,EAA5D;AACA,qBAAKP,yBAAL,EAAgCmB,MAAhC,CAAuC5D,IAAvC;AACH,aAHD,MAGO;AACH,sBAAM,IAAIuC,4BAAJ,CAAkBvC,IAAlB,CAAN;AACH;AACJ;;;2CAEiB;AAAA;;AACd,iBAAKyC,yBAAL,EAAgCL,OAAhC,CAAwC,UAACqB,MAAD,EAASzD,IAAT,EAAkB;AACtD,uBAAK6D,YAAL,CAAkB7D,IAAlB,EAAwB,IAAxB;AACH,aAFD;AAGH;;;;;;kBAGU2C,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7Ef;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMmB,e;AAEF,6BAAYhB,UAAZ,EAAsC;AAAA;AAAA;;AAAA,YAAdiB,QAAc,uEAAH,EAAG;;AAAA;;AAAA;;AAElC,aAAKC,WAAL,GAAmBlB,UAAnB;AACA,aAAKiB,QAAL,GAAgBD,gBAAgBC,QAAhC;AACA,aAAKE,cAAL,CAAoBF,QAApB;AACA,aAAKG,qBAAL;;AAEA,aAAKC,oBAAL,CAA0B,4BAA1B;;AAEA,aAAKC,QAAL,GAAgB,KAAhB;AACA,aAAKC,GAAL,GAAW,KAAX;AACA,aAAKC,UAAL,GAAkB,KAAlB;;AAEA,aAAKC,SAAL,GAAiB,IAAIlH,uBAAJ,CAAkB,KAAKmH,EAAvB,EAA2B;AACxC1D,oBAAQ,gBAAC7B,GAAD,EAAS;AACb,sBAAKkF,oBAAL,CAA0B,8BAA1B,EAA0D,EAAClF,QAAD,EAA1D;AACH,aAHuC;AAIxC4B,mBAAO,eAAC5B,GAAD,EAAS;AACZ,sBAAKkF,oBAAL,CAA0B,6BAA1B,EAAyD,EAAClF,QAAD,EAAzD;AACH;AANuC,SAA3B,CAAjB;AAQA,aAAKsF,SAAL,CAAe7F,OAAf,CAAuB,EAAvB,EAA2B,KAAK+F,iBAAL,EAA3B;;AAEA,aAAKC,YAAL,CAAkB,CAAC,CAAD,CAAlB;AACA,sCAAKC,iBAAL,GAAyBC,SAAzB,EAAmCC,GAAnC,iDAA0C,KAAKC,eAAL,CAAqB,OAArB,CAA1C;;AAEA,aAAKC,iBAAL;;AAEA,aAAKC,YAAL,GAAoB,KAApB;;AAEAlB,wBAAgBmB,iBAAhB,CAAkC,KAAKN,iBAAL,EAAlC;;AAEA,aAAKR,oBAAL,CAA0B,2BAA1B;AACH;;;;4CAE6C;AAAA,gBAA5Be,mBAA4B,uEAAN,KAAM;;AAC1C,mBAAOA,uBAAuB,CAACC,gBAAgB,KAAKpB,QAAL,CAAcqB,eAA9B,CAAxB,GACD,KAAKpB,WADJ,GAED,KAAKD,QAAL,CAAcqB,eAFpB;AAGH;;;;;AAaD;;;;uCAIc;AACV,mBAAO,KAAKC,SAAZ;AACH;;;4CAEkB;AAAA;;AAEf,gBAAIA,YAAY,KAAKC,YAAL,EAAhB;AACA,gBAAIxC,aAAa,KAAK6B,iBAAL,EAAjB;;AAEA,gBAAI,OAAOU,SAAP,KAAqB,WAArB,IAAoCA,qBAAqB1C,mBAA7D,EAAuE;AACnE0C,0BAAUE,gBAAV;AACH;;AAEDF,wBAAY,IAAI1C,mBAAJ,CAAc,KAAKgC,iBAAL,CAAuB,IAAvB,CAAd,CAAZ;;AAEA,gBAAIa,WAAW,KAAKzB,QAAL,CAAcyB,QAA7B;;AAEA,oBAAQA,QAAR;AACI,qBAAK,OAAL;AACIH,8BAAUI,cAAV,CAAyB,CACrB;AACIzF,8BAAM,UADV;AAEI8C,oCAAYA,UAFhB;AAGIC,gCAAQ,KAAKgB,QAAL,CAAcyB,QAH1B;AAIIxC,4BAAI,cAAM;AACN,mCAAK0C,IAAL;AACH,yBANL;AAOIzC,yCAAiB;AAPrB,qBADqB,CAAzB;AAWA;AACJ,qBAAK,OAAL;AACIoC,8BAAUI,cAAV,CAAyB,CACrB;AACIzF,8BAAM,UADV;AAEI8C,oCAAYA,UAFhB;AAGIC,gCAAQ,KAAKgB,QAAL,CAAcyB,QAH1B;AAIIxC,4BAAI,cAAM;AACN,gCAAI,OAAK2C,WAAL,CAAiB,CAAjB,CAAJ,EAAwB;AACpB,uCAAKD,IAAL;AACH,6BAFD,MAEO;AACH,uCAAKE,KAAL;AACH;AACJ,yBAVL;AAWI3C,yCAAiB;AAXrB,qBADqB,CAAzB;AAeA;AACJ,qBAAK,OAAL;AAAc;;AAEV,4BAAI4C,aAAa,IAAjB;;AAEA,4BAAMC,eAAe,SAAfA,YAAe,GAAM;AACvBC,yCAAaF,UAAb;AACAA,yCAAaG,WAAW,YAAM;AAC1B,uCAAKJ,KAAL;AACH,6BAFY,EAEV,EAFU,CAAb;AAGH,yBALD;;AAOAP,kCAAUI,cAAV,CAAyB,CACrB;AACIzF,kCAAM,kBADV;AAEI8C,wCAAYA,UAFhB;AAGIC,oCAAQ,2BAHZ;AAIIC,gCAAI,cAAM;AACN+C,6CAAaF,UAAb;AACA,oCAAII,UAAU,OAAKC,qBAAL,CAA2BC,eAA3B,CAA2C,SAA3C,CAAd;AACA,oCAAIC,mBAAmB,OAAKF,qBAAL,CAA2Bb,SAAlD;AACAe,iDAAiBhD,SAAjB,CACI,wBADJ,EAEI6C,OAFJ,EAGI,YAHJ,EAIIH,YAJJ,EAKI,IALJ;AAOAM,iDAAiBhD,SAAjB,CACI,wBADJ,EAEI6C,OAFJ,EAGI,YAHJ,EAII,YAAM;AACFF,iDAAaF,UAAb;AACH,iCANL,EAOI,IAPJ;AASH,6BAxBL;AAyBI5C,6CAAiB;AAzBrB,yBADqB,EA4BrB;AACIjD,kCAAM,UADV;AAEI8C,wCAAYA,UAFhB;AAGIC,oCAAQ,YAHZ;AAIIC,gCAAI,cAAM;AACN,oCAAI,OAAK2C,WAAL,CAAiB,CAAjB,CAAJ,EAAwB;AACpB,2CAAKD,IAAL;AACH;AACD,oCAAI,OAAKC,WAAL,CAAiB,CAAjB,CAAJ,EAAwB;AACpBI,iDAAaF,UAAb;AACH;AACJ,6BAXL;AAYI5C,6CAAiB;AAZrB,yBA5BqB,EAyClB;AACCjD,kCAAM,mBADP;AAEC8C,wCAAYA,UAFb;AAGCC,oCAAQ,YAHT;AAICC,gCAAI8C,YAJL;AAKC7C,6CAAiB;AALlB,yBAzCkB,CAAzB;AAiDA;AACH;AACD;AACIoD,4BAAQC,IAAR,CAAa,qCAAb;AA9FR;;AAiGA,iBAAKjB,SAAL,GAAiBA,SAAjB;AACH;;;+CAEqB;AAClB,iBAAKA,SAAL,CAAeE,gBAAf;AACH;;;4CAMkB;AACf,gBAAI1C,cAAc,KAAK8B,iBAAL,EAAlB;AACA,gBAAI,OAAO,KAAKZ,QAAL,CAAcwC,GAAd,CAAkBC,mBAAzB,KAAiD,UAArD,EAAgE;AAC5D,uBAAO,KAAKzC,QAAL,CAAcwC,GAAd,CAAkBC,mBAAlB,CAAsCC,IAAtC,CAA2C,IAA3C,EAAiD5D,WAAjD,CAAP;AACH;AACD,gBAAI6D,gBAAgB7D,WAAhB,CAAJ,EAAiC;AAC7B,uBAAOA,YAAYhF,KAAnB;AACH;AACD,mBAAOgF,YAAY8D,WAAnB;AACH;;;wCAEe9I,K,EAAM;AAClB,gBAAIgF,cAAc,KAAK8B,iBAAL,EAAlB;AACA,gBAAI,OAAO,KAAKZ,QAAL,CAAcwC,GAAd,CAAkBK,iBAAzB,KAA+C,UAAnD,EAA8D;AAC1D,qBAAK7C,QAAL,CAAcwC,GAAd,CAAkBK,iBAAlB,CAAoCH,IAApC,CAAyC,IAAzC,EAA+C5D,WAA/C,EAA4DhF,KAA5D;AACA;AACH;AACD,gBAAI6I,gBAAgB7D,WAAhB,CAAJ,EAAiC;AAC7BA,4BAAYhF,KAAZ,GAAoBA,KAApB;AACA;AACH;AACDgF,wBAAY8D,WAAZ,GAA0B9I,KAA1B;AACH;;;uCAEcgJ,W,EAAY;;AAEvB,gBAAIC,UAAU,KAAd;;AAEA,gBAAI,aAAaD,WAAb,IAA4B,QAAOA,YAAY,SAAZ,CAAP,MAAkC,QAAlE,EAA2E;AACvEC,0BAAUC,oBAAMC,gCAAN,CAAuC,KAAKjD,QAAL,CAAc+C,OAArD,EAA8DD,YAAY,SAAZ,CAA9D,CAAV;AACH;;AAED,iBAAK9C,QAAL,GAAgBgD,oBAAME,MAAN,CAAa,IAAb,EAAmB,EAAnB,EAAuB,KAAKlD,QAA5B,EAAsC8C,WAAtC,CAAhB;AACA;AACA,gBAAIC,OAAJ,EAAY;AACR,qBAAK/C,QAAL,CAAc+C,OAAd,GAAwBA,OAAxB;AACH;AACD;AACH;;;uCAEkD;AAAA;;AAAA,gBAAtCI,WAAsC,uEAAxB,EAAwB;AAAA,gBAApBC,cAAoB,uEAAH,EAAG;;AAC/C,gBAAI,OAAO,KAAKC,MAAZ,KAAuB,WAA3B,EAAuC;AACnC,qBAAKA,MAAL,GAAc,IAAIC,OAAOC,GAAX,EAAd;AACH;AACDJ,wBAAY9E,OAAZ,CAAoB,UAACgF,MAAD,EAAY;AAC5B,oBAAIA,UAAUtD,gBAAgByD,QAA9B,EAAuC;AACnC,2BAAKH,MAAL,CAAYvC,GAAZ,CAAgBuC,MAAhB;AACH;AACJ,aAJD;AAKAD,2BAAe/E,OAAf,CAAuB,UAACgF,MAAD,EAAY;AAC/B,oBAAIA,UAAUtD,gBAAgByD,QAA9B,EAAuC;AACnC,2BAAKH,MAAL,CAAYxD,MAAZ,CAAmBwD,MAAnB;AACH;AACJ,aAJD;AAKH;;;oCAEWI,Q,EAAS;AACjB,mBAAO,KAAKJ,MAAL,CAAYlE,GAAZ,CAAgBsE,QAAhB,CAAP;AACH;;;wCAE2B;AAAA,gBAAd3J,KAAc,uEAAN,KAAM;;;AAExB,iBAAK6G,YAAL,CAAkB,EAAlB,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB;;AAEA,gBAAI7B,cAAc,KAAK8B,iBAAL,EAAlB;AACA,gBAAI8C,oBAAoBf,gBAAgB7D,WAAhB,CAAxB;;AAEA,gBAAIhF,UAAU,KAAd,EAAoB;AAChBA,wBAAQgF,YAAYhF,KAApB;AACH;;AAED,gBAAI4J,sBAAsB,KAAtB,IAA+B5J,MAAMyD,MAAN,IAAgB,KAAKyC,QAAL,CAAc2D,oBAAjE,EAAsF;;AAElF,oBAAInD,YAAY,KAAKA,SAArB;;AAEA,oBAAIA,UAAUoD,eAAV,EAAJ,EAAgC;AAC5B,yBAAKC,aAAL;AACH,iBAFD,MAEO;AACH,wBAAIC,WAAW,IAAf;;AAEA,wBAAI,KAAK9D,QAAL,CAAc+D,QAAd,IAA0B,KAAK/D,QAAL,CAAcgE,aAA5C,EAA0D;AACtDF,mCAAW,CAAC,KAAK7C,YAAjB;AACH,qBAFD,MAEO;;AAEH,4BAAIgD,aAAazD,UAAU0D,0BAAV,CACbpK,KADa,EAEb,KAAKkG,QAAL,CAAclE,gBAFD,CAAjB;;AAKAgI,mCAAW,CAAC,KAAK9D,QAAL,CAAc+D,QAAf,IAA2B,CAACE,UAAvC;AACH;;AAED,wBAAIH,QAAJ,EAAa;AACT,6BAAKK,QAAL;AACH,qBAFD,MAEO;AACH,6BAAKN,aAAL;AACH;AACJ;AACJ,aA3BD,MA2BO;AACH,qBAAKO,YAAL;AACA,qBAAKC,YAAL,CAAkB,aAAlB,EAAiC,CAAC,KAAKrE,QAAL,CAAc2D,oBAAf,CAAjC;AACH;AACJ;;;uCAEgC;AAAA,gBAApBW,YAAoB,uEAAL,IAAK;;AAC7BtC,yBAAa,KAAK3B,QAAlB;AACA,gBAAIiE,YAAJ,EAAiB;AACb,qBAAK3D,YAAL,CAAkB,EAAlB,EAAsB,CAAC,CAAD,CAAtB;AACH;AACD,gBAAI,QAAO,KAAKL,GAAZ,MAAoB,QAAxB,EAAiC;AAC7B,qBAAKA,GAAL,CAASiE,KAAT;AACH;AACJ;;;wCAEc;;AAEX,iBAAKC,wBAAL;;AAEA,gBAAI3K,OAAO,KAAK2G,SAAL,CAAepF,OAAf,CAAuB,KAAvB,CAAX;;AAEA,gBAAIvB,KAAK0D,MAAT,EAAgB;;AAEZ,qBAAK6C,oBAAL,CAA0B,kCAA1B;AACA,qBAAK+B,qBAAL,CAA2BsC,eAA3B,CAA2C5K,IAA3C,EAAiD,KAAK6G,iBAAL,EAAjD,EAA2E,KAAKV,QAAL,CAAc0E,qBAAzF;AACA,qBAAKtE,oBAAL,CAA0B,iCAA1B;;AAEA;AACH;;AAED,iBAAKiE,YAAL,CAAkB,SAAlB;AACH;;;mDAEyB;AAAA;;AAEtB,gBAAMM,YAAY,SAAZA,SAAY,CAACzG,GAAD,EAAM0G,SAAN,EAAoB;AAClC,uBAAO1G,IAAIX,MAAJ,GAAaqH,SAAb,GACD1G,IAAIzD,KAAJ,CAAU,CAAV,EAAamK,SAAb,CADC,GAED1G,GAFN;AAGH,aAJD;;AAMA,gBAAIsC,YAAY,KAAKA,SAArB;AACA,gBAAI3G,OAAO2G,UAAUpF,OAAV,EAAX;AACA,gBAAItB,QAAQ,KAAK4G,iBAAL,EAAZ;;AAEA,gBAAI,KAAKV,QAAL,CAAc6E,eAAd,GAAgChL,KAAK0D,MAAzC,EAAgD;AAC5C1D,uBAAO8K,UAAU9K,IAAV,EAAgB,KAAKmG,QAAL,CAAc6E,eAA9B,CAAP;AACH;;AAED,gBAAI,OAAO,KAAK7E,QAAL,CAAcwC,GAAd,CAAkBsC,UAAzB,KAAwC,UAA5C,EAAuD;AACnDjL,uBAAOA,KAAKkL,MAAL,CAAY,UAACC,QAAD,EAAc;AAC7B,2BAAO,OAAKhF,QAAL,CAAcwC,GAAd,CAAkBsC,UAAlB,CAA6BE,QAA7B,EAAuClL,KAAvC,CAAP;AACH,iBAFM,CAAP;AAGH;;AAED,gBAAI,KAAKkG,QAAL,CAAc0E,qBAAd,KAAwC,IAA5C,EAAiD;AAC7C7K,uBAAOP,wBAAcoL,qBAAd,CAAoC7K,IAApC,CAAP;AACH;;AAED2G,sBAAUyE,cAAV,CAAyBpL,IAAzB;;AAEA,iBAAKuG,oBAAL,CAA0B,kCAA1B;AACH;;;mCAEUvG,I,EAAMC,K,EAAM;;AAEnB,gBAAMoL,WAAWC,KAAKC,KAAL,CAAWvL,IAAX,CAAjB;;AAEA,iBAAK2G,SAAL,CAAe7F,OAAf,CAAuBuK,QAAvB,EAAiCpL,KAAjC;AACA,iBAAK+J,aAAL;AACA,gBAAI,KAAK5C,YAAL,KAAsB,KAA1B,EAAgC;AAC5B,qBAAKA,YAAL,GAAoB,IAApB;AACH;AACJ;;;mCAES;AAAA;;AACN,iBAAKmD,YAAL,CAAkB,KAAlB;AACA,iBAAK/D,QAAL,GAAgB4B,mEAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AACvB,uCAAKoD,SAAL;AADuB;;AAGnB,uCAAK9E,UAAL,GAAkB,OAAK+E,OAAL,CAAa,OAAKtF,QAAL,CAAcuF,UAAd,CAAyBC,GAAtC,CAAlB;AACM1L,qCAJa,GAIL,OAAK4G,iBAAL,EAJK;AAAA;AAAA,uCAKA,OAAKH,UALL;;AAAA;AAKb1G,oCALa;;AAMnB,uCAAK4L,UAAL,CAAgB5L,IAAhB,EAAsBC,KAAtB;AANmB;AAAA;;AAAA;AAAA;AAAA;;AAAA,sCAQf,gBAAM,CARS;AAAA;AAAA;AAAA;;AASf,uCAAK4L,UAAL,CAAgB,IAAIvI,KAAJ,CAAU,0BAAV,CAAhB;AATe;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAcnB,uCAAKwD,YAAL,CAAkB,EAAlB,EAAsB,CAAC,CAAD,CAAtB;AAdmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAX,IAgBb,KAAKX,QAAL,CAAc2F,sBAhBD,CAAhB;AAiBH;;;gCAEOH,G,EAAK;AAAA;;AACT,mBAAO,IAAIlC,OAAOsC,OAAX,CAAmB,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC3C,oBAAMxF,MAAM,OAAKA,GAAL,GAAW,IAAIgD,OAAOyC,cAAX,EAAvB;AACAzF,oBAAI0F,MAAJ,GAAa,YAAW;AACpBH,4BAAQvF,IAAI2F,QAAZ;AACH,iBAFD;AAGA3F,oBAAI4F,OAAJ,GAAc,OAAKlG,QAAL,CAAcuF,UAAd,CAAyBW,OAAvC;AACA5F,oBAAI6F,OAAJ,GAAc,YAAY;AACtBL,2BAAOxF,IAAI+C,MAAX;AACH,iBAFD;;AAIA/C,oBAAIqB,IAAJ,CAAS,OAAK3B,QAAL,CAAcuF,UAAd,CAAyB1K,IAAlC,EAAwC2K,MAAM,OAAKY,iBAAL,EAA9C,EAAwE,IAAxE;;AAEA9F,oBAAI+F,IAAJ,CAAStG,gBAAgBuG,mBAAhB,CAAoC,OAAKtG,QAAL,CAAcuF,UAAd,CAAyB1L,IAA7D,CAAT;AACH,aAbM,CAAP;AAcH;;;4CAEkB;AACf,gBAAMoF,KAAK,KAAKe,QAAL,CAAcwC,GAAd,CAAkB4D,iBAA7B;AACA,mBAAO,OAAOnH,EAAP,KAAc,UAAd,GAA2B,MAAMA,GAAG,IAAH,CAAjC,GAA4C,EAAnD;AACH;;;wCAmBe/D,G,EAAkB;AAAA,gBAAbqL,IAAa,uEAAN,KAAM;;AAC9B,gBAAIxD,UAAU,KAAK/C,QAAL,CAAc+C,OAAd,CAAsB7H,GAAtB,CAAd;AACA,mBAAOqL,OAAOxD,QAAQwD,IAAR,CAAa,GAAb,CAAP,GAA2BxD,OAAlC;AACH;;;+BAWK;;AAEF,gBAAIyD,cAAclD,OAAOnB,qBAAP,YAAwCsE,+BAA1D;AAAA,gBACIC,YAAY,KAAK9E,WAAL,CAAiB,CAAjB,CADhB;;AAGA,gBAAI,CAAC8E,SAAL,EAAe;AACX,oBAAI5H,eAAc,KAAK8B,iBAAL,EAAlB;AACA,qBAAKR,oBAAL,CAA0B,4BAA1B;AACA,oBAAIoG,WAAJ,EAAgB;AACZlD,2BAAOnB,qBAAP,CAA6BwE,UAA7B;AACH;AACDrD,uBAAOnB,qBAAP,GACI,KAAKA,qBAAL,GACI,IAAIsE,+BAAJ,CACI,KAAK7F,iBAAL,CAAuB,IAAvB,CADJ,EAEI,KAAKgG,yBAFT,CAFR;AAMA7G,gCAAgB8G,cAAhB,CAA+B/H,YAA/B,EAA4C,IAA5C;AACA,qBAAK6B,YAAL,CAAkB,CAAC,CAAD,CAAlB,EAAuB,CAAC,CAAD,CAAvB;AACH;AACD,iBAAKmG,aAAL;AACA,iBAAK1G,oBAAL,CAA0B,2BAA1B;AACH;;;gDAiDuBlF,G,EAAI;;AAExB,gBAAMrB,OAAO,KAAKkN,wBAAL,CAA8B7L,GAA9B,CAAb;AACA,gBAAM8L,aAAa,KAAKtG,iBAAL,EAAnB;;AAEA,iBAAKuG,eAAL,CACI,KAAKjH,QAAL,CAAcwC,GAAd,CAAkB0E,kBAAlB,CACIrN,IADJ,CADJ;;AAMA,mBAAO;AACHA,0BADG;AAEHsN,8BAAc,KAAKzG,iBAAL,EAFX;AAGH0G,2BAAWJ;AAHR,aAAP;AAKH;;;iDAEwB9L,G,EAAI;AACzB,mBAAO,KAAKsF,SAAL,CAAepF,OAAf,CAAuB,KAAvB,EAA8B,OAA9B,EAAuCF,GAAvC,CAAP;AACH;;;gCAE4C;AAAA,gBAAvCmM,SAAuC,uEAA3B,IAA2B;AAAA,gBAArBC,aAAqB,uEAAL,IAAK;;AACzC,gBAAI,KAAK1F,WAAL,CAAiB,CAAjB,CAAJ,EAAwB;AACpB,oBAAIyF,SAAJ,EAAe,KAAKjH,oBAAL,CAA0B,6BAA1B;AACf,qBAAKO,YAAL,CAAkB,CAAC,CAAD,CAAlB,EAAuB,CAAC,CAAD,CAAvB;AACA,oBAAI;AACA,wBAAI2G,aAAJ,EAAmBhE,OAAOnB,qBAAP,CAA6BwE,UAA7B;AACtB,iBAFD,SAEU;AACNrD,2BAAOnB,qBAAP,GAA+B,IAA/B;AACH;AACDpC,gCAAgB8G,cAAhB,CAA+B,KAAKjG,iBAAL,EAA/B,EAAyD,KAAzD;AACA,oBAAIyG,SAAJ,EAAe,KAAKjH,oBAAL,CAA0B,4BAA1B;AAClB;AACJ;;;mCAEUmH,K,EAAM;AACb,iBAAK5G,YAAL,CAAkB,CAAC,CAAD,CAAlB;AACA,iBAAKP,oBAAL,CAA0B,yBAA1B,EAAqD,CAACmH,KAAD,CAArD;AACA,iBAAKpF,qBAAL,CAA2BuD,UAA3B,CAAsC6B,MAAMhJ,OAA5C,EAAqDgJ,KAArD;AACH;;;6CAEoBtL,I,EAAgB;AAAA,gBAAVpC,IAAU,uEAAH,EAAG;;AACjC,gBAAIoC,QAAQ8D,gBAAgByH,yBAAhB,EAAZ,EAAwD;;AAEpD,oBAAIC,SAAS,KAAK7G,iBAAL,CAAuB,IAAvB,CAAb;AACA,oBAAI8G;AACAC,4BAAQ;AADR,mBAEG9N,IAFH,CAAJ;;AAKA6N,gCAAgB/I,OAAOa,QAAvB,yCAAmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACzB,KAAKmI,MADoB;;AAAA;AAAA,2EAEf,IAFe;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEtBzM,uCAFsB;;AAAA,yCAGvB,KAAK0M,cAAL,CAAoB1M,GAApB,CAHuB;AAAA;AAAA;AAAA;;AAAA,0CAInBA,QAAQ,QAJW;AAAA;AAAA;AAAA;;AAAA;AAAA,2CAKb,KAAKA,GAAL,CALa;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAnC;;AAWA,oBAAI2M,eAAe;AACfH;AADe,iBAAnB;;AAIA1E,oCAAM8E,SAAN,CAAgBL,MAAhB,EAAwBxL,IAAxB,EAA8B4L,YAA9B;;AAEA,oBAAIE,OAAO,KAAK/H,QAAL,CAAcxG,SAAd,CAAwByC,IAAxB,CAAX;;AAEA,oBAAI,OAAO8L,IAAP,KAAgB,UAApB,EAA+B;AAC3BA,6DAAQL,eAAR;AACH;AACJ;AACJ;;AAED;;;;oCAEW;AACP,gBAAI,CAAC,KAAK9F,WAAL,CAAiB,CAAjB,CAAL,EAAyB;AACrB,qBAAKjB,YAAL,CAAkB,CAAC,CAAD,CAAlB;AACA,qBAAKwB,qBAAL,CAA2BkD,SAA3B;AACH;AACJ;;;qCAEY2C,W,EAAyB;AAAA,gBAAZC,MAAY,uEAAH,EAAG;;AAClC,gBAAIC,YAAY,KAAKxH,iBAAL,EAAZ,4BAAyCuH,MAAzC,EAAJ;AACA,iBAAK9F,qBAAL,CAA2BkC,YAA3B,CAAwC2D,WAAxC,EAAqDE,QAArD;AACH;;AAED;;;;qCAEY;AAAA;;AACR,iBAAK9H,oBAAL,CAA0B,mCAA1B;AACA,gBAAItB,cAAc,KAAK8B,iBAAL,EAAlB;AACA,iBAAKiB,KAAL;AACA,iBAAKsG,oBAAL;AACApI,4BAAgB8G,cAAhB,CAA+B/H,WAA/B,EAA4C,KAA5C;AACA,iDAAY+B,SAAZ,EAAsBuH,MAAtB,iDAAgC,KAAKrH,eAAL,CAAqB,OAArB,CAAhC;AACAsH,iCAAWC,iBAAX,CAA6BC,mCAAyBC,WAAzB,EAA7B,EAAqEC,IAArE,CAA0EC,aAA1E,CAAwF5J,WAAxF;AACH;;;;;AAoDD;;sCAEcjF,I,EAAK;AACf,iBAAK2G,SAAL,CAAe7F,OAAf,CAAuBd,IAAvB,EAA6B,KAAK6G,iBAAL,EAA7B,EAAuD,IAAvD;AACH;;AAED;;AAEA;;;;gDAEuB;AACnB,iBAAKiI,eAAL,GAAuB,IAAI3K,GAAJ,EAAvB;AACH;;AAED;;;;;;;6CAIoB;AAChB,mBAAO,KAAK2K,eAAZ;AACH;;AAED;;;;;;AAsEA;;;;;kCAKUxM,E,EAAwB;AAAA,gBAApByM,YAAoB,uEAAL,IAAK;;AAC9B,gBAAIC,YAAY,MAAhB;AACA,gBAAIrI,YAAY,KAAKA,SAArB;AACAA,sBAAUpF,OAAV,CAAkB,KAAlB,EAAyBgD,IAAzB,CAA8B,gBAAQ;AAClC,oBAAI0K,SAAS3M,GAAGtC,KAAKA,IAAR,CAAb;AACA,oBAAIiP,MAAJ,EAAW;AACPD,gCAAYhP,KAAKqB,GAAjB;AACH;AACD,uBAAO4N,MAAP;AACH,aAND;AAOA,gBAAID,cAAc,MAAlB,EAAyB;AACrB,oBAAID,iBAAiB,KAArB,EAA2B;AACvBpI,8BAAUuI,qBAAV,CAAgC,QAAhC;AACH;AACDvI,0BAAU9F,SAAV,GAAsBmO,SAAtB;AACA,qBAAKG,uBAAL,CAA6BH,SAA7B;AACA,oBAAI,KAAKjH,WAAL,CAAiB,CAAjB,CAAJ,EAAwB;AACpB,yBAAKO,qBAAL,CAA2B8G,sBAA3B,CAAkDJ,SAAlD,EAA6D,IAA7D;AACA,yBAAK1G,qBAAL,CAA2B+G,qBAA3B,CAAiDL,SAAjD,EAA4D,KAA5D;AACH;AACD,oBAAID,iBAAiB,KAArB,EAA2B;AACvBpI,8BAAU2I,mBAAV,CAA8B,QAA9B;AACH;AACJ;AACJ;;AAED;;;;;;;;;qCAMajO,G,EAAkB;AAAA,gBAAbC,IAAa,uEAAN,KAAM;;AAC3B,mBAAO,KAAKqF,SAAL,CAAe4I,YAAf,CAA4BlO,GAA5B,EAAiCC,IAAjC,CAAP;AACH;;;uCAEa;AACV,mBAAO,KAAKqF,SAAL,CAAe9F,SAAtB;AACH;;;4BA9U8B;AAAA;;AAE3B,gBAAM2O,yBAAyB,SAAzBA,sBAAyB,CAACtG,OAAD,EAAa;AACxC,oBAAMuG,gBAAgB7C,gCAAsB8C,WAA5C;AACA,uBAAO7N,OAAOC,IAAP,CAAYoH,OAAZ,EAAqBhI,MAArB,CAA4B,UAACC,GAAD,EAAMwO,WAAN,EAAsB;AACrD,wBAAIA,eAAeF,aAAnB,EAAiC;AAC7BtO,4BAAIwO,WAAJ,IAAmBzG,QAAQyG,WAAR,CAAnB;AACH;AACD,2BAAOxO,GAAP;AACH,iBALM,EAKJ,EALI,CAAP;AAMH,aARD;;AAUA,gBAAMyO,sBAAsB,SAAtBA,mBAAsB,CAACC,YAAD,EAAkB;AAC1C,uBAAOhO,OAAOiO,OAAP,CAAeD,YAAf,EAA6B3O,MAA7B,CAAoC,UAAC4M,MAAD,EAAS9N,IAAT,EAAkB;AAAA,+CACtCA,IADsC;AAAA,wBACpDqB,GADoD;AAAA,wBAC/CpB,KAD+C;;AAEzD,wBAAI,OAAOA,KAAP,KAAiB,UAArB,EAAgC;AAC5B6N,+BAAOzM,GAAP,IAAcpB,KAAd;AACH;AACD,2BAAO6N,MAAP;AACH,iBANM,EAMJ,EANI,CAAP;AAOH,aARD;;AAUA,mBAAO;AACHnO,2BAAW;AACPoQ,uDAAmC,6CAAM;AACrC,+BAAK/H,KAAL,CAAW,IAAX,EAAiB,KAAjB;AACH,qBAHM;AAIPgI,8DAA0C,kDAACC,YAAD,EAAe/K,UAAf,EAA8B;AACpE,4BAAM7D,MAAM6D,WAAWgL,YAAX,CAAwB,UAAxB,CAAZ;AACA,4BAAIC,iBAAiB,OAAKhB,uBAAL,CAA6B9N,GAA7B,CAArB;AACA,+BAAKkF,oBAAL,CAA0B,+BAA1B,EAA2D4J,cAA3D;AACA,+BAAKnI,KAAL;AACH,qBATM;AAUPoI,yDAAqC,+CAAa;AAAA,0DAATC,IAAS;AAATA,gCAAS;AAAA;;AAC9C,+BAAK9J,oBAAL,CAA0B,gCAA1B,EAA4D8J,IAA5D;AACH;AAZM,iBADR;AAeHnH,yBAASsG,uBAAuB,KAAKrJ,QAAL,CAAc+C,OAArC,CAfN;AAgBH2G,8BAAcD,oBAAoB,KAAKzJ,QAAL,CAAc0J,YAAlC,CAhBX;AAiBHS,2BAAW,KAAKnK,QAAL,CAAcoK,eAjBtB;AAkBHC,8BAAc,KAAKrK,QAAL,CAAcsK,kBAlBzB;AAmBHC,0BAAU,KAAKvK,QAAL,CAAcuK,QAnBrB;AAoBHC,kCAAkB,KAAKxK,QAAL,CAAcyK,sBApB7B;AAqBHC,0BAAU,KAAK1K,QAAL,CAAc0K;AArBrB,aAAP;AAuBH;;;mCAtcgB;AACb,gBAAI,OAAO,KAAKC,OAAZ,KAAwB,WAA5B,EAAwC;AACpC,qBAAKA,OAAL,GAAe,CAAC,CAAhB;AACH;AACD,iBAAKA,OAAL,IAAgB,CAAhB;AACA,mBAAO,KAAKA,OAAZ;AACH;;;0CA+HwBC,K,EAAM;AAC3BA,kBAAMC,YAAN,GAAqB,KAArB;AACH;;;4CA2N0BhR,I,EAAK;;AAE5B,gBAAIiR,WAAWjR,IAAf;;AAEA,gBAAI,OAAOiR,QAAP,KAAoB,UAAxB,EAAmC;AAC/BA,2BAAWA,UAAX;AACH;;AAED,gBAAIA,aAAa,IAAjB,EAAsB;AAClBA,2BAAW,OAAOA,QAAP,KAAoB,QAApB,GAA+BA,QAA/B,GAA0CpP,OAAOC,IAAP,CAAYmP,QAAZ,EAAsBrO,GAAtB,CACjD,UAASsO,CAAT,EAAW;AAAE,2BAAOC,mBAAmBD,CAAnB,IAAwB,GAAxB,GAA8BC,mBAAmBF,SAASC,CAAT,CAAnB,CAArC;AAAuE,iBADnC,EAEnDxE,IAFmD,CAE9C,GAF8C,CAArD;AAGH;;AAED,mBAAOuE,QAAP;AACH;;;uCA6LqBF,K,EAAOK,I,EAAK;AAC9B,gBAAIA,IAAJ,EAAS;AACLL,sBAAM/J,SAAN,CAAgBC,GAAhB,CAAoB,wBAApB;AACA;AACH;AACD8J,kBAAM/J,SAAN,CAAgBuH,MAAhB,CAAuB,wBAAvB;AACH;;;4CAS0BlN,G,EAAI;AAC3B,mBAAO,KAAKgQ,WAAL,CAAiBhQ,GAAjB,CAAP;AACH;;;oDAyDiC;AAC9B,mBAAO;AACH,8CAA8B,KAD3B;AAEH,6CAA6B,KAF1B;AAGH,qDAAqC,KAHlC;AAIH,iDAAiC,KAJ9B;AAKH,oDAAoC,KALjC;AAMH,mDAAmC,KANhC;AAOH,8CAA8B,KAP3B;AAQH,6CAA6B,KAR1B;AASH,+CAA+B,KAT5B;AAUH,8CAA8B,KAV3B;AAWH,2CAA2B,KAXxB;AAYH,kDAAkC,KAZ/B;AAaH,oDAAoC,KAbjC;AAcH,gDAAgC,KAd7B;AAeH,+CAA+B;AAf5B,aAAP;AAiBH;;;4BAlRoB;AACjB,mBAAO;AACH,mBAAG,OADA;AAEH,mBAAG,MAFA;AAGH,mBAAG,cAHA;AAIH,mBAAG;AAJA,aAAP;AAMH;;;4BAuLuB;AACpB,mBAAO;AACH0P,uBAAO,CAAC,iBAAD,CADJ;AAEHO,0BAAU,CAAC,qBAAD;AAFP,aAAP;AAIH;;;4BAM+B;;AAE5B,gBAAMC,sBAAsB;AACxBC,8BAAc,IADU;AAExBC,0BAAU;AAFc,aAA5B;;AAKA,gBAAMC,oBAAoB,CAAC,OAAD,EAAU,UAAV,CAA1B;;AAEA,gBAAMC,0BAA0B,SAA1BA,uBAA0B,CAAC7P,IAAD,EAAOgM,MAAP,EAAkB;AAC9C,uBAAOhM,KAAKZ,MAAL,CAAY,UAACC,GAAD,EAAM6C,OAAN,EAAkB;AACjC7C,wBAAI6C,OAAJ,IAAe8J,MAAf;AACA,2BAAO3M,GAAP;AACH,iBAHM,EAGJ,EAHI,CAAP;AAIH,aALD;;AAOA,gBAAIyQ,yBAAyB/P,OAAOC,IAAP,CAAY8K,gCAAsB8C,WAAlC,EAA+CxO,MAA/C,CAAsD,UAACC,GAAD,EAAM6C,OAAN,EAAkB;AACjG7C,oBAAI6C,OAAJ,IAAe,EAAf;AACA,uBAAO7C,GAAP;AACH,aAH4B,EAG1B,EAH0B,CAA7B;;AAKA,gBAAI2M,SAAS3E,oBAAME,MAAN,CACT,KAAKgI,WADI,EAETO,sBAFS,CAAb;;AAKA/P,mBAAOgQ,gBAAP,CAAwB/D,MAAxB,EAAgC6D,wBAAwBD,iBAAxB,EAA2CH,mBAA3C,CAAhC;;AAEA,mBAAOzD,MAAP;AACH;;;4BA8CoB;AACjB,mBAAO;AACHlG,0BAAU,OADP;AAEHkE,wCAAwB,GAFrB;AAGHJ,4BAAY;AACRC,yBAAK,8BADG;AAER3K,0BAAM,KAFE;AAGRqL,6BAAS,KAHD;AAIRrM,0BAAM;AAJE,iBAHT;AASHL,2BAAW,KAAKgO,yBAAL,EATR;AAUHkC,8BAAc;AACVhN,6BAAS,KADC;AAEV6K,2BAAO,KAFG;AAGVoE,iCAAa,KAHH;AAIVC,6BAAS;AAJC,iBAVX;AAgBHpJ,qBAAK;AACD;;;;;AAKA0E,wCAAoB,4BAACrN,IAAD,EAAU;AAC1B,+BAAOA,KAAKA,IAAZ;AACH,qBARA;AASDgJ,uCAAmB,KATlB;AAUDJ,yCAAqB,KAVpB;AAWDqC,gCAAY,KAXX;AAYDsB,uCAAmB;AAZlB,iBAhBF;AA8BHrC,0BAAU,KA9BP;AA+BHC,+BAAe,KA/BZ;AAgCHa,iCAAiB,EAhCd;AAiCHlB,sCAAsB,CAjCnB;AAkCH7H,kCAAkB,KAAG,EAAH,GAAM,IAlCrB;AAmCHiH,yBAAS,KAAK8I,mBAnCX;AAoCHhS,sBAAM,KApCH;AAqCHuQ,iCAAiB3D,gCAAsBqF,gBArCpC;AAsCHxB,oCAAoB7D,gCAAsB4D,YAtCvC;AAuCHE,0BAAU,KAvCP;AAwCHG,0BAAU,KAxCP;AAyCHD,wCAAwB,EAzCrB;AA0CHpJ,iCAAiB,KA1Cd;AA2CHqD,uCAAuB;AA3CpB,aAAP;AA6CH;;;;uEA7rBAqH,oB;;;eACI,SAAShM,gBAAgBiM,QAAhB,E;;;;;AA4uBlB,IAAM5K,kBAAkB,SAAlBA,eAAkB;AAAA,WAAW1E,mBAAmBoC,WAA9B;AAAA,CAAxB;;AAEA,IAAM6D,kBAAkB,SAAlBA,eAAkB,CAAC5D,UAAD,EAAgB;AACpC,WAAOA,WAAWkN,OAAX,KAAuB,OAA9B;AACH,CAFD;;kBAIelM,e;;;;;;;;;;;;;;;;;;;;;;ACtyBf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;IAEMwI,wB;AAEF,wCAAc;AAAA;;AAEV,YAAIA,yBAAyBX,cAAzB,CAAwC,WAAxC,CAAJ,EACI,OAAOW,yBAAyB2D,SAAhC;;AAEJxQ,eAAOyQ,cAAP,CAAsB5D,wBAAtB,EAAgD,WAAhD,EAA6D;AACzDzO,mBAAO,IADkD;AAEzDsS,wBAAY,KAF6C;AAGzDd,sBAAU,KAH+C;AAIzDD,0BAAc;AAJ2C,SAA7D;;AAOA;;;;AAIA,YAAIgB,kBAAkB;AAClB5D,kBAAM,IAAI6D,6BAAJ,EADY;AAElBC,oBAAQ,IAAIvO,GAAJ;AAFU,SAAtB;;AAKAqK,6BAAWmE,iBAAX,CAA6B,IAA7B,EAAmCH,eAAnC;AACH;;AAED;;;;;;;;;;;mCAOWtN,U,EAA2C;AAAA;;AAAA,gBAA/B0N,YAA+B,uEAAhB,EAAgB;AAAA,gBAAZF,MAAY,uEAAH,EAAG;;;AAElD,gBAAMG,YAAY,SAAZA,SAAY,CAACC,QAAD,EAAc;AAC5B,oBAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAiC;AAC7B,2BAAOC,YAAYC,SAASC,cAAT,CAAwBH,QAAxB,CAAZ,CAAP;AACH;AACD,uBAAO,KAAP;AACH,aALD;;AAOA,gBAAMC,cAAc,SAAdA,WAAc,CAACD,QAAD,EAAc;AAC9B,uBAAOA,oBAAoB7N,WAA3B;AACH,aAFD;;AAIA,gBAAMiO,cAAc,SAAdA,WAAc,CAACC,QAAD,EAAc;AAC9B,uBAAON,UAAUM,QAAV,IAAsBH,SAASC,cAAT,CAAwBE,QAAxB,CAAtB,GAA0D,KAAjE;AACH,aAFD;;AAIA,gBAAMC,8BAA8B,SAA9BA,2BAA8B,GAAM;;AAEtC,oBAAIC,YAAY,EAAhB;;AAEA,oBAAIX,WAAW,EAAf,EAAkB;AACd,wBAAI,CAACvP,MAAMC,OAAN,CAAcsP,MAAd,CAAL,EAA2B;AACvBA,iCAAS,CAACA,MAAD,CAAT;AACH;AACD,wBAAIY,aAAa9E,qBAAWC,iBAAX,CAA6B,KAA7B,EAAmCiE,MAApD;;AAEAA,2BAAOxR,MAAP,CAAc,UAACC,GAAD,EAAMoS,SAAN,EAAoB;AAC9B,4BAAID,WAAWhO,GAAX,CAAeiO,SAAf,CAAJ,EAA8B;AAC1BpS,gCAAIoS,SAAJ,IAAiBD,WAAW/Q,GAAX,CAAegR,SAAf,CAAjB;AACH;AACD,+BAAOpS,GAAP;AACH,qBALD,EAKGkS,SALH;AAMH;AACD,uBAAOA,SAAP;AACH,aAlBD;;AAoBA,gBAAMG,qBAAqB,SAArBA,kBAAqB,CAACC,YAAD,EAAeC,aAAf,EAAiC;AACxD,oBAAI,QAAOD,YAAP,yCAAOA,YAAP,OAAwB,QAAxB,IAAoC,QAAOC,aAAP,yCAAOA,aAAP,OAAyB,QAAjE,EAA2E;AACvE,wBAAIC,YAAY9R,OAAOC,IAAP,CAAY2R,YAAZ,CAAhB;AAAA,wBACIG,aAAa/R,OAAOC,IAAP,CAAY4R,aAAZ,CADjB;AAAA,wBAEIG,wCAAgB,IAAInK,GAAJ,8BAAYiK,SAAZ,sBAAyBC,UAAzB,GAAhB,EAFJ;AAGA,2BAAOC,SAAS3S,MAAT,CAAgB,UAACC,GAAD,EAAME,GAAN,EAAc;AACjC,4BAAIyS,UAAUzS,OAAOoS,YAArB;AAAA,4BACIM,WAAW1S,OAAOqS,aADtB;AAEA,4BAAII,WAAWC,QAAf,EAAyB;AACrB5S,gCAAIE,GAAJ,iCAAe,IAAIqI,GAAJ,8BAAY+J,aAAapS,GAAb,CAAZ,sBAAkCqS,cAAcrS,GAAd,CAAlC,GAAf;AACA,mCAAOF,GAAP;AACH;AACDA,4BAAIE,GAAJ,IAAWyS,UAAUL,aAAapS,GAAb,CAAV,GAA8BqS,cAAcrS,GAAd,CAAzC;AACA,+BAAOF,GAAP;AACH,qBATM,EASJ,EATI,CAAP;AAUH;AACD,uBAAO,EAAP;AACH,aAjBD;;AAmBA,gBAAI0B,UAAUkQ,YAAY7N,UAAZ,IACRA,UADQ,GAERgO,YAAYhO,UAAZ,CAFN;;AAIA,gBAAIrC,YAAY,KAAhB,EAAsB;;AAElB,oBAAI+L,OAAOJ,qBAAWC,iBAAX,CAA6B,IAA7B,EAAmCG,IAA9C;;AAEA,oBAAI,CAACA,KAAKoF,UAAL,CAAgBnR,OAAhB,CAAL,EAA8B;AAC1B,wBAAIoR,wBAAwBpS,OAAOwB,MAAP,CAAc+P,6BAAd,CAA5B;AAD0B;AAAA;AAAA;;AAAA;AAE1B,6CAAwBa,qBAAxB,8HAA8C;AAAA,gCAArCC,WAAqC;;AAC1C,gCAAI9O,KAAK8O,YAAYC,gBAArB;AACA,gCAAI,OAAO/O,EAAP,KAAc,UAAlB,EAA6B;AACzBA,mCAAGyD,IAAH,CAAQ,IAAR,EAAchG,OAAd;AACH;AACJ;AAPyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAQ1B,8CAAwBoR,qBAAxB,mIAA8C;AAAA,gCAArCC,YAAqC;;AAC1C,gCAAIE,aAAaF,aAAYE,UAA7B;AACA,gCAAIvS,OAAOC,IAAP,CAAYsS,UAAZ,EAAwB1Q,MAA5B,EAAmC;AAC/B,oCAAIwF,UAAUsK,mBAAmBY,WAAWlL,OAA9B,EAAuC0J,aAAa1J,OAApD,CAAd;AACA0J,+CAAezJ,oBAAME,MAAN,CAAa,IAAb,EAAmB,EAAnB,EAAuB+K,UAAvB,EAAmCxB,YAAnC,CAAf;AACAA,6CAAa1J,OAAb,GAAuBA,OAAvB;AACH;AACJ;AAfyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgB1B,wBAAImL,WAAW,IAAInO,yBAAJ,CAAoBrD,OAApB,EAA6B+P,YAA7B,CAAf;AACAhE,yBAAK0F,UAAL,CAAgBzR,OAAhB,EAAyBwR,QAAzB;AAjB0B;AAAA;AAAA;;AAAA;AAkB1B,8CAAwBJ,qBAAxB,mIAA8C;AAAA,gCAArCC,aAAqC;;AAC1C,gCAAI9O,KAAK8O,cAAYK,YAArB;AACA,gCAAI,OAAOnP,EAAP,KAAc,UAAlB,EAA6B;AACzBA,mCAAGyD,IAAH,CAAQ,IAAR,EAAcwL,QAAd;AACH;AACJ;AAvByB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwB7B;;AAED,uBAAOzF,KAAK4F,UAAL,CAAgB3R,OAAhB,CAAP;AACH;;AAED,kBAAM,IAAIS,KAAJ,6LAAmD4B,UAAnD,CAAN;AACH;;AAED;;;;;;;;;;iCAOS9C,I,EAAMgS,U,EAAYG,Y,EAAcJ,gB,EAAiB;;AAEtD,gBAAIzB,SAASlE,qBAAWC,iBAAX,CAA6B,IAA7B,EAAmCiE,MAAhD;;AAEA,gBAAI,CAACA,OAAOpN,GAAP,CAAWlD,IAAX,CAAL,EAAsB;AAClBsQ,uBAAOzO,GAAP,CAAW7B,IAAX,EAAiB;AACbgS,0CADa;AAEbG,8CAFa;AAGbJ;AAHa,iBAAjB;AAKH,aAND,MAMO;AACH,sBAAM,IAAIxP,uBAAJ,CAAkBvC,IAAlB,CAAN;AACH;AACJ;;AAED;;;;;;sCAGoB;AAChB,mBAAO,KAAKiQ,SAAZ;AACH;;;;;;kBAIU3D,wB;;;;;;;;;;;;;;;;;;;;;;ACtKf;;;;AACA;;;;;;;;;;IAEM9B,qB;AAEF,mCAAY6H,aAAZ,EAA2BtO,QAA3B,EAAoC;AAAA;;AAEhC,aAAKA,QAAL,GAAgByG,sBAAsB8H,eAAtC;AACA,aAAKrO,cAAL,CAAoBF,QAApB;;AAEA,aAAKwO,cAAL;AACA,aAAKC,mBAAL;AACA,aAAKC,YAAL;AACA,aAAKJ,aAAL,GAAqBA,aAArB;AACA,aAAKK,qBAAL;;AAEA,aAAKC,SAAL;;AAEA,aAAKC,aAAL;AACH;;;;yCAEe;AACZhC,qBAASiC,IAAT,CAAcC,WAAd,CAA0B,KAAKC,cAAL,EAA1B;AACH;;;yCAEe;AAAA;;AACZ,gBAAIC,UAAU,KAAKC,mBAAL,yCACQ,KAAKnO,eAAL,CAAqB,YAArB,EAAmC,IAAnC,CADR,4CAEY,KAAKA,eAAL,CAAqB,cAArB,EAAqC,IAArC,CAFZ,gDAGgB,KAAKA,eAAL,CAAqB,aAArB,EAAoC,IAApC,CAHhB,0CAII,KAAKoO,mBAAL,EAJJ,wEAAd;AAQA,gBAAIjN,UAAU2K,SAASuC,aAAT,CAAuB,KAAvB,CAAd;AACA,0CAAQvO,SAAR,EAAkBC,GAAlB,8CAAyB,KAAKC,eAAL,CAAqB,SAArB,CAAzB;AACAmB,oBAAQmN,SAAR,GAAoBJ,OAApB;;AAEA,mBAAO/M,OAAP;AACH;;;8CAEoB;AACjB,gBAAIwI,WAAW,KAAK1K,QAAL,CAAc0K,QAA7B;;AAEA,gBAAIA,QAAJ,EAAa;AACT,wCAAsB,KAAK3J,eAAL,CAAqB,iBAArB,EAAwC,IAAxC,CAAtB;AACH;AACD,mBAAO,EAAP;AAEH;;;8CAEoB;AACjB,gBAAIwJ,WAAW,KAAKvK,QAAL,CAAcuK,QAA7B;;AAEA,gBAAIA,QAAJ,EAAa;AACT,0DACkB,KAAKxJ,eAAL,CAAqB,iBAArB,EAAwC,IAAxC,CADlB;AAGH;AACD,mBAAO,EAAP;AACH;;;8CAEoB;AACjB,iBAAKuO,QAAL,GAAgB,EAAhB;AADiB;AAAA;AAAA;;AAAA;AAEjB,qCAAwB5T,OAAOC,IAAP,CAAY8K,sBAAsB8C,WAAlC,CAAxB,8HAAuE;AAAA,wBAA9DC,WAA8D;;AACnE,yBAAK+F,kBAAL,CAAwB/F,WAAxB;AACH;AAJgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMjB,iBAAKgG,mBAAL;AACH;;AAED;;;;8CAEqB;AAAA;;AAEjB,gBAAIC,WAAW,IAAIC,gBAAJ,CAAqB,UAACC,SAAD,EAAe;AAC/C,sBAAKvP,oBAAL,CAA0B,qCAA1B,EAAiE,EAACuP,oBAAD,EAAjE;AACH,aAFc,CAAf;;AAIA,gBAAIC,SAAS,EAAEC,WAAW,IAAb,EAAb;;AAEAJ,qBAASK,OAAT,CAAiB,KAAK1N,eAAL,CAAqB,aAArB,CAAjB,EAAsDwN,MAAtD;;AAEA,iBAAKG,YAAL,GAAoBN,QAApB;AACH;;;iDAEuB;AACpB,iBAAKM,YAAL,CAAkBC,UAAlB;AACH;;AAED;;;;2CAEmBxG,W,EAAY;AAC3B,gBAAMzG,UAAU0D,sBAAsB8C,WAAtB,CAAkCC,WAAlC,EAA+C,CAA/C,CAAhB;AACA,iBAAK8F,QAAL,CAAc9F,WAAd,IAA6BqD,SAASoD,aAAT,CAAuB,MAAMlN,OAA7B,CAA7B;AACH;;;wCAEe7H,G,EAAI;AAChB,mBAAO,KAAKoU,QAAL,CAAcpU,GAAd,CAAP;AACH;;;sCAEagV,U,EAAyB;AAAA,gBAAbC,IAAa,uEAAN,KAAM;;AACnC,gBAAIA,IAAJ,EAAS;AACL,qBAAK/N,eAAL,CAAqB,aAArB,EAAoCiN,SAApC,GAAgD,KAAKjN,eAAL,CAAqB,aAArB,EAAoCiN,SAApC,GAAgDa,UAAhG;AACA;AACH;AACD,iBAAK9N,eAAL,CAAqB,aAArB,EAAoCiN,SAApC,GAAgDa,UAAhD;AACH;;;qCAEW;AACR,iBAAK9P,oBAAL,CAA0B,mCAA1B;AACA,iBAAKgQ,eAAL;AACA,iBAAKC,sBAAL;AACA,iBAAKC,cAAL,CAAoB,OAApB;AACA,iBAAKC,aAAL;AACH;;;6CAEoBtU,I,EAAgB;AAAA,gBAAVpC,IAAU,uEAAH,EAAG;;;AAEjC,gBAAIoC,QAAQwK,sBAAsB+J,sBAAlC,EAAyD;AACrD,oBAAI/I,SAAS,KAAK6H,QAAL,CAAcpN,OAA3B;AACA,oBAAI2F,eAAe;AACf1F,2CAAuB;AACnBwF,gCAAQ,IADW;AAEnB9N;AAFmB;AADR,iBAAnB;AAMAmJ,oCAAM8E,SAAN,CAAgBL,MAAhB,EAAwBxL,IAAxB,EAA8B;AAC1BkG,2CAAuB;AADG,iBAA9B;AAGA,oBAAI4F,OAAO,KAAK/H,QAAL,CAAcxG,SAAd,CAAwByC,IAAxB,CAAX;AACA,oBAAI,OAAO8L,IAAP,KAAgB,UAApB,EAA+B;AAC3BA,6DAAQrM,OAAOwB,MAAP,CAAc2K,aAAa1F,qBAA3B,CAAR;AACH;AACJ;AACJ;;;wCAEc;AACX,gBAAIzF,UAAU,KAAK0F,eAAL,CAAqB,SAArB,CAAd;AACA1F,oBAAQ+T,UAAR,CAAmBC,WAAnB,CAA+BhU,OAA/B;AACH;;;uCAEa;AAAA;;AAEV,gBAAMiU,4BAA4B,SAA5BA,yBAA4B,CAACC,KAAD,EAAQC,KAAR,EAA8B;AAAA,oBAAfC,IAAe,uEAAR,GAAQ;;AAC5D9O,6BAAa4O,KAAb;AACAC,sBAAMlC,qBAAN,CAA4B,IAA5B;AACA,uBAAO1M,WAAW,YAAM;AACpB4O,0BAAMlC,qBAAN,CAA4B,KAA5B;AACH,iBAFM,EAEJmC,IAFI,CAAP;AAGH,aAND;;AAQA,iBAAKC,6BAAL,GAAqC,KAArC;;AAEA,iBAAKzP,SAAL,GAAiB,IAAI1C,mBAAJ,EAAjB;AACA,gBAAIsD,UAAU,KAAKoN,QAAL,CAAcpN,OAA5B;AACA,gBAAM8O,gBAAgBvK,sBAAsBwK,mBAAtB,CAA0C,aAA1C,EAAyD,CAAzD,CAAtB;;AAEA,gBAAIzG,mBAAmB,KAAKxK,QAAL,CAAcwK,gBAArC;AACA,gBAAM0G,YAAY,CACd;AACIjV,sBAAM,cADV;AAEI8C,4BAAYmD,OAFhB;AAGIlD,wBAAQ,OAHZ;AAIIC,oBAAI,YAACkS,KAAD;AAAA,2BAAWnO,oBAAMoO,UAAN,CAAiBD,KAAjB,EAAwBH,aAAxB,EAAuC,UAACK,CAAD,EAAIC,IAAJ,EAAa;AAC/D,+BAAKrI,sBAAL,CAA6BxC,sBAAsB8K,yBAAtB,CAAgDD,IAAhD,CAA7B;AACA,+BAAKlR,oBAAL,CAA0B,0CAA1B,EAAsEkR,IAAtE;AACH,qBAHc,CAAX;AAAA,iBAJR;AAQIpS,iCAAiB;AARrB,aADc,EAWd;AACIjD,sBAAM,QADV;AAEI8C,4BAAYuE,MAFhB;AAGItE,wBAAQ,QAHZ;AAIIC,oBAAI,cAAM;AACN,2BAAK4P,aAAL;AACH,iBANL;AAOI3P,iCAAiB;AAPrB,aAXc,EAoBd;AACIjD,sBAAM,YADV;AAEI8C,4BAAY8N,QAFhB;AAGI7N,wBAAQ,OAHZ;AAIIC,oBAAI,YAACkS,KAAD,EAAW;AACX,wBAAIA,MAAMK,MAAN,CAAaC,OAAb,OAAyB,OAAK1Q,eAAL,CAAqB,SAArB,CAAzB,wBAAJ,EAAkF;AAC9E;AACH;AACD,2BAAK4F,UAAL;AACH,iBATL;AAUIzH,iCAAiB;AAVrB,aApBc,EAgCd;AACIjD,sBAAM,mBADV;AAEI8C,4BAAYmD,OAFhB;AAGIlD,wBAAQ,WAHZ;AAIIC,oBAAI,YAACoS,CAAD;AAAA,2BAAOrO,oBAAMoO,UAAN,CAAiBC,CAAjB,EAAoBL,aAApB,EAAmC,UAACK,CAAD,EAAIC,IAAJ,EAAa;AACvD,4BAAI,CAAC,OAAKI,uBAAL,EAAL,EAAoC;AAChC,mCAAKC,iBAAL,CAAuBL,IAAvB;AACH;AACJ,qBAJU,CAAP;AAAA,iBAJR;AASIpS,iCAAiB;AATrB,aAhCc,EA2Cd;AACIjD,sBAAM,oBADV;AAEI8C,4BAAY8N,QAFhB;AAGI7N,wBAAQ,SAHZ;AAIIC,oBAAI,YAACkS,KAAD,EAAW;;AAEX,wBAAIS,WAAW,MAAf;AACA,wBAAIC,gBAAgB,OAAKC,iBAAL,EAApB;;AAGA,wBAAID,cAAcjQ,WAAd,CAA0B,CAA1B,CAAJ,EAAiC;;AAE7B,4BAAMmQ,OAAOZ,MAAMa,OAAN,KAAkB,EAA/B;AACA,4BAAMC,KAAKd,MAAMa,OAAN,KAAkB,EAA7B;AACA,4BAAME,QAAQf,MAAMa,OAAN,KAAkB,EAAhC;;AAEA,4BAAI,CAACC,MAAMF,IAAP,KAAgBH,SAAShQ,WAAT,EAApB,EAA2C;AACvCuP,kCAAMgB,cAAN;AACA,mCAAKpB,6BAAL,GAAqCJ,0BACjC,OAAKI,6BAD4B,EAEjCa,QAFiC,CAArC;AAIA,gCAAKG,IAAL,EAAW;AACPH,yCAASQ,2BAAT;AACH;AACD,gCAAKH,EAAL,EAAS;AACLL,yCAASQ,2BAAT,CAAqC,KAArC;AACH;AACJ;;AAED,4BAAIF,KAAJ,EAAU;;AAEN,gCAAMG,aAAaT,SAASU,cAAT,EAAnB;;AAEA,gCAAID,eAAe,MAAnB,EAA0B;AACtB,uCAAKpJ,sBAAL,CAA6BoJ,UAA7B;AACAR,8CAAc7I,uBAAd,CAAuCqJ,UAAvC;AACH;;AAEDR,0CAAchQ,KAAd;AACH;AACJ;AACJ,iBA1CL;AA2CI3C,iCAAiB;AA3CrB,aA3Cc,CAAlB;;AA0FA,gBAAI,KAAKc,QAAL,CAAc0K,QAAlB,EAA2B;AACvBwG,0BAAUqB,IAAV,CAAe;AACXtW,0BAAM,eADK;AAEX8C,gCAAY,KAAKqD,eAAL,CAAqB,iBAArB,CAFD;AAGXpD,4BAAQ,OAHG;AAIXC,wBAAI,cAAM;AACN,+BAAK0H,UAAL;AACH,qBANU;AAOXzH,qCAAiB;AAPN,iBAAf;AASH;;AAEDgS,sBAAU7S,OAAV,CAAkB,UAACjB,IAAD,EAAU;AACxB,oBAAIkC,UAAU5D,OAAOwB,MAAP,CAAcE,IAAd,CAAd;AACA,oBAAInB,OAAOqD,QAAQ,CAAR,CAAX;AACA,oBAAI,EAAErD,QAAQwK,sBAAsB+D,gBAAhC,KAAqDA,iBAAiBvO,IAAjB,MAA2B,IAApF,EAAyF;AAAA;;AACrF,yCAAKqF,SAAL,EAAejC,SAAf,sCAA4BC,OAA5B;AACH;AACJ,aAND;AAOH;;AAED;;;;;;;4CAImB;AACf,mBAAOgE,OAAOoE,eAAP,CAAuB2G,UAAvB,CAAkC,KAAKC,aAAvC,CAAP;AACH;;;8CAEqBpT,G,EAAuB;AAAA,gBAAlBsX,UAAkB,uEAAL,IAAK;;AACzC,gBAAI,KAAK5Q,WAAL,MAAsB,KAAK6Q,QAAL,GAAgBhX,oBAAhB,CAAqCP,GAArC,CAA1B,EAAoE;AAChE,oBAAM6H,UAAU,KAAKhC,eAAL,CAAqB,aAArB,EAAoC,CAApC,CAAhB;AACA,oBAAIhC,aAAa,KAAKuQ,QAAL,CAAcpN,OAAd,CAAsB+N,aAAtB,OAAwClN,OAAxC,mBAA6D7H,GAA7D,QAAjB;AACA,oBAAI6D,eAAe,IAAnB,EAAwB;AACpB,yBAAK4S,iBAAL,CAAuB5S,UAAvB,EAAmCyT,UAAnC,EAA+CtX,GAA/C;AACH;AACJ;AACJ;;;sDAEuC;AAAA,gBAAZ6W,IAAY,uEAAL,IAAK;;;AAEpC,gBAAIW,UAAUhX,OAAOC,IAAP,CAAY,KAAKgX,cAAL,CAAoB,IAApB,CAAZ,CAAd;AACA,gBAAIN,aAAa,KAAKC,cAAL,EAAjB;AACA,gBAAI9U,QAAQkV,QAAQ9W,OAAR,CAAgByW,UAAhB,CAAZ;;AAEA,gBAAIN,IAAJ,EAAS;AACL,oBAAIM,eAAe,CAAC,CAApB,EAAsB;AAClB,yBAAKnJ,qBAAL,CAA2BwJ,QAAQ,CAAR,CAA3B;AACA;AACH;AACD,oBAAIA,QAAQA,QAAQnV,MAAR,GAAiB,CAAzB,MAAgC8U,UAApC,EAA+C;AAC3C,yBAAKnJ,qBAAL,CAA2BmJ,UAA3B;AACA;AACH;AACD,qBAAKnJ,qBAAL,CAA2BwJ,QAAQlV,QAAM,CAAd,CAA3B;AACA;AACH;AACD,gBAAIA,UAAU,CAAd,EAAgB;AACZ,qBAAKoV,kBAAL;AACA,qBAAKtC,cAAL,CAAoB,OAApB;AACA;AACH;AACD,iBAAKpH,qBAAL,CAA2BwJ,QAAQlV,QAAM,CAAd,CAA3B;AACH;;;6CAEmB;AAChB,gBAAMuF,UAAU0D,sBAAsBwK,mBAAtB,CAA0C,oBAA1C,EAAgE,CAAhE,CAAhB;AACA,iBAAK3B,QAAL,CAAcpN,OAAd,CAAsB2Q,gBAAtB,OAA2C9P,OAA3C,EAAsD1E,OAAtD,CAA8D,UAAC3B,OAAD,EAAa;AACvEA,wBAAQmE,SAAR,CAAkBuH,MAAlB,CAAyBrF,OAAzB;AACH,aAFD;AAGH;;;0CAEiB+P,c,EAAuD;AAAA,gBAAvCN,UAAuC,uEAA1B,KAA0B;AAAA,gBAAnBO,UAAmB,uEAAN,KAAM;;;AAErE,gBAAM7X,MAAM,OAAO6X,UAAP,KAAsB,QAAtB,GAAiCA,UAAjC,GAA8CD,eAAe/I,YAAf,CAA4B,UAA5B,CAA1D;AACA,gBAAMhH,UAAU0D,sBAAsBwK,mBAAtB,CAA0C,oBAA1C,EAAgE,CAAhE,CAAhB;;AAEA,gBAAI/V,QAAQ,KAAKoX,cAAL,EAAZ,EAAkC;;AAE9B,qBAAKM,kBAAL;AACA,qBAAKtC,cAAL,CAAoBpV,GAApB;;AAEA,oBAAIsX,UAAJ,EAAe;AACX,yBAAKlD,QAAL,CAAc0D,YAAd,CAA2BC,SAA3B,GAAuCH,eAAeI,SAAtD;AACH;AACJ;;AAEDJ,2BAAejS,SAAf,CAAyBC,GAAzB,CAA6BiC,OAA7B;AACH;;;+CAEsB7H,G,EAA8C;AAAA,gBAAzCiY,aAAyC,uEAAzB,KAAyB;AAAA,gBAAlBX,UAAkB,uEAAL,IAAK;;;AAEjE,gBAAItX,QAAQ,MAAR,KAAmBA,QAAQ,KAAKkY,aAAL,EAAR,IAAgCD,aAAnD,CAAJ,EAAsE;;AAElE,oBAAMpQ,UAAU0D,sBAAsBwK,mBAAtB,CAA0C,qBAA1C,EAAiE,CAAjE,CAAhB;;AAEA,qBAAKoC,iBAAL;AACA,oBAAI,CAACF,aAAL,EAAmB;AACf,yBAAKG,aAAL,CAAmBpY,GAAnB;AACH;;AAED,oBAAI6D,aAAa,KAAKwU,mBAAL,CAAyBrY,GAAzB,CAAjB;;AAEA,oBAAIsX,UAAJ,EAAe;AACX,yBAAKlD,QAAL,CAAc0D,YAAd,CAA2BC,SAA3B,GAAuClU,WAAWmU,SAAlD;AACH;;AAEDnU,2BAAW8B,SAAX,CAAqBC,GAArB,CAAyBiC,OAAzB;AACH;AACJ;;;4CAMmB7H,G,EAAI;AACpB,mBAAO,KAAKoU,QAAL,CAAcpN,OAAd,CAAsB+N,aAAtB,iBAAkD/U,GAAlD,QAAP;AACH;;;4CAEkB;AACf,gBAAM6H,UAAU0D,sBAAsBwK,mBAAtB,CAA0C,qBAA1C,EAAiE,CAAjE,CAAhB;AACA,iBAAK3B,QAAL,CAAcpN,OAAd,CAAsB2Q,gBAAtB,OAA2C9P,OAA3C,EAAsD1E,OAAtD,CAA8D,UAAC3B,OAAD,EAAa;AACvEA,wBAAQmE,SAAR,CAAkBuH,MAAlB,CAAyBrF,OAAzB;AACH,aAFD;AAGH;;;gDAEiC;AAAA,gBAAZjF,GAAY,uEAAN,KAAM;;AAC9B,iBAAK0V,kBAAL,GAA0B1V,GAA1B;AACH;;;kDAEwB;AACrB,mBAAO,KAAK0V,kBAAZ;AACH;;;0CAEgB;AACb,iBAAKlS,SAAL,CAAeE,gBAAf;AACH;;;uCAEcsB,W,EAAY;;AAEvB,gBAAIC,UAAU,KAAd;;AAEA,gBAAI,aAAaD,WAAjB,EAA6B;AACzBC,0BAAUC,oBAAMC,gCAAN,CAAuC,KAAKjD,QAAL,CAAc+C,OAArD,EAA8DD,YAAY,SAAZ,CAA9D,CAAV;AACH;;AAED,iBAAK9C,QAAL,GAAgBgD,oBAAME,MAAN,CAAa,IAAb,EAAmB,EAAnB,EAAuB,KAAKlD,QAA5B,EAAsC8C,WAAtC,CAAhB;;AAEA,gBAAIC,OAAJ,EAAY;AACR,qBAAK/C,QAAL,CAAc+C,OAAd,GAAwBA,OAAxB;AACH;AACJ;;;wCAEe7H,G,EAAkB;AAAA,gBAAbqL,IAAa,uEAAN,KAAM;;AAC9B,gBAAIxD,UAAU,KAAK/C,QAAL,CAAc+C,OAAd,CAAsB7H,GAAtB,CAAd;AACA,mBAAOqL,OAAOxD,QAAQwD,IAAR,CAAa,GAAb,CAAP,GAA2BxD,OAAlC;AACH;;;wCAEc;;AAEX,gBAAIuO,OAAO,KAAKQ,iBAAL,GAAyBlR,iBAAzB,EAAX;;AAEA,gBAAI6S,SAASnC,IAAT,CAAJ,EAAoB;AAChB,qBAAK3K,UAAL;AACA;AACH;;AAED,gBAAIwD,YAAY,KAAKnK,QAAL,CAAcmK,SAA9B;AACA,gBAAIuJ,4BAA4B,KAAK1T,QAAL,CAAcqK,YAA9C;AAVW,gBAWEsJ,cAXF,GAW0DD,yBAX1D,CAWNpQ,MAXM;AAAA,gBAW4BsQ,0BAX5B,GAW0DF,yBAX1D,CAWkBnJ,QAXlB;;;AAaX,gBAAIsJ,gBAAgBF,cAAhB,CAAJ,EAAqC;AACjCA,+BAAerC,IAAf,EAAqBnH,SAArB;AACH,aAFD,MAEO;AACH,oBAAI2J,iBAAiBxC,KAAKyC,qBAAL,EAArB;AACA,oBAAIC,SAAS1Q,OAAO2Q,WAAP,IAAsBpH,SAASqH,eAAT,CAAyBjB,SAA5D;AACA,oBAAIkB,QAAQ,KAAK7E,QAAL,CAAcpN,OAAd,CAAsBiS,KAAlC;AACA,oBAAIC,QAAQN,eAAeM,KAA3B;AACA,oBAAIC,WAAW/Q,OAAOgR,UAAtB;;AALG,uDAM+BnK,UAAUoK,MANzC;AAAA,oBAMEC,IANF;AAAA,oBAMQC,MANR;AAAA,oBAMgBC,IANhB;AAAA,oBAMsBC,KANtB;;AAOH,oBAAIC,sBAAsBP,WAAWM,KAAX,GAAmBF,MAA7C;AACA,oBAAII,cAAc,KAAK7U,QAAL,CAAcmK,SAAd,CAAwB0K,WAA1C;;AAEA,oBAAIA,gBAAgB,MAApB,EAA4B;AACxB,4BAAQA,WAAR;AACI,6BAAK,KAAL;AACIT,oCAAQjK,UAAU2K,QAAlB;AACA;AACJ,6BAAK,KAAL;AACIV,oCAAQjK,UAAU4K,QAAlB;AACA;AANR;AAQH;;AAED,oBAAIH,sBAAsBR,KAA1B,EAAiC;AAC7BA,4BAAQQ,mBAAR;AACH;;AAED,oBAAIR,QAAQjK,UAAU4K,QAAtB,EAA+B;AAC3BX,4BAAQjK,UAAU4K,QAAlB;AACH;AACD,oBAAIX,QAAQjK,UAAU2K,QAAtB,EAA+B;AAC3BV,4BAAQjK,UAAU2K,QAAlB;AACH;;AAED,oBAAIE,OAAOlB,eAAekB,IAAf,GAAsB,CAAClB,eAAeM,KAAf,GAAuBA,KAAxB,IAA+B,CAAhE;;AAEA,oBAAIY,OAAOL,KAAX,EAAiB;AACbK,2BAAOL,KAAP;AACH;AACD,oBAAIN,YAAYW,OAAOZ,KAAnB,IAA4BK,MAAhC,EAAuC;AACnCO,2BAAOX,WAAWD,KAAX,GAAmBK,MAA1B;AACH;;AAEDN,sBAAMc,GAAN,GAAYjB,SAASF,eAAeoB,MAAxB,IAAkClB,SAASnH,SAASiC,IAAT,CAAciF,qBAAd,GAAsCkB,GAAjF,IAAwF,IAApG;AACAd,sBAAMa,IAAN,GAAaG,KAAKC,IAAL,CAAUJ,IAAV,IAAkB,IAA/B;AACAb,sBAAMC,KAAN,GAAcA,QAAQ,IAAtB;AACAD,sBAAMkB,QAAN,GAAiB,UAAjB;AACA,oBAAIb,OAAO,CAAX,EAAa;AACTL,0BAAMmB,SAAN,GAAkBd,OAAO,IAAzB;AACH;AACD,oBAAIE,OAAO,CAAX,EAAa;AACTP,0BAAMoB,YAAN,GAAqBb,OAAO,IAA5B;AACH;AACJ;;AAED,gBAAInK,WAAW,KAAKnI,eAAL,CAAqB,iBAArB,CAAf;;AAEA,gBAAImI,aAAa,IAAjB,EAAuB;;AAEnB,oBAAIuJ,kBAAiBxC,KAAKyC,qBAAL,EAArB;AACA,oBAAIyB,mBAAmB,KAAKlG,QAAL,CAAcpN,OAAd,CAAsB6R,qBAAtB,EAAvB;;AAEA,oBAAIF,gBAAgBD,0BAAhB,CAAJ,EAAiD;AAC7CA,+CAA2BrJ,QAA3B,EAAqC+G,IAArC,EAA2CnH,SAA3C;AACH,iBAFD,MAEO;AACH,wBAAIsL,eAAgB3B,gBAAekB,IAAf,GAAsBQ,iBAAiBR,IAAxC,GAAgDlB,gBAAeM,KAAf,GAAqB,CAArE,GACb7J,SAASmL,WAAT,GAAqB,CAD3B;AAEAnL,6BAAS4J,KAAT,CAAea,IAAf,GAAsBG,KAAKC,IAAL,CAAUK,YAAV,IAA0B,IAAhD;AACH;AACJ;AACJ;;;oCAuE0B;AAAA,gBAAjBE,QAAiB,uEAAN,KAAM;;AACvB,iBAAKC,QAAL,GAAgBD,QAAhB;AACH;;;sCAEY;AACT,mBAAO,KAAKC,QAAZ;AACH;;AAED;;;;;;;;mCAKU;AACN,mBAAO,KAAK9D,iBAAL,GAAyBtR,SAAhC;AACH;;;yCAE2B;AAAA,gBAAb7E,IAAa,uEAAN,KAAM;;AACxB,mBAAO,KAAK8W,QAAL,GAAgBrX,OAAhB,CAAwB,KAAxB,EAA+BO,SAAS,IAAT,GAAgB,OAAhB,GAA0B,IAAzD,CAAP;AACH;;;uCAEcT,G,EAAI;AACf,iBAAKuX,QAAL,GAAgBJ,UAAhB,GAA6BnX,GAA7B;AACH;;;yCAEe;AACZ,mBAAO,KAAKuX,QAAL,GAAgBJ,UAAvB;AACH;;;sCAEanX,G,EAAI;AACd,iBAAKuX,QAAL,GAAgB/X,SAAhB,GAA4BQ,GAA5B;AACH;;;wCAEc;AACX,mBAAO,KAAKuX,QAAL,GAAgB/X,SAAvB;AACH;;;wCAEemb,Q,EAAU/b,K,EAAyB;AAAA;;AAAA,gBAAlBgc,UAAkB,uEAAL,IAAK;;;AAE/C,iBAAKC,aAAL,CAAmB,EAAnB;AACA,iBAAKnH,SAAL,CAAe,IAAf;;AAEAiH,qBACKxX,OADL,CACa,UAAC2X,WAAD,EAAcnZ,IAAd,EAAuB;AAC5B,uBAAKkZ,aAAL,CACItP,sBAAsBwP,gBAAtB,CACID,WADJ,EAEIlc,KAFJ,EAGI+C,IAHJ,EAII,OAAKmD,QAAL,CAAc0J,YAAd,CAA2B,SAA3B,CAJJ,EAKI,OAAK3I,eAAL,CAAqB,aAArB,EAAoC,IAApC,CALJ,CADJ,EAQI,IARJ;AAUH,aAZL;;AAcA,gBAAMrG,YAAY,KAAK0Y,aAAL,EAAlB;AACA,gBAAM8C,iBAAiBxb,cAAc,MAArC;;AAEA,gBAAIob,UAAJ,EAAe;AACX,qBAAK7M,sBAAL,CAA4BvO,SAA5B,EAAuC,IAAvC,EAA6C,KAA7C;AACH,aAFD,MAEO;AACH,oBAAIwb,cAAJ,EAAmB;AACf,yBAAKjN,sBAAL,CAA4BvO,SAA5B,EAAuC,IAAvC,EAA6C,IAA7C;AACA,yBAAKwO,qBAAL,CAA2BxO,SAA3B,EAAsC,IAAtC;AACH,iBAHD,MAGO;AACH,wBAAM2X,aAAa,KAAKC,cAAL,EAAnB;AACA,wBAAID,eAAe,MAAnB,EAA0B;AACtB,6BAAKnJ,qBAAL,CAA2BmJ,UAA3B,EAAuCyD,UAAvC;AACH;AACJ;AACJ;AACJ;;;qCAEY9N,W,EAAaC,M,EAAO;AAC7B,iBAAK2G,SAAL;AACA,iBAAKmH,aAAL,CACItP,sBAAsB0P,gBAAtB,CACInO,WADJ,EAEIC,MAFJ,EAGI,KAAKjI,QAAL,CAAc0J,YAAd,CAA2B1B,WAA3B,CAHJ,EAII,KAAKjH,eAAL,CAAqB,SAArB,CAJJ,CADJ;AAQH;;;qCAEkB;AACf,iBAAK6N,SAAL;;AADe,8CAAL1E,IAAK;AAALA,oBAAK;AAAA;;AAEf,iBAAK6L,aAAL,CACItP,sBAAsB2P,qBAAtB,8BACOlM,IADP,SAEI,KAAKnJ,eAAL,CAAqB,OAArB,CAFJ,EAGI,KAAKf,QAAL,CAAc0J,YAAd,CAA2B,OAA3B,CAHJ,GADJ;AAOH;;;oCAEU;AACP,iBAAKkF,SAAL;AACA,iBAAKmH,aAAL,CACItP,sBAAsB4P,qBAAtB,EADJ;AAGH;;;kDA/SgCtX,U,EAAW;AACxC,mBAAOA,WAAWgL,YAAX,CAAwB,UAAxB,CAAP;AACH;;;4CAkJ0B7O,G,EAAI;AAC3B,mBAAO,KAAKqO,WAAL,CAAiBrO,GAAjB,CAAP;AACH;;;yCA2JuBrB,I,EAAMC,K,EAAO+C,I,EAAMoC,E,EAAI8D,O,EAAQ;AACnD,sDACsBA,OADtB,oBAC4ClJ,KAAKqB,GADjD,qBACoE2B,IADpE,gCAEcoC,GAAGpF,KAAKA,IAAR,EAAcC,KAAd,EAAqBkJ,oBAAMsT,wBAA3B,CAFd;AAKH;;;yCAEuBtO,W,EAAaC,M,EAAQhJ,E,EAAI8D,O,EAAQ;AACrD,sDACsBA,OADtB,gCAEc9D,uCAAMgJ,MAAN,EAFd;AAKH;;;8CAE4BsO,S,EAAWC,S,EAAWzT,O,EAAS9D,E,EAAG;AAC3D,sDACsB8D,OADtB,gCAEc9D,GAAGsX,SAAH,EAAcC,SAAd,CAFd;AAKH;;;gDAE6B;AAC1B;AAOH;;;4BA7MuB;AACpB,mBAAO;AACHtU,yBAAS,CAAC,uBAAD,CADN;AAEHuU,4BAAY,CAAC,2BAAD,CAFT;AAGHzD,8BAAc,CAAC,6BAAD,CAHX;AAIH0D,6BAAa,CAAC,4BAAD,CAJV;AAKHC,iCAAiB,CAAC,gCAAD,CALd;AAMHC,iCAAiB,CAAC,gCAAD,CANd;AAOHC,6BAAa,CAAC,+BAAD,CAPV;AAQHC,qCAAqB,CAAC,wCAAD,CARlB;AASHC,oCAAoB,CAAC,uCAAD,CATjB;AAUHxY,yBAAS,CAAC,+BAAD,CAVN;AAWHgJ,uBAAO,CAAC,6BAAD;AAXJ,aAAP;AAaH;;;4BAMkC;AAC/B,mBAAO;AACH,4DAA4C,KADzC;AAEH,qDAAqC,KAFlC;AAGH,uDAAuC;AAHpC,aAAP;AAKH;;;4BAE2B;AACxB,mBAAO;AACHxE,yBAAS,KAAKwG,WADX;AAEHG,8BAAc;AACVhN,6BAAS,iBAAC7C,IAAD,EAAOC,KAAP,EAAcmF,EAAd;AAAA,+BAAqBA,6CAAapF,IAAb,wEAAkCC,KAAlC,CAArB;AAAA,qBADC;AAEVyN,2BAAO;AAAA,+BAAayP,SAAb;AAAA,qBAFG;AAGVrL,iCAAa,qBAAC7R,KAAD,EAAQmd,iBAAR;AAAA,+EAAyCA,iBAAzC;AAAA,qBAHH;AAIVrL,6BAAS,iBAAC9R,KAAD;AAAA,4FAAyBA,KAAzB;AAAA;AAJC,iBAFX;AAQHN,2BAAW,KAAKgX,sBARb;AASHrG,2BAAW,KAAK2B,gBATb;AAUHvB,0BAAU,KAVP;AAWHG,0BAAU,KAXP;AAYHF,kCAAkB,KAAKA;AAZpB,aAAP;AAcH;;;4BAE4B;AACzB,mBAAO;AACH0M,mCAAmB,IADhB;AAEHC,oCAAoB,IAFjB;AAGHC,8BAAc;AAHX,aAAP;AAKH;;;4BAE4B;AACzB,mBAAO;AACH7C,wBAAQ,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,EAAW,EAAX,CADL;AAEHQ,0BAAU,GAFP;AAGHD,0BAAU,GAHP;AAIHD,6BAAa;AAJV,aAAP;AAMH;;;4BAEyB;AACtB,mBAAO;AACHvR,wBAAQ,UADL;AAEHiH,0BAAU;AAFP,aAAP;AAIH;;;;;;AA6IL,IAAMkJ,WAAW,SAAXA,QAAW;AAAA,WAAM4D,GAAGC,YAAH,KAAoB,IAA1B;AAAA,CAAjB;;AAEA,IAAMzD,kBAAkB,SAAlBA,eAAkB;AAAA,WAAM,OAAOwD,EAAP,KAAc,UAApB;AAAA,CAAxB;;kBAEe5Q,qB;;;;;;;;;;;;;;;;;;;;;;IChsBT6F,mB;AAEF,mCAAa;AAAA;;AACT,aAAKiL,KAAL,GAAa,IAAIjU,OAAOkU,OAAX,EAAb;AACH;;;;mCAEUzY,U,EAAY0Y,U,EAAW;AAC9B,iBAAKF,KAAL,CAAWzZ,GAAX,CAAeiB,UAAf,EAA2B0Y,UAA3B;AACH;;;mCAEU1Y,U,EAAW;AAClB,mBAAO,KAAKwY,KAAL,CAAWpY,GAAX,CAAeJ,UAAf,CAAP;AACH;;;sCAEaA,U,EAAW;AACrB,iBAAKwY,KAAL,CAAW1X,MAAX,CAAkBd,UAAlB;AACH;;AAED;;;;;;;;mCAKWA,U,EAAW;AAClB,mBAAO,KAAKwY,KAAL,CAAWnb,GAAX,CAAe2C,UAAf,CAAP;AACH;;;;;;kBAGUuN,mB;;;;;;;;;;;;;;;;;AC5Bf,IAAMP,WAAW,SAAXA,QAAW,CAACyF,MAAD,EAAStW,GAAT,EAAcwc,UAAd,EAA6B;AAC1CA,eAAWpM,QAAX,GAAsB,KAAtB;AACA,WAAOoM,UAAP;AACH,CAHD;;QAKQ3L,Q,GAAAA,Q;;;;;;;;;;;;;;;;;;;;ACLR,IAAMqF,aAAa,SAAbA,UAAa,CAACD,KAAD,EAAQwG,SAAR,EAAmB1Y,EAAnB,EAA0B;AACzC,QAAIuS,SAASL,MAAMK,MAAnB;AAAA,QACIoG,UAAUzG,MAAM0G,aADpB;AAAA,QAEIC,cAFJ;;AAIA;AACA,WAAQtG,UAAUA,WAAW3E,QAArB,IAAiC,EAAGiL,QAAQtG,OAAO3Q,SAAP,CAAiBkX,QAAjB,CAA0BJ,SAA1B,CAAX,CAAzC,EAA6F;AACzFnG,iBAASA,OAAOf,UAAhB;AACH;;AAED;AACA,QAAK,CAACqH,KAAN,EAAc;AAAE;AAAS;;AAEzB;AACA,WAAQF,WAAWA,YAAYpG,MAAvB,IAAiCoG,YAAY/K,QAArD,EAAgE;AAC5D+K,kBAAUA,QAAQnH,UAAlB;AACH;;AAED;AACA,QAAKmH,YAAYpG,MAAjB,EAA0B;AAAE;AAAS;;AAErC,WAAOvS,GAAGkS,KAAH,EAAUK,MAAV,CAAP;AACH,CAtBD;;AAwBA,SAAStO,MAAT,GAAkB;;AAEd;AACA,QAAI8U,WAAW,EAAf;AACA,QAAIC,OAAO,KAAX;AACA,QAAItb,IAAI,CAAR;AACA,QAAIY,SAAS2a,UAAU3a,MAAvB;;AAEA;AACA,QAAK7B,OAAOyc,SAAP,CAAiBC,QAAjB,CAA0B1V,IAA1B,CAAgCwV,UAAU,CAAV,CAAhC,MAAmD,kBAAxD,EAA6E;AACzED,eAAOC,UAAU,CAAV,CAAP;AACAvb;AACH;;AAED,QAAI0b,QAAQ,SAARA,KAAQ,CAAUC,GAAV,EAAe;AACvB,aAAM,IAAIC,IAAV,IAAkBD,GAAlB,EAAwB;AACpB,gBAAK5c,OAAOyc,SAAP,CAAiBvQ,cAAjB,CAAgClF,IAAhC,CAAsC4V,GAAtC,EAA2CC,IAA3C,CAAL,EAAyD;AACrD,oBAAKN,QAAQvc,OAAOyc,SAAP,CAAiBC,QAAjB,CAA0B1V,IAA1B,CAA+B4V,IAAIC,IAAJ,CAA/B,MAA8C,iBAA3D,EAA+E;AAC3EP,6BAASO,IAAT,IAAiBrV,OAAQ,IAAR,EAAc8U,SAASO,IAAT,CAAd,EAA8BD,IAAIC,IAAJ,CAA9B,CAAjB;AACH,iBAFD,MAEO;AACHP,6BAASO,IAAT,IAAiBD,IAAIC,IAAJ,CAAjB;AACH;AACJ;AACJ;AACJ,KAVD;;AAYA,WAAQ5b,IAAIY,MAAZ,EAAoBZ,GAApB,EAA0B;AACtB,YAAI2b,MAAMJ,UAAUvb,CAAV,CAAV;AACA0b,cAAMC,GAAN;AACH;;AAED,WAAON,QAAP;AAEH;;AAED,SAAS1B,wBAAT,CAAkCkC,MAAlC,EAA0CC,KAA1C,EAAgD;AAC5C,QAAMC,MAAM,IAAIC,MAAJ,CAAW,MAAIF,KAAJ,GAAU,GAArB,EAA0B,IAA1B,CAAZ;AACA,WAAOD,OAAOI,OAAP,CAAeF,GAAf,EAAoB,2DAApB,CAAP;AACH;;AAED,SAASG,QAAT,CAAkBnc,OAAlB,EAA2Boc,GAA3B,EAAgC;AAC5B,WAAO,CAAC,MAAMpc,QAAQqc,SAAd,GAA0B,GAA3B,EAAgCnd,OAAhC,CAAwC,MAAMkd,GAAN,GAAY,GAApD,IAA2D,CAAC,CAAnE;AACH;;AAED,IAAMhR,YAAY,SAAZA,SAAY,CAACpL,OAAD,EAAUT,IAAV,EAAgBpC,IAAhB,EAAyB;;AAEvC,QAAImf,cAAc;AACdC,iBAAS;AADK,KAAlB;;AAIA,QAAI,OAAOpf,IAAP,KAAgB,WAApB,EAAgC;AAC5Bmf,oBAAYE,MAAZ,GAAqBrf,IAArB;AACH;;AAED6C,YAAQyc,aAAR,CAAsB,IAAIC,WAAJ,CAAgBnd,IAAhB,EAAsB+c,WAAtB,CAAtB;AACH,CAXD;;AAaA,IAAM/V,mCAAmC,SAAnCA,gCAAmC,CAACoW,MAAD,EAASC,MAAT,EAAoB;;AAEzD,WAAO5d,OAAOiO,OAAP,CAAe0P,MAAf,EAAuBte,MAAvB,CAA8B,UAACC,GAAD,EAAMoC,IAAN,EAAe;AAAA,mCACZA,IADY;AAAA,YAC3CoM,WAD2C;AAAA,YAC9B+P,cAD8B;;AAEhD,YAAI/P,eAAe8P,MAAf,IAAyBtc,MAAMC,OAAN,CAAcqc,OAAO9P,WAAP,CAAd,CAA7B,EAAgE;AAC5DxO,gBAAIwO,WAAJ,IAAmBxM,MAAMwc,IAAN,CAAW,IAAIjW,GAAJ,CAAQgW,eAAeE,MAAf,CAAsBH,OAAO9P,WAAP,CAAtB,CAAR,CAAX,CAAnB;AACH,SAFD,MAEO;AACHxO,gBAAIwO,WAAJ,IAAmB+P,cAAnB;AACH;AACD,eAAOve,GAAP;AACH,KARM,EAQJ,EARI,CAAP;AASH,CAXD;;AAaA,IAAM0e,cAAc,SAAdA,WAAc,CAACC,OAAD,EAAUC,aAAV,EAA4B;AAC5CA,kBAAcnJ,UAAd,CAAyBoJ,YAAzB,CAAsCF,OAAtC,EAA+CC,cAAcE,WAA7D;AACH,CAFD;;AAIA,IAAM9W,QAAQ;AACVoO,0BADU;AAEVlO,kBAFU;AAGV4E,wBAHU;AAIV+Q,sBAJU;AAKVvC,sDALU;AAMVrT,sEANU;AAOVyW;AAPU,CAAd;;kBAUe1W,K;;;;;;;;;;;;;;;;;AC5Gf,IAAM+W,kCAAkC,IAAIvC,OAAJ,EAAxC;;AAEA;;;;;;AAMA;;;;;AAKA,IAAMhL,oBAAoB,SAApBA,iBAAoB,CAAC7E,MAAD,EAAS9N,IAAT,EAAkB;AACxCkgB,kCAAgCjc,GAAhC,CAAoC6J,MAApC,EAA4C9N,IAA5C;AACH,CAFD;;AAIA;;;;;AAKA,IAAMyO,oBAAoB,SAApBA,iBAAoB,CAACX,MAAD,EAAY;AAClC,SAAOoS,gCAAgC3d,GAAhC,CAAoCuL,MAApC,CAAP;AACH,CAFD;;AAIA,IAAMU,aAAa;AACfmE,sCADe;AAEflE;AAFe,CAAnB;;kBAKeD,U;;;;;;;;;;;;;;AC/Bf;;AACA;;AACA;;;;AACA;;;;;;AAEA;;;;AAIA/E,OAAOoE,eAAP,GAAyB,IAAIa,kCAAJ,EAAzB;AACA,wB;;;;;;;;;;;;;;ACVA,CAAC,YAAW;AACR,QAAI,CAACyR,QAAQ7B,SAAR,CAAkB1G,OAAvB,EAAgC;AAC5BuI,gBAAQ7B,SAAR,CAAkB1G,OAAlB,GAA4B,UAASwI,GAAT,EAAc;AACtC,gBAAIC,OAAO,IAAX;AACA,mBAAOA,IAAP,EAAa;AACT,oBAAIA,KAAKC,OAAL,CAAaF,GAAb,CAAJ,EAAuB,OAAOC,IAAP,CAAvB,KACKA,OAAOA,KAAKE,aAAZ;AACR;AACD,mBAAO,IAAP;AACH,SAPD;AAQH;AACJ,CAXD,I;;;;;;;;;;;;;;;;;;kBCQe,UAASne,IAAT,EAAe0L,MAAf,EAAuBxL,EAAvB,EAA2Bke,QAA3B,EAAoC;AAC/C;AACIpe,kBADJ;AAEI0L,sBAFJ;AAGIxL,cAHJ;AAIIke;AAJJ,OAKK1b,OAAOa,QALZ,uCAKuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACTvD,IADS;;AAAA;AAAA;AAAA,+BAET0L,MAFS;;AAAA;AAAA;AAAA,+BAGTxL,EAHS;;AAAA;AAAA;AAAA,+BAITke,QAJS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KALvB;AAYH,C;;kNArBD;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;;;;;kBAEe,kCACX,UADW,EAEX;AACI5P,4BAAwB;AACpB0M,4BAAoB,KADA;AAEpBD,2BAAmB,KAFC;AAGpBE,sBAAc;AAHM,KAD5B;AAMI1N,kBAAc;AACVhN,iBAAS;AAAA,mBAAQ7C,IAAR;AAAA;AADC,KANlB;AASIgL,qBAAiB,CATrB;AAUI9B,aAAS;AACLb,iBAAS,CAAC,sCAAD;AADJ,KAVb;AAaIkI,qBAAiB;AACb2K,kBAAU,GADG;AAEbD,kBAAU,GAFG;AAGbD,qBAAa;AAHA;AAbrB,CAFW,EAqBX,UAAClN,MAAD,EAAY;AACR,QAAI2S,cAAc3S,OAAO/G,iBAAP,EAAlB;AACA,QAAI2Z,UAAUD,YAAYvQ,YAAZ,CAAyB,eAAzB,CAAd;AACApC,WAAO6S,aAAP,CAAqB,CACjBD,OADiB,CAArB;AAGH,CA3BU,C;;;;;;;;;;;;;;;;;;ACFf;;;;AACA;;;;;;;;AAEA;;;;;AAKA,IAAME,qBAAqB,SAArBA,kBAAqB;AAAA,WAAKpJ,EAAE6H,MAAF,CAASxR,eAAT,CAAyBC,MAA9B;AAAA,CAA3B;;AAEA;;;;;AAKA,IAAM+S,6BAA6B,SAA7BA,0BAA6B,CAACC,IAAD;AAAA,sBAC7BA,IAD6B;AAAA,CAAnC;;AAIA;;;;;;AAMA,IAAMC,qBAAqB,SAArBA,kBAAqB,CAACC,QAAD,EAAWpa,EAAX,EAAuD;AAAA;;AAAA,QAAxCsC,OAAwC,uEAA9B,CAAC,uBAAD,CAA8B;;AAC9E,QAAI1B,kBAAkBwL,SAASuC,aAAT,CAAuB,KAAvB,CAAtB;AACA/N,oBAAgByZ,YAAhB,CAA6B,IAA7B,EAAmCra,EAAnC;AACA,6CAAgBI,SAAhB,EAA0BC,GAA1B,iDAAiCiC,OAAjC;AACA1B,oBAAgBgO,SAAhB,GAA4BqL,2BAA2B,iBAA3B,CAA5B;AACA1X,wBAAM0W,WAAN,CAAkBrY,eAAlB,EAAmCwZ,QAAnC;AACH,CAND;;AAQA;;;;;AAKA,IAAME,oBAAoB,SAApBA,iBAAoB;AAAA,WAAYC,WAAS,SAArB;AAAA,CAA1B;;AAEA;;;;AAIA,IAAMC,gBAAgB,SAAhBA,aAAgB,IAAK;AACvB,QAAItT,SAAS8S,mBAAmBpJ,CAAnB,CAAb;AACA,QAAItS,aAAa4I,OAAO/G,iBAAP,CAAyB,IAAzB,CAAjB;AACA7B,eAAWoV,KAAX,CAAiB+G,OAAjB,GAA2B,MAA3B;AACA,QAAMza,KAAKsa,kBAAkBpT,OAAOlH,EAAzB,CAAX;AACAma,uBAAmB7b,UAAnB,EAA+B0B,EAA/B;AACAkH,WAAOzH,cAAP,CAAsB;AAClBmB,yBAAiBwL,SAASC,cAAT,CAAwBrM,EAAxB;AADC,KAAtB;AAGH,CATD;;AAWA;;;;AAIA,IAAM0a,mBAAmB,SAAnBA,gBAAmB,CAAC9J,CAAD,EAAO;AAC5B;;;AAGA,QAAI1J,SAAS8S,mBAAmBpJ,CAAnB,CAAb;AACA,QAAI+J,WAAWzT,OAAO/G,iBAAP,CAAyB,IAAzB,CAAf;AACAwa,aAASxb,mBAAT,CAA6B,4BAA7B,EAA2Dqb,aAA3D;AACAG,aAASxb,mBAAT,CAA6B,mCAA7B,EAAkEub,gBAAlE;AACAC,aAASjH,KAAT,CAAe+G,OAAf,GAAyB,EAAzB;AACAE,aAAShB,aAAT,CAAuB1J,WAAvB,CAAmC7D,SAASC,cAAT,CAAwBiO,kBAAkBpT,OAAOlH,EAAzB,CAAxB,CAAnC;AACH,CAVD;;AAYA,IAAM4a,iBAAiB,SAAjBA,cAAiB,GAAa;AAAA,sCAATnR,IAAS;AAATA,YAAS;AAAA;;AAChC5H,YAAQgZ,GAAR,CAAYpR,IAAZ;AAEH,CAHD;;kBAKe,kCACX,QADW,EAEX;AACIzI,cAAU;AADd,CAFW,EAKX,UAACkG,MAAD,EAAY;AACRA,WAAO6S,aAAP,CAAqB,CACjB,MADiB,EAEjB,OAFiB,EAGjB,OAHiB,CAArB;AAKH,CAXU,EAYX,UAACY,QAAD,EAAc;AACVA,aAAShc,gBAAT,CAA0B,4BAA1B,EAAwD6b,aAAxD;AACAG,aAAShc,gBAAT,CAA0B,mCAA1B,EAA+D+b,gBAA/D;AACA;AACH,CAhBU,C;;;;;;;;;;;;;;;;;;AC5Ef;;;;;;kBAEe,kCAAmB,sBAAnB,EAA2C,EAA3C,EAA+C,UAACxT,MAAD,EAAY;AACtE,QAAIrE,OAAOiY,gBAAX,EAA4B;AACxB,YAAIja,YAAYqG,OAAOpG,YAAP,EAAhB;AACAD,kBAAUka,eAAV,CAA0B,gBAA1B,EAA4C,2BAA5C,EAAyE,YAAM;AAC3E,gBAAIxI,eAAerL,OAAOxF,qBAAP,CAA6BC,eAA7B,CAA6C,cAA7C,CAAnB;AACA,gBAAMqZ,KAAK,IAAInY,OAAOiY,gBAAX,CAA4BvI,YAA5B,EAA0C;AACjD0I,kCAAkB;AAD+B,aAA1C,CAAX;AAGA/T,mBAAOgU,kBAAP,GAA4B7d,GAA5B,CAAgC,cAAhC,EAAgD2d,EAAhD;AACH,SAND;AAOAna,kBAAUka,eAAV,CAA0B,qBAA1B,EAAiD,gCAAjD,EAAmF,YAAM;AACrF7T,mBAAOgU,kBAAP,GAA4Bvf,GAA5B,CAAgC,cAAhC,EAAgDwf,MAAhD;AACH,SAFD;AAGAta,kBAAUka,eAAV,CAA0B,kCAA1B,EAA8D,6BAA9D,EAA6F,YAAM;AAC/F,gBAAIK,YAAYlU,OAAOgU,kBAAP,EAAhB;AACAE,sBAAUzf,GAAV,CAAc,cAAd,EAA8B0f,OAA9B;AACAD,sBAAUhc,MAAV,CAAiB,cAAjB;AACH,SAJD;AAKH;AACJ,CAnBc,C;;;;;;;;;;;;;;;;;kBCESkc,gB;;AAJxB;;;;AACA;;;;AACA;;;;;;;;AAEe,SAASA,gBAAT,GAA4B;;AAEvC,QAAIrU,kBAAkBpE,OAAOoE,eAA7B;;AAEAA,oBAAgBsU,QAAhB,2CAA4BC,8BAA5B;AACAvU,oBAAgBsU,QAAhB,2CAA4BE,gBAA5B;AACAxU,oBAAgBsU,QAAhB,2CAA4BG,kBAA5B;AACH,C;;;;;;;;;;;ACXD,uC","file":"inputWithSearch.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/inputWithSearch.js\");\n","class ContainerData{\r\n\r\n    /**\r\n     * constructor\r\n     * @param {string} idParent\r\n     * @param {object} callbacks\r\n     */\r\n    constructor(idParent, callbacks){\r\n        this._idParent = idParent;\r\n        /**\r\n         * @typedef {Map.<string, {cb: function|boolean, activity: boolean}>} _callbacks\r\n         * @type _callbacks\r\n         */\r\n        this._callbacks = ContainerData._prepareObjectCallbacks(callbacks);\r\n        this.clear();\r\n    }\r\n\r\n    /**\r\n     * Add values to container\r\n     * @param {array|object} data\r\n     * @param {string} value\r\n     * @param {boolean} customData - Data was added programmatically\r\n     */\r\n    addData(data, value, customData = false){\r\n        this._data = ContainerData.wrapListElements(\r\n            ContainerData.validateData(data),\r\n            this._idParent\r\n        );\r\n        this._value = value;\r\n        this._customData = customData;\r\n        this._date = Date.now();\r\n        this._actionData = this._data.slice(0);\r\n        this.activeKey = 'clear';\r\n    }\r\n\r\n    saveActionData(data){\r\n        this._actionData = data;\r\n    }\r\n\r\n    clear(){\r\n        this.addData([], '');\r\n    }\r\n\r\n    checkCustomData(){\r\n        return this._customData;\r\n    }\r\n\r\n    getData(startedData = true, type = 'typical'){\r\n\r\n        const data = startedData ? this._data : this._actionData;\r\n\r\n        switch (type){\r\n            case 'clear':\r\n                return ContainerData.unWrapListElement(data);\r\n            case 'keyId':\r\n                return data.reduce((acc, cur) => {\r\n                    acc[cur.key] = cur;\r\n                    return acc;\r\n                }, {});\r\n            default:\r\n                return data;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get data\r\n     * @param {string} key\r\n     * @param {boolean} full\r\n     * @return {Object|undefined}\r\n     */\r\n    getDataByKey(key, full = false){\r\n        let data = this.getData(false, 'keyId')[key];\r\n        return typeof data !== 'undefined'\r\n            ? full\r\n                ? data\r\n                : data['data']\r\n            : undefined;\r\n    }\r\n\r\n    /**\r\n     * Getter key hover\r\n     * @returns {string}\r\n     */\r\n    get hoveredKey(){\r\n        return getActionKey('hover', this._actionData);\r\n    }\r\n\r\n    /**\r\n     * Setter key hover\r\n     * @param {string} key\r\n     */\r\n    set hoveredKey(key){\r\n        this._setAction(key, 'hover');\r\n    }\r\n\r\n    /**\r\n     * Getter key active\r\n     * @returns {string}\r\n     */\r\n    get activeKey(){\r\n        return getActionKey('active', this._actionData);\r\n    }\r\n\r\n    /**\r\n     * Setter key active\r\n     * @param {string} key\r\n     */\r\n    set activeKey(key){\r\n        this._setAction(key, 'active');\r\n    }\r\n\r\n    _setAction(key, nameAction){\r\n        if (key === 'clear'){\r\n            clearAction(nameAction, this._actionData);\r\n            this._runCbOnName(nameAction, key);\r\n            return;\r\n        }\r\n        if (this.checkKeyInActionData(key)){\r\n            clearAction(nameAction, this._actionData);\r\n            this.getData(false, 'keyId')[key][nameAction] = true;\r\n            this._runCbOnName(nameAction, key);\r\n        }\r\n    }\r\n\r\n    checkKeyInActionData(key){\r\n        return Object.keys(this.getData(false, 'keyId')).indexOf(key) !== -1;\r\n    }\r\n\r\n    static unWrapListElement(arrData){\r\n        return arrData.map(element => element.data);\r\n    }\r\n\r\n    static wrapListElements(arrData, idParent){\r\n        return arrData.map((data, i) => ContainerData.wrapElementList(data, idParent, i));\r\n    }\r\n\r\n    static wrapElementList(element, idParent, numb){\r\n        return {\r\n            data: element,\r\n            key: `${idParent}_${numb}`,\r\n            hover: false,\r\n            active: false\r\n        };\r\n    }\r\n\r\n    static validateData(data){\r\n        if (Array.isArray(data)){\r\n            return data;\r\n        } else {\r\n            if (data instanceof Object){\r\n                return Object.values(data);\r\n            } else {\r\n                throw new Error('Полученные данные не являются JSON-массивом.');\r\n            }\r\n        }\r\n    }\r\n\r\n    static repositionActiveToTop(arrData){\r\n        const info = getActionFullData('active', arrData);\r\n        let arrWork = arrData.slice(0);\r\n        if (info !== 'null' && arrData.length > 1 && info.index !== -1){\r\n            arrWork.unshift(...arrWork.splice(info.index,1));\r\n        }\r\n        return arrWork;\r\n    }\r\n\r\n    validateSaveDataForRequest(stringRequest, timeLiveSaveData){\r\n\r\n        const toLower = value => value.toLowerCase();\r\n\r\n        if (this._value === '' || toLower(stringRequest).indexOf(toLower(this._value)) === -1){\r\n            return false;\r\n        }\r\n\r\n        return Date.now() - this._date < timeLiveSaveData;\r\n    }\r\n\r\n    /**\r\n     * Get available name fields\r\n     * @return {string[]}\r\n     */\r\n    static get nameCbs(){\r\n        return ['active', 'hover'];\r\n    }\r\n\r\n    /**\r\n     * Check name on available callbacks\r\n     * @param name\r\n     * @return {boolean}\r\n     */\r\n    static checkNameInAvailableCbs(name){\r\n        return this.nameCbs.indexOf(name) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Start prepare objectCallbacks\r\n     * @param {Object.<string, function>} objectCallbacks\r\n     * @private\r\n     * @return {_callbacks}\r\n     */\r\n    static _prepareObjectCallbacks(objectCallbacks){\r\n        return this.nameCbs.reduce((acc, current) => {\r\n            if (typeof objectCallbacks[current] !== 'undefined'){\r\n                let cb = typeof objectCallbacks[current] === 'function' ? objectCallbacks[current] : false;\r\n                acc.set(current, {\r\n                    cb,\r\n                    activity: true\r\n                });\r\n            }\r\n            return acc;\r\n        }, new Map());\r\n    }\r\n\r\n    _runCbOnName(name, key){\r\n        if (this._checkActivityCallback(name)){\r\n            let cb = this._callbacks.get(name)['cb'];\r\n            cb(key);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Disable runs callbacks with name\r\n     * @param {string} name\r\n     */\r\n    setInactivityCallback(name){\r\n        if (ContainerData.checkNameInAvailableCbs(name)){\r\n            this._callbacks.get(name)['activity'] = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Able runs callbacks with name\r\n     * @param {string} name\r\n     */\r\n    setActivityCallback(name){\r\n        if (ContainerData.checkNameInAvailableCbs(name)) {\r\n            this._callbacks.get(name)['activity'] = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check activity run callback with name\r\n     * @param name\r\n     * @return {boolean}\r\n     * @private\r\n     */\r\n    _checkActivityCallback(name){\r\n        return this._callbacks.get(name)['activity'];\r\n    }\r\n}\r\n\r\nconst getActionKeyIndex = (nameAction, arr) => {\r\n\r\n    let indexArr = -1;\r\n\r\n    arr.some((element, index) => {\r\n        if (element[nameAction]){\r\n            indexArr = index;\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n\r\n    return indexArr;\r\n};\r\n\r\nconst getActionKey = (nameAction, arr) => {\r\n    let index = getActionKeyIndex(nameAction, arr);\r\n    return index !== -1 ? arr[index]['key'] : 'null';\r\n};\r\n\r\nconst getActionFullData = (nameAction, arr) => {\r\n    let index = getActionKeyIndex(nameAction, arr);\r\n    return index !== -1 ? {data: arr[index], index} : 'null';\r\n};\r\n\r\nconst clearAction = (nameAction, arr) => {\r\n    arr.forEach(element => {\r\n        element[nameAction] = false;\r\n    });\r\n};\r\n\r\nexport default ContainerData;","class CustomError extends Error{\r\n    constructor(message){\r\n        super(message);\r\n        this.name = 'CustomError';\r\n        this.message = message;\r\n    }\r\n}\r\n\r\nexport {CustomError};","import {CustomError} from './CustomError.js';\r\n\r\nclass PropertyError extends CustomError{\r\n    constructor(property){\r\n        super('Ошибка в свойстве ' + property);\r\n        this.property = property;\r\n    }\r\n}\r\n\r\nexport default PropertyError;","import {PropertyError} from './Errors/PropertyError.js';\r\n\r\n/**\r\n * Symbol for incapsulated Map with events\r\n * @type {symbol}\r\n */\r\nconst protectedRecordsEventSave = Symbol('protectedRecordsEventSave');\r\n\r\nclass EventSave{\r\n\r\n    constructor(rootDomElement = false){\r\n        /**\r\n         *\r\n         * @type {Map}\r\n         */\r\n        this[protectedRecordsEventSave] = new Map();\r\n        if (rootDomElement !== false && rootDomElement instanceof HTMLElement){\r\n            this.rootDomElement = rootDomElement;\r\n        } else {\r\n            this.rootDomElement = null;\r\n        }\r\n    }\r\n\r\n    addRecord(name, domElement, events, fn, protectedStatus = false){\r\n        if (!this[protectedRecordsEventSave].has(name)){\r\n            domElement.addEventListener(events, fn);\r\n            this[protectedRecordsEventSave].set(name, {\r\n                domElement,\r\n                events,\r\n                fn,\r\n                protectedStatus\r\n            });\r\n        } else {\r\n            throw new PropertyError(name);\r\n        }\r\n    }\r\n\r\n    addCustomRecord(name, events, fn){\r\n        if (this.rootDomElement !== null){\r\n            this.addRecord(name, this.rootDomElement, events, fn);\r\n        }\r\n    }\r\n\r\n    getRecordByName(name){\r\n        return this[protectedRecordsEventSave].get(name);\r\n    }\r\n\r\n    addListRecords(arrInfo){\r\n        arrInfo.forEach((recordInfo) => {\r\n            recordInfo[Symbol.iterator] = function* () {\r\n                yield this.name;\r\n                yield this.domElement;\r\n                yield this.events;\r\n                yield this.fn;\r\n                yield this.protectedStatus;\r\n            };\r\n            this.addRecord(...recordInfo);\r\n        });\r\n    }\r\n\r\n    removeRecord(name, removeProtected = false){\r\n        let record = this.getRecordByName(name);\r\n        if (removeProtected === true || record.protectedStatus === false){\r\n            record.domElement.removeEventListener(record.events, record.fn);\r\n            this[protectedRecordsEventSave].delete(name);\r\n        } else {\r\n            throw new PropertyError(name);\r\n        }\r\n    }\r\n\r\n    removeAllRecords(){\r\n        this[protectedRecordsEventSave].forEach((record, name) => {\r\n            this.removeRecord(name, true);\r\n        });\r\n    }\r\n}\r\n\r\nexport default EventSave;","import InputWithSearchWindow from './InputWithSearchWindow';\r\nimport InputWithSearchForWindow from './InputWithSearchForWindow';\r\nimport funcs from '../functions/functions';\r\nimport EventSave from './EventSave';\r\nimport weakMapIWS from '../functions/weakMapIWS';\r\nimport ContainerData from './ContainerData';\r\nimport {readOnly} from '../functions/decorators';\r\n\r\nclass InputWithSearch{\r\n\r\n    constructor(domElement, settings = {}){\r\n\r\n        this._domElement = domElement;\r\n        this.settings = InputWithSearch.settings;\r\n        this.updateSettings(settings);\r\n        this.createCustomContainer();\r\n\r\n        this.fireEventAndCallback('inputWithSearch_beforeInit');\r\n\r\n        this.waitData = false;\r\n        this.xhr = false;\r\n        this.promiseXhr = false;\r\n\r\n        this.savesData = new ContainerData(this.id, {\r\n            active: (key) => {\r\n                this.fireEventAndCallback('inputWithSearch_changeActive', {key});\r\n            },\r\n            hover: (key) => {\r\n                this.fireEventAndCallback('inputWithSearch_changeHover', {key});\r\n            }\r\n        });\r\n        this.savesData.addData([], this.getValueFromInput());\r\n\r\n        this.changeStatus([0]);\r\n        this.getWorkDomElement().classList.add(...this.getClassesByKey('input'));\r\n\r\n        this.addEventListeners();\r\n\r\n        this.wasFirstLoad = false;\r\n\r\n        InputWithSearch.addAttrToDomInput(this.getWorkDomElement());\r\n\r\n        this.fireEventAndCallback('inputWithSearch_afterInit');\r\n    }\r\n\r\n    getWorkDomElement(useInitDomImportant = false){\r\n        return useInitDomImportant || !checkDomElement(this.settings.delegateElement)\r\n            ? this._domElement\r\n            : this.settings.delegateElement;\r\n    }\r\n\r\n    @readOnly\r\n    id = 'IWS-' + InputWithSearch._counter();\r\n\r\n    static _counter(){\r\n        if (typeof this.counter === 'undefined'){\r\n            this.counter = -1;\r\n        }\r\n        this.counter += 1;\r\n        return this.counter;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @return {EventSave}\r\n     */\r\n    getListeners(){\r\n        return this.listeners;\r\n    }\r\n\r\n    addEventListeners(){\r\n\r\n        let listeners = this.getListeners();\r\n        let domElement = this.getWorkDomElement();\r\n\r\n        if (typeof listeners !== 'undefined' && listeners instanceof EventSave){\r\n            listeners.removeAllRecords();\r\n        }\r\n\r\n        listeners = new EventSave(this.getWorkDomElement(true));\r\n\r\n        let onEvents = this.settings.onEvents;\r\n\r\n        switch (onEvents){\r\n            case 'input':\r\n                listeners.addListRecords([\r\n                    {\r\n                        name: 'onEvents',\r\n                        domElement: domElement,\r\n                        events: this.settings.onEvents,\r\n                        fn: () => {\r\n                            this.open();\r\n                        },\r\n                        protectedStatus: true\r\n                    }\r\n                ]);\r\n                break;\r\n            case 'click':\r\n                listeners.addListRecords([\r\n                    {\r\n                        name: 'onEvents',\r\n                        domElement: domElement,\r\n                        events: this.settings.onEvents,\r\n                        fn: () => {\r\n                            if (this.checkStatus(0)){\r\n                                this.open();\r\n                            } else {\r\n                                this.close();\r\n                            }\r\n                        },\r\n                        protectedStatus: true\r\n                    }\r\n                ]);\r\n                break;\r\n            case 'hover': {\r\n\r\n                let timerHover = null;\r\n\r\n                const timerHoverFn = () => {\r\n                    clearTimeout(timerHover);\r\n                    timerHover = setTimeout(() => {\r\n                        this.close();\r\n                    }, 50);\r\n                };\r\n\r\n                listeners.addListRecords([\r\n                    {\r\n                        name: 'openWrapperHover',\r\n                        domElement: domElement,\r\n                        events: 'inputWithSearch_afterOpen',\r\n                        fn: () => {\r\n                            clearTimeout(timerHover);\r\n                            let wrapper = this.inputWithSearchWindow.getElementByKey('wrapper');\r\n                            let listenersWrapper = this.inputWithSearchWindow.listeners;\r\n                            listenersWrapper.addRecord(\r\n                                'mouseLeaveWrapperHover',\r\n                                wrapper,\r\n                                'mouseleave',\r\n                                timerHoverFn,\r\n                                true\r\n                            );\r\n                            listenersWrapper.addRecord(\r\n                                'mouseEnterWrapperHover',\r\n                                wrapper,\r\n                                'mouseenter',\r\n                                () => {\r\n                                    clearTimeout(timerHover);\r\n                                },\r\n                                true\r\n                            );\r\n                        },\r\n                        protectedStatus: true\r\n                    },\r\n                    {\r\n                        name: 'onEvents',\r\n                        domElement: domElement,\r\n                        events: 'mouseenter',\r\n                        fn: () => {\r\n                            if (this.checkStatus(0)){\r\n                                this.open();\r\n                            }\r\n                            if (this.checkStatus(1)){\r\n                                clearTimeout(timerHover);\r\n                            }\r\n                        },\r\n                        protectedStatus: true\r\n                    }, {\r\n                        name: 'mouseLeaveElement',\r\n                        domElement: domElement,\r\n                        events: 'mouseleave',\r\n                        fn: timerHoverFn,\r\n                        protectedStatus: true\r\n                    }\r\n                ]);\r\n                break;\r\n            }\r\n            default:\r\n                console.warn('Параметр onEvents заполнен неверно!');\r\n        }\r\n\r\n        this.listeners = listeners;\r\n    }\r\n\r\n    removeEventListeners(){\r\n        this.listeners.removeAllRecords();\r\n    }\r\n\r\n    static addAttrToDomInput(input){\r\n        input.autocomplete = 'off';\r\n    }\r\n\r\n    getValueFromInput(){\r\n        let HTMLElement = this.getWorkDomElement();\r\n        if (typeof this.settings.fns.fnGetValueFromInput === 'function'){\r\n            return this.settings.fns.fnGetValueFromInput.call(null, HTMLElement);\r\n        }\r\n        if (checkDomOnInput(HTMLElement)){\r\n            return HTMLElement.value;\r\n        }\r\n        return HTMLElement.textContent;\r\n    }\r\n\r\n    setValueToInput(value){\r\n        let HTMLElement = this.getWorkDomElement();\r\n        if (typeof this.settings.fns.fnSetValueToInput === 'function'){\r\n            this.settings.fns.fnSetValueToInput.call(null, HTMLElement, value);\r\n            return;\r\n        }\r\n        if (checkDomOnInput(HTMLElement)){\r\n            HTMLElement.value = value;\r\n            return;\r\n        }\r\n        HTMLElement.textContent = value;\r\n    }\r\n\r\n    updateSettings(newSettings){\r\n\r\n        let classes = false;\r\n\r\n        if ('classes' in newSettings && typeof newSettings['classes'] === 'object'){\r\n            classes = funcs.mergeListArraysWithoutDuplicates(this.settings.classes, newSettings['classes']);\r\n        }\r\n\r\n        this.settings = funcs.extend(true, {}, this.settings, newSettings);\r\n        /* Update classes */\r\n        if (classes){\r\n            this.settings.classes = classes;\r\n        }\r\n        /* end update classes */\r\n    }\r\n\r\n    changeStatus(addStatuses = [], removeStatuses = []){\r\n        if (typeof this.status === 'undefined'){\r\n            this.status = new window.Set();\r\n        }\r\n        addStatuses.forEach((status) => {\r\n            if (status in InputWithSearch.statuses){\r\n                this.status.add(status);\r\n            }\r\n        });\r\n        removeStatuses.forEach((status) => {\r\n            if (status in InputWithSearch.statuses){\r\n                this.status.delete(status);\r\n            }\r\n        });\r\n    }\r\n\r\n    checkStatus(idStatus){\r\n        return this.status.has(idStatus);\r\n    }\r\n\r\n    fnOnEventFire(value = false){\r\n\r\n        this.changeStatus([], [2, 3]);\r\n\r\n        let HTMLElement = this.getWorkDomElement();\r\n        let domElementIsInput = checkDomOnInput(HTMLElement);\r\n\r\n        if (value === false){\r\n            value = HTMLElement.value;\r\n        }\r\n\r\n        if (domElementIsInput === false || value.length >= this.settings.lengthStringToOutput){\r\n\r\n            let savesData = this.savesData;\r\n\r\n            if (savesData.checkCustomData()){\r\n                this.constructList();\r\n            } else {\r\n                let needLoad = true;\r\n\r\n                if (this.settings.useCache && this.settings.loadOnlyStart){\r\n                    needLoad = !this.wasFirstLoad;\r\n                } else {\r\n\r\n                    let validCache = savesData.validateSaveDataForRequest(\r\n                        value,\r\n                        this.settings.timeLiveSaveData\r\n                    );\r\n\r\n                    needLoad = !this.settings.useCache || !validCache;\r\n                }\r\n\r\n                if (needLoad){\r\n                    this.loadData();\r\n                } else {\r\n                    this.constructList();\r\n                }\r\n            }\r\n        } else {\r\n            this.stopLoadData();\r\n            this.setToMessage('lessSymbols', [this.settings.lengthStringToOutput]);\r\n        }\r\n    }\r\n\r\n    stopLoadData(removeStatus = true){\r\n        clearTimeout(this.waitData);\r\n        if (removeStatus){\r\n            this.changeStatus([], [2]);\r\n        }\r\n        if (typeof this.xhr === 'object'){\r\n            this.xhr.abort();\r\n        }\r\n    }\r\n\r\n    constructList(){\r\n\r\n        this._allFilterAndSortProcess();\r\n\r\n        let data = this.savesData.getData(false);\r\n\r\n        if (data.length){\r\n\r\n            this.fireEventAndCallback('inputWithSearch_beforeListAddDom');\r\n            this.inputWithSearchWindow.addListElements(data, this.getValueFromInput(), this.settings.repositionActiveToTop);\r\n            this.fireEventAndCallback('inputWithSearch_afterListAddDom');\r\n\r\n            return;\r\n        }\r\n\r\n        this.setToMessage('notFind');\r\n    }\r\n\r\n    _allFilterAndSortProcess(){\r\n\r\n        const sliceData = (arr, maxLength) => {\r\n            return arr.length > maxLength\r\n                ? arr.slice(0, maxLength)\r\n                : arr;\r\n        };\r\n\r\n        let savesData = this.savesData;\r\n        let data = savesData.getData();\r\n        let value = this.getValueFromInput();\r\n\r\n        if (this.settings.maxViewElements < data.length){\r\n            data = sliceData(data, this.settings.maxViewElements);\r\n        }\r\n\r\n        if (typeof this.settings.fns.filterData === 'function'){\r\n            data = data.filter((elemData) => {\r\n                return this.settings.fns.filterData(elemData, value);\r\n            });\r\n        }\r\n\r\n        if (this.settings.repositionActiveToTop === true){\r\n            data = ContainerData.repositionActiveToTop(data);\r\n        }\r\n\r\n        savesData.saveActionData(data);\r\n\r\n        this.fireEventAndCallback('inputWithSearch_onUpdateDataView');\r\n    }\r\n\r\n    onLoadData(data, value){\r\n\r\n        const dataSort = JSON.parse(data);\r\n\r\n        this.savesData.addData(dataSort, value);\r\n        this.constructList();\r\n        if (this.wasFirstLoad === false){\r\n            this.wasFirstLoad = true;\r\n        }\r\n    }\r\n\r\n    loadData(){\r\n        this.stopLoadData(false);\r\n        this.waitData = setTimeout(async () => {\r\n            this.setToWait();\r\n            try{\r\n                this.promiseXhr = this.request(this.settings.ajaxConfig.url);\r\n                const value = this.getValueFromInput();\r\n                const data = await this.promiseXhr;\r\n                this.onLoadData(data, value);\r\n            } catch (e){\r\n                if (e === 0){\r\n                    this.setToError(new Error('Данные не были получены!'));\r\n                } else {\r\n                    throw e;\r\n                }\r\n            } finally {\r\n                this.changeStatus([], [2]);\r\n            }\r\n        }, this.settings.delayBeforeSendRequest);\r\n    }\r\n\r\n    request(url) {\r\n        return new window.Promise((resolve, reject) => {\r\n            const xhr = this.xhr = new window.XMLHttpRequest();\r\n            xhr.onload = function() {\r\n                resolve(xhr.response);\r\n            };\r\n            xhr.timeout = this.settings.ajaxConfig.timeout;\r\n            xhr.onerror = function () {\r\n                reject(xhr.status);\r\n            };\r\n\r\n            xhr.open(this.settings.ajaxConfig.type, url + this.generateGetParams(), true);\r\n\r\n            xhr.send(InputWithSearch.prepareAjaxSendData(this.settings.ajaxConfig.data));\r\n        });\r\n    }\r\n\r\n    generateGetParams(){\r\n        const fn = this.settings.fns.generateGetParams;\r\n        return typeof fn === 'function' ? '?' + fn(this) : '';\r\n    }\r\n\r\n    static prepareAjaxSendData(data){\r\n\r\n        let sendData = data;\r\n\r\n        if (typeof sendData === 'function'){\r\n            sendData = sendData();\r\n        }\r\n\r\n        if (sendData !== null){\r\n            sendData = typeof sendData === 'string' ? sendData : Object.keys(sendData).map(\r\n                function(k){ return encodeURIComponent(k) + '=' + encodeURIComponent(sendData[k]); }\r\n            ).join('&');\r\n        }\r\n\r\n        return sendData;\r\n    }\r\n\r\n    getClassesByKey(key, join = false){\r\n        let classes = this.settings.classes[key];\r\n        return join ? classes.join(' ') : classes;\r\n    }\r\n\r\n    static get statuses(){\r\n        return {\r\n            0: 'close',\r\n            1: 'open',\r\n            2: 'waiting data',\r\n            3: 'error'\r\n        };\r\n    }\r\n\r\n    open(){\r\n\r\n        let checkWindow = window.inputWithSearchWindow instanceof InputWithSearchWindow,\r\n            checkOpen = this.checkStatus(1);\r\n\r\n        if (!checkOpen){\r\n            let HTMLElement = this.getWorkDomElement();\r\n            this.fireEventAndCallback('inputWithSearch_beforeOpen');\r\n            if (checkWindow){\r\n                window.inputWithSearchWindow.destructor();\r\n            }\r\n            window.inputWithSearchWindow =\r\n                this.inputWithSearchWindow =\r\n                    new InputWithSearchWindow(\r\n                        this.getWorkDomElement(true),\r\n                        this.configForInitSearchWindow\r\n                    );\r\n            InputWithSearch.setInputActive(HTMLElement, true);\r\n            this.changeStatus([1], [0]);\r\n        }\r\n        this.fnOnEventFire();\r\n        this.fireEventAndCallback('inputWithSearch_afterOpen');\r\n    }\r\n\r\n    get configForInitSearchWindow(){\r\n\r\n        const getClassesFromSettings = (classes) => {\r\n            const classesWindow = InputWithSearchWindow.classesBase;\r\n            return Object.keys(classes).reduce((acc, nameElement) => {\r\n                if (nameElement in classesWindow){\r\n                    acc[nameElement] = classes[nameElement];\r\n                }\r\n                return acc;\r\n            }, {});\r\n        };\r\n\r\n        const getNeedConstructors = (constructors) => {\r\n            return Object.entries(constructors).reduce((object, data) => {\r\n                let [key, value] = data;\r\n                if (typeof value === 'function'){\r\n                    object[key] = value;\r\n                }\r\n                return object;\r\n            }, {});\r\n        };\r\n\r\n        return {\r\n            callbacks: {\r\n                inputWithSearchWindow_destruction: () => {\r\n                    this.close(true, false);\r\n                },\r\n                inputWithSearchWindow_clickOnElementList: (objectWindow, domElement) => {\r\n                    const key = domElement.getAttribute('data-key');\r\n                    let configForEvent = this._setActiveByKeyFromList(key);\r\n                    this.fireEventAndCallback('inputWithSearch_onClickOption', configForEvent);\r\n                    this.close();\r\n                },\r\n                inputWithSearchWindow_changeContent: (...args) => {\r\n                    this.fireEventAndCallback('inputWithSearch_onChangeWindow', args);\r\n                }\r\n            },\r\n            classes: getClassesFromSettings(this.settings.classes),\r\n            constructors: getNeedConstructors(this.settings.constructors),\r\n            cssParams: this.settings.cssParamsWindow,\r\n            cssCallbacks: this.settings.cssCallbacksWindow,\r\n            triangle: this.settings.triangle,\r\n            baseEventsActive: this.settings.baseWindowEventsActive,\r\n            closeBtn: this.settings.closeBtn\r\n        };\r\n    }\r\n\r\n    _setActiveByKeyFromList(key){\r\n\r\n        const data = this.getDataFromLastDataByKey(key);\r\n        const inputValue = this.getValueFromInput();\r\n\r\n        this.setValueToInput(\r\n            this.settings.fns.dataToInputByClick(\r\n                data\r\n            )\r\n        );\r\n\r\n        return {\r\n            data,\r\n            currentValue: this.getValueFromInput(),\r\n            lastValue: inputValue\r\n        };\r\n    }\r\n\r\n    getDataFromLastDataByKey(key){\r\n        return this.savesData.getData(false, 'keyId')[key];\r\n    }\r\n\r\n    close(runEvents = true, runDestructor = true){\r\n        if (this.checkStatus(1)){\r\n            if (runEvents) this.fireEventAndCallback('inputWithSearch_beforeClose');\r\n            this.changeStatus([0], [1]);\r\n            try {\r\n                if (runDestructor) window.inputWithSearchWindow.destructor();\r\n            } finally {\r\n                window.inputWithSearchWindow = null;\r\n            }\r\n            InputWithSearch.setInputActive(this.getWorkDomElement(), false);\r\n            if (runEvents) this.fireEventAndCallback('inputWithSearch_afterClose');\r\n        }\r\n    }\r\n\r\n    setToError(error){\r\n        this.changeStatus([3]);\r\n        this.fireEventAndCallback('inputWithSearch_onError', [error]);\r\n        this.inputWithSearchWindow.setToError(error.message, error);\r\n    }\r\n\r\n    fireEventAndCallback(name, data = {}){\r\n        if (name in InputWithSearch.getListCallbacksAndEvents()){\r\n\r\n            let caller = this.getWorkDomElement(true);\r\n            let inputWithSearch = {\r\n                object: this,\r\n                ...data\r\n            };\r\n\r\n            inputWithSearch[Symbol.iterator] = function* () {\r\n                yield this.object;\r\n                for (let key in this){\r\n                    if (this.hasOwnProperty(key)){\r\n                        if (key !== 'object'){\r\n                            yield this[key];\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n\r\n            let dataToOutput = {\r\n                inputWithSearch\r\n            };\r\n\r\n            funcs.callEvent(caller, name, dataToOutput);\r\n\r\n            let func = this.settings.callbacks[name];\r\n\r\n            if (typeof func === 'function'){\r\n                func(...inputWithSearch);\r\n            }\r\n        }\r\n    }\r\n\r\n    /* sets to */\r\n\r\n    setToWait(){\r\n        if (!this.checkStatus(2)){\r\n            this.changeStatus([2]);\r\n            this.inputWithSearchWindow.setToWait();\r\n        }\r\n    }\r\n\r\n    setToMessage(typeMessage, params = []){\r\n        let toOutput = [this.getValueFromInput(), ...params];\r\n        this.inputWithSearchWindow.setToMessage(typeMessage, toOutput);\r\n    }\r\n\r\n    /* end sets to */\r\n\r\n    destructor(){\r\n        this.fireEventAndCallback('inputWithSearch_beforeDestruction');\r\n        let HTMLElement = this.getWorkDomElement();\r\n        this.close();\r\n        this.removeEventListeners();\r\n        InputWithSearch.setInputActive(HTMLElement, false);\r\n        HTMLElement.classList.remove(...this.getClassesByKey('input'));\r\n        weakMapIWS.getDataWeakMapIWS(InputWithSearchForWindow.getInstance()).list.removeElement(HTMLElement);\r\n    }\r\n\r\n    static setInputActive(input, flag){\r\n        if (flag){\r\n            input.classList.add('InputWithSearch_active');\r\n            return;\r\n        }\r\n        input.classList.remove('InputWithSearch_active');\r\n    }\r\n\r\n    static get baseClasses(){\r\n        return {\r\n            input: ['InputWithSearch'],\r\n            bodyOpen: ['InputWithSearchOpen']\r\n        };\r\n    }\r\n\r\n    static getBaseClassesByKey(key){\r\n        return this.baseClasses[key];\r\n    }\r\n\r\n    static get htmlElementsClasses(){\r\n\r\n        const objectNotChangeable = {\r\n            configurable: true,\r\n            writable: false\r\n        };\r\n\r\n        const notChangeableKeys = ['input', 'bodyOpen'];\r\n\r\n        const generateObjectForChange = (keys, object) => {\r\n            return keys.reduce((acc, current) => {\r\n                acc[current] = object;\r\n                return acc;\r\n            }, {});\r\n        };\r\n\r\n        let voidClassWindowClasses = Object.keys(InputWithSearchWindow.classesBase).reduce((acc, current) => {\r\n            acc[current] = [];\r\n            return acc;\r\n        }, {});\r\n\r\n        let object = funcs.extend(\r\n            this.baseClasses,\r\n            voidClassWindowClasses\r\n        );\r\n\r\n        Object.defineProperties(object, generateObjectForChange(notChangeableKeys, objectNotChangeable));\r\n\r\n        return object;\r\n    }\r\n\r\n    /* for not downloaded data */\r\n\r\n    setCustomData(data){\r\n        this.savesData.addData(data, this.getValueFromInput(), true);\r\n    }\r\n\r\n    /* end for not downloaded data */\r\n\r\n    /* custom container */\r\n\r\n    createCustomContainer(){\r\n        this.customContainer = new Map();\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @return {Map}\r\n     */\r\n    getCustomContainer(){\r\n        return this.customContainer;\r\n    }\r\n\r\n    /* end custom container */\r\n\r\n    static getListCallbacksAndEvents(){\r\n        return {\r\n            'inputWithSearch_beforeInit': false,\r\n            'inputWithSearch_afterInit': false,\r\n            'inputWithSearch_beforeDestruction': false,\r\n            'inputWithSearch_onClickOption': false,\r\n            'inputWithSearch_beforeListAddDom': false,\r\n            'inputWithSearch_afterListAddDom': false,\r\n            'inputWithSearch_beforeOpen': false,\r\n            'inputWithSearch_afterOpen': false,\r\n            'inputWithSearch_beforeClose': false,\r\n            'inputWithSearch_afterClose': false,\r\n            'inputWithSearch_onError': false,\r\n            'inputWithSearch_onChangeWindow': false,\r\n            'inputWithSearch_onUpdateDataView': false,\r\n            'inputWithSearch_changeActive': false,\r\n            'inputWithSearch_changeHover': false\r\n        };\r\n    }\r\n\r\n    static get settings(){\r\n        return {\r\n            onEvents: 'input',\r\n            delayBeforeSendRequest: 300,\r\n            ajaxConfig: {\r\n                url: 'http://headers.jsontest.com/',\r\n                type: 'GET',\r\n                timeout: 10000,\r\n                data: null\r\n            },\r\n            callbacks: this.getListCallbacksAndEvents(),\r\n            constructors: {\r\n                element: false,\r\n                error: false,\r\n                lessSymbols: false,\r\n                notFind: false\r\n            },\r\n            fns: {\r\n                /**\r\n                 *\r\n                 * @param data\r\n                 * @return String\r\n                 */\r\n                dataToInputByClick: (data) => {\r\n                    return data.data;\r\n                },\r\n                fnSetValueToInput: false,\r\n                fnGetValueFromInput: false,\r\n                filterData: false,\r\n                generateGetParams: false\r\n            },\r\n            useCache: false,\r\n            loadOnlyStart: false,\r\n            maxViewElements: 50,\r\n            lengthStringToOutput: 4,\r\n            timeLiveSaveData: 60*60*1000,\r\n            classes: this.htmlElementsClasses,\r\n            data: false,\r\n            cssParamsWindow: InputWithSearchWindow.defaultCssParams,\r\n            cssCallbacksWindow: InputWithSearchWindow.cssCallbacks,\r\n            triangle: false,\r\n            closeBtn: false,\r\n            baseWindowEventsActive: {},\r\n            delegateElement: false,\r\n            repositionActiveToTop: true\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Set active data by first element function fire\r\n     * @param {function(object):boolean} cb\r\n     * @param {boolean} withRunEvent\r\n     */\r\n    setActive(cb, withRunEvent = true){\r\n        let changeKey = 'null';\r\n        let savesData = this.savesData;\r\n        savesData.getData(false).some(data => {\r\n            let result = cb(data.data);\r\n            if (result){\r\n                changeKey = data.key;\r\n            }\r\n            return result;\r\n        });\r\n        if (changeKey !== 'null'){\r\n            if (withRunEvent === false){\r\n                savesData.setInactivityCallback('active');\r\n            }\r\n            savesData.activeKey = changeKey;\r\n            this._setActiveByKeyFromList(changeKey);\r\n            if (this.checkStatus(1)){\r\n                this.inputWithSearchWindow.setElemListActiveByKey(changeKey, true);\r\n                this.inputWithSearchWindow.setElemListHoverByKey(changeKey, false);\r\n            }\r\n            if (withRunEvent === false){\r\n                savesData.setActivityCallback('active');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param key\r\n     * @param full\r\n     * @return {Object}\r\n     */\r\n    getDataByKey(key, full = false){\r\n        return this.savesData.getDataByKey(key, full);\r\n    }\r\n\r\n    getActiveKey(){\r\n        return this.savesData.activeKey;\r\n    }\r\n}\r\n\r\nconst checkDomElement = element => element instanceof HTMLElement;\r\n\r\nconst checkDomOnInput = (domElement) => {\r\n    return domElement.tagName === 'INPUT';\r\n} ;\r\n\r\nexport default InputWithSearch;","import ListInputWithSearch from './ListInputWithSearch';\r\nimport InputWithSearch from './InputWithSearch';\r\nimport PropertyError from './Errors/PropertyError';\r\nimport funcs from '../functions/functions';\r\nimport weakMapIWS from '../functions/weakMapIWS';\r\n\r\nclass InputWithSearchForWindow{\r\n\r\n    constructor() {\r\n\r\n        if (InputWithSearchForWindow.hasOwnProperty('singleton'))\r\n            return InputWithSearchForWindow.singleton;\r\n\r\n        Object.defineProperty(InputWithSearchForWindow, 'singleton', {\r\n            value: this,\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: false\r\n        });\r\n\r\n        /**\r\n         *\r\n         * @type {protectedFieldsIWS}\r\n         */\r\n        let protectedFields = {\r\n            list: new ListInputWithSearch(),\r\n            themes: new Map()\r\n        };\r\n\r\n        weakMapIWS.setDataWeakMapIWS(this, protectedFields);\r\n    }\r\n\r\n    /**\r\n     * Get example class InputWithsSearch from store\r\n     * @param {HTMLElement|string} domElement\r\n     * @param {object} objectConfig\r\n     * @param {string|string[]} themes\r\n     * @returns {InputWithSearch}\r\n     */\r\n    getElement(domElement, objectConfig = {}, themes = ''){\r\n\r\n        const checkIdFn = (someData) => {\r\n            if (typeof someData === 'string'){\r\n                return checkHTMLfn(document.getElementById(someData));\r\n            }\r\n            return false;\r\n        };\r\n\r\n        const checkHTMLfn = (someData) => {\r\n            return someData instanceof HTMLElement;\r\n        };\r\n\r\n        const getElemById = (stringId) => {\r\n            return checkIdFn(stringId) ? document.getElementById(stringId) : false;\r\n        };\r\n\r\n        const getListAvailableThemeConfig = () => {\r\n\r\n            let retObject = {};\r\n\r\n            if (themes !== ''){\r\n                if (!Array.isArray(themes)){\r\n                    themes = [themes];\r\n                }\r\n                let themesList = weakMapIWS.getDataWeakMapIWS(this).themes;\r\n\r\n                themes.reduce((acc, themeName) => {\r\n                    if (themesList.has(themeName)){\r\n                        acc[themeName] = themesList.get(themeName);\r\n                    }\r\n                    return acc;\r\n                }, retObject);\r\n            }\r\n            return retObject;\r\n        };\r\n\r\n        const classesArraysSlice = (themeClasses, objectClasses) => {\r\n            if (typeof themeClasses === 'object' && typeof objectClasses === 'object') {\r\n                let keysTheme = Object.keys(themeClasses),\r\n                    keysObject = Object.keys(objectClasses),\r\n                    summKeys =  [...new Set([...keysTheme,...keysObject])];\r\n                return summKeys.reduce((acc, key) => {\r\n                    let inTheme = key in themeClasses,\r\n                        inObject = key in objectClasses;\r\n                    if (inTheme && inObject) {\r\n                        acc[key] = [...new Set([...themeClasses[key], ...objectClasses[key]])];\r\n                        return acc;\r\n                    }\r\n                    acc[key] = inTheme ? themeClasses[key] : objectClasses[key];\r\n                    return acc;\r\n                }, {});\r\n            }\r\n            return {};\r\n        };\r\n\r\n        let element = checkHTMLfn(domElement)\r\n            ? domElement\r\n            : getElemById(domElement);\r\n\r\n        if (element !== false){\r\n\r\n            let list = weakMapIWS.getDataWeakMapIWS(this).list;\r\n\r\n            if (!list.hasElement(element)){\r\n                let availableThemeConfigs = Object.values(getListAvailableThemeConfig());\r\n                for (let objectTheme of availableThemeConfigs){\r\n                    let fn = objectTheme.fnRunBeforeStart;\r\n                    if (typeof fn === 'function'){\r\n                        fn.call(null, element);\r\n                    }\r\n                }\r\n                for (let objectTheme of availableThemeConfigs){\r\n                    let objectData = objectTheme.objectData;\r\n                    if (Object.keys(objectData).length){\r\n                        let classes = classesArraysSlice(objectData.classes, objectConfig.classes);\r\n                        objectConfig = funcs.extend(true, {}, objectData, objectConfig);\r\n                        objectConfig.classes = classes;\r\n                    }\r\n                }\r\n                let exemplar = new InputWithSearch(element, objectConfig);\r\n                list.addElement(element, exemplar);\r\n                for (let objectTheme of availableThemeConfigs){\r\n                    let fn = objectTheme.fnRunOnStart;\r\n                    if (typeof fn === 'function'){\r\n                        fn.call(null, exemplar);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return list.getElement(element);\r\n        }\r\n\r\n        throw new Error(`Нет валидного DOM-элемента для выдачи ${domElement}`);\r\n    }\r\n\r\n    /**\r\n     * Add theme for use in objects\r\n     * @param {string} name\r\n     * @param {object} objectData\r\n     * @param {function(InputWithSearch)} fnRunOnStart\r\n     * @param {function(HTMLElement)} fnRunBeforeStart\r\n     */\r\n    addTheme(name, objectData, fnRunOnStart, fnRunBeforeStart){\r\n\r\n        let themes = weakMapIWS.getDataWeakMapIWS(this).themes;\r\n\r\n        if (!themes.has(name)){\r\n            themes.set(name, {\r\n                objectData,\r\n                fnRunOnStart,\r\n                fnRunBeforeStart\r\n            });\r\n        } else {\r\n            throw new PropertyError(name);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @return {InputWithSearchForWindow}\r\n     */\r\n    static getInstance(){\r\n        return this.singleton;\r\n    }\r\n\r\n}\r\n\r\nexport default InputWithSearchForWindow;","import EventSave from './EventSave';\r\nimport funcs from '../functions/functions';\r\n\r\nclass InputWithSearchWindow{\r\n\r\n    constructor(dependElement, settings){\r\n\r\n        this.settings = InputWithSearchWindow.defaultSettings;\r\n        this.updateSettings(settings);\r\n\r\n        this.addToDomWindow();\r\n        this.addElementsToConfig();\r\n        this.addListeners();\r\n        this.dependElement = dependElement;\r\n        this.setBlockHoverSelected();\r\n\r\n        this.setStatus();\r\n\r\n        this.reSetPosition();\r\n    }\r\n\r\n    addToDomWindow(){\r\n        document.body.appendChild(this.constructorDOM());\r\n    }\r\n\r\n    constructorDOM(){\r\n        let content = this.constructorTriangle() + `\r\n                <div class=\"${this.getClassesByKey('wrapperSub', true)}\">\r\n                    <div class=\"${this.getClassesByKey('wrapperInner', true)}\">\r\n                        <div class=\"${this.getClassesByKey('wrapperList', true)}\"></div>\r\n                        ${this.constructorCloseBtn()}\r\n                    </div>\r\n                </div>\r\n            `;\r\n        let wrapper = document.createElement('div');\r\n        wrapper.classList.add(...this.getClassesByKey('wrapper'));\r\n        wrapper.innerHTML = content;\r\n\r\n        return wrapper;\r\n    }\r\n\r\n    constructorCloseBtn(){\r\n        let closeBtn = this.settings.closeBtn;\r\n\r\n        if (closeBtn){\r\n            return `<div class=\"${this.getClassesByKey('wrapperCloseBtn', true)}\"></div>`;\r\n        }\r\n        return '';\r\n\r\n    }\r\n\r\n    constructorTriangle(){\r\n        let triangle = this.settings.triangle;\r\n\r\n        if (triangle){\r\n            return `\r\n                <div class=\"${this.getClassesByKey('wrapperTriangle', true)}\"></div>\r\n            `;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    addElementsToConfig(){\r\n        this.elements = {};\r\n        for (let nameElement of Object.keys(InputWithSearchWindow.classesBase)){\r\n            this.addElementToConfig(nameElement);\r\n        }\r\n\r\n        this.addMutationObserver();\r\n    }\r\n\r\n    /* mutation observer on change content in list */\r\n\r\n    addMutationObserver(){\r\n\r\n        let observer = new MutationObserver((mutations) => {\r\n            this.fireEventAndCallback('inputWithSearchWindow_changeContent', {mutations});\r\n        });\r\n\r\n        let config = { childList: true };\r\n\r\n        observer.observe(this.getElementByKey('wrapperList'), config);\r\n\r\n        this.observerList = observer;\r\n    }\r\n\r\n    removeMutationObserver(){\r\n        this.observerList.disconnect();\r\n    }\r\n\r\n    /* end mutation observer on change content in list */\r\n\r\n    addElementToConfig(nameElement){\r\n        const classes = InputWithSearchWindow.classesBase[nameElement][0];\r\n        this.elements[nameElement] = document.querySelector('.' + classes);\r\n    }\r\n\r\n    getElementByKey(key){\r\n        return this.elements[key];\r\n    }\r\n\r\n    addInfoToList(htmlToList, plus = false){\r\n        if (plus){\r\n            this.getElementByKey('wrapperList').innerHTML = this.getElementByKey('wrapperList').innerHTML + htmlToList;\r\n            return;\r\n        }\r\n        this.getElementByKey('wrapperList').innerHTML = htmlToList;\r\n    }\r\n\r\n    destructor(){\r\n        this.fireEventAndCallback('inputWithSearchWindow_destruction');\r\n        this.removeListeners();\r\n        this.removeMutationObserver();\r\n        this._setHoveredKey('clear');\r\n        this.destructorDOM();\r\n    }\r\n\r\n    fireEventAndCallback(name, data = {}){\r\n\r\n        if (name in InputWithSearchWindow.listCallbacksAndEvents){\r\n            let caller = this.elements.wrapper;\r\n            let dataToOutput = {\r\n                inputWithSearchWindow: {\r\n                    object: this,\r\n                    data\r\n                }\r\n            };\r\n            funcs.callEvent(caller, name, {\r\n                inputWithSearchWindow: this\r\n            });\r\n            let func = this.settings.callbacks[name];\r\n            if (typeof func === 'function'){\r\n                func(...Object.values(dataToOutput.inputWithSearchWindow));\r\n            }\r\n        }\r\n    }\r\n\r\n    destructorDOM(){\r\n        let element = this.getElementByKey('wrapper');\r\n        element.parentNode.removeChild(element);\r\n    }\r\n\r\n    addListeners(){\r\n\r\n        const setTimeoutOnBlockSelected = (timer, winSh, time = 200) => {\r\n            clearTimeout(timer);\r\n            winSh.setBlockHoverSelected(true);\r\n            return setTimeout(() => {\r\n                winSh.setBlockHoverSelected(false);\r\n            }, time);\r\n        };\r\n\r\n        this.timerWaitToBlockHoverSelected = false;\r\n\r\n        this.listeners = new EventSave();\r\n        let wrapper = this.elements.wrapper;\r\n        const elemListClass = InputWithSearchWindow.getClassesBaseByKey('elementList')[0];\r\n\r\n        let baseEventsActive = this.settings.baseEventsActive;\r\n        const eventsArr = [\r\n            {\r\n                name: 'clickElement',\r\n                domElement: wrapper,\r\n                events: 'click',\r\n                fn: (event) => funcs.delegateFn(event, elemListClass, (e, elem) => {\r\n                    this.setElemListActiveByKey( InputWithSearchWindow._getKeyAttrFromDomElement(elem) );\r\n                    this.fireEventAndCallback('inputWithSearchWindow_clickOnElementList', elem);\r\n                }),\r\n                protectedStatus: true\r\n            },\r\n            {\r\n                name: 'resize',\r\n                domElement: window,\r\n                events: 'resize',\r\n                fn: () => {\r\n                    this.reSetPosition();\r\n                },\r\n                protectedStatus: true\r\n            },\r\n            {\r\n                name: 'clickOuter',\r\n                domElement: document,\r\n                events: 'click',\r\n                fn: (event) => {\r\n                    if (event.target.closest(`.${this.getClassesByKey('wrapper')}, .InputWithSearch`)){\r\n                        return;\r\n                    }\r\n                    this.destructor();\r\n                },\r\n                protectedStatus: true\r\n            },\r\n            {\r\n                name: 'mouseEnterElement',\r\n                domElement: wrapper,\r\n                events: 'mouseover',\r\n                fn: (e) => funcs.delegateFn(e, elemListClass, (e, elem) => {\r\n                    if (!this.checkBlockHoverSelected()){\r\n                        this._setElemListHover(elem);\r\n                    }\r\n                }),\r\n                protectedStatus: true\r\n            },\r\n            {\r\n                name: 'interceptionEvents',\r\n                domElement: document,\r\n                events: 'keydown',\r\n                fn: (event) => {\r\n\r\n                    let windowSh = this;\r\n                    let relativeClass = this.getRelativeObject();\r\n\r\n\r\n                    if (relativeClass.checkStatus(1)){\r\n\r\n                        const down = event.keyCode === 40;\r\n                        const up = event.keyCode === 38;\r\n                        const enter = event.keyCode === 13;\r\n\r\n                        if ((up || down) && windowSh.checkStatus()){\r\n                            event.preventDefault();\r\n                            this.timerWaitToBlockHoverSelected = setTimeoutOnBlockSelected(\r\n                                this.timerWaitToBlockHoverSelected,\r\n                                windowSh\r\n                            );\r\n                            if ( down ){\r\n                                windowSh.setElemListHoverByDirection();\r\n                            }\r\n                            if ( up ){\r\n                                windowSh.setElemListHoverByDirection(false);\r\n                            }\r\n                        }\r\n\r\n                        if (enter){\r\n\r\n                            const hoveredKey = windowSh._getHoveredKey();\r\n\r\n                            if (hoveredKey !== 'null'){\r\n                                this.setElemListActiveByKey( hoveredKey );\r\n                                relativeClass._setActiveByKeyFromList( hoveredKey );\r\n                            }\r\n\r\n                            relativeClass.close();\r\n                        }\r\n                    }\r\n                },\r\n                protectedStatus: true\r\n            }\r\n        ];\r\n\r\n        if (this.settings.closeBtn){\r\n            eventsArr.push({\r\n                name: 'closeBtnEvent',\r\n                domElement: this.getElementByKey('wrapperCloseBtn'),\r\n                events: 'click',\r\n                fn: () => {\r\n                    this.destructor();\r\n                },\r\n                protectedStatus: true\r\n            });\r\n        }\r\n\r\n        eventsArr.forEach((info) => {\r\n            let arrInfo = Object.values(info);\r\n            let name = arrInfo[0];\r\n            if (!(name in InputWithSearchWindow.baseEventsActive) || baseEventsActive[name] === true){\r\n                this.listeners.addRecord(...arrInfo);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @return {InputWithSearch}\r\n     */\r\n    getRelativeObject(){\r\n        return window.inputWithSearch.getElement(this.dependElement);\r\n    }\r\n\r\n    setElemListHoverByKey(key, withScroll = true){\r\n        if (this.checkStatus() && this._getList().checkKeyInActionData(key)){\r\n            const classes = this.getClassesByKey('elementList')[0];\r\n            let domElement = this.elements.wrapper.querySelector(`.${classes}[data-key=\"${key}\"]`);\r\n            if (domElement !== null){\r\n                this._setElemListHover(domElement, withScroll, key);\r\n            }\r\n        }\r\n    }\r\n\r\n    setElemListHoverByDirection(down = true){\r\n\r\n        let arrKeys = Object.keys(this.getDataForList(true));\r\n        let hoveredKey = this._getHoveredKey();\r\n        let index = arrKeys.indexOf(hoveredKey);\r\n\r\n        if (down){\r\n            if (hoveredKey === -1){\r\n                this.setElemListHoverByKey(arrKeys[0]);\r\n                return;\r\n            }\r\n            if (arrKeys[arrKeys.length - 1] === hoveredKey){\r\n                this.setElemListHoverByKey(hoveredKey);\r\n                return;\r\n            }\r\n            this.setElemListHoverByKey(arrKeys[index+1]);\r\n            return;\r\n        }\r\n        if (index === 0){\r\n            this._unHoveredElements();\r\n            this._setHoveredKey('clear');\r\n            return;\r\n        }\r\n        this.setElemListHoverByKey(arrKeys[index-1]);\r\n    }\r\n\r\n    _unHoveredElements(){\r\n        const classes = InputWithSearchWindow.getClassesBaseByKey('elementListHovered')[0];\r\n        this.elements.wrapper.querySelectorAll(`.${classes}`).forEach((element) => {\r\n            element.classList.remove(classes);\r\n        });\r\n    }\r\n\r\n    _setElemListHover(domListElement, withScroll = false, keyElement = false){\r\n\r\n        const key = typeof keyElement === 'string' ? keyElement : domListElement.getAttribute('data-key');\r\n        const classes = InputWithSearchWindow.getClassesBaseByKey('elementListHovered')[0];\r\n\r\n        if (key !== this._getHoveredKey()){\r\n\r\n            this._unHoveredElements();\r\n            this._setHoveredKey(key);\r\n\r\n            if (withScroll){\r\n                this.elements.wrapperInner.scrollTop = domListElement.offsetTop;\r\n            }\r\n        }\r\n\r\n        domListElement.classList.add(classes);\r\n    }\r\n\r\n    setElemListActiveByKey(key, updateOnlyDom = false, withScroll = true){\r\n\r\n        if (key !== 'null' && (key !== this._getActiveKey() || updateOnlyDom)){\r\n\r\n            const classes = InputWithSearchWindow.getClassesBaseByKey('elementListSelected')[0];\r\n\r\n            this._unActiveElements();\r\n            if (!updateOnlyDom){\r\n                this._setActiveKey(key);\r\n            }\r\n\r\n            let domElement = this._getDomElementByKey(key);\r\n\r\n            if (withScroll){\r\n                this.elements.wrapperInner.scrollTop = domElement.offsetTop;\r\n            }\r\n\r\n            domElement.classList.add(classes);\r\n        }\r\n    }\r\n\r\n    static _getKeyAttrFromDomElement(domElement){\r\n        return domElement.getAttribute('data-key');\r\n    }\r\n\r\n    _getDomElementByKey(key){\r\n        return this.elements.wrapper.querySelector(`[data-key=\"${key}\"]`);\r\n    }\r\n\r\n    _unActiveElements(){\r\n        const classes = InputWithSearchWindow.getClassesBaseByKey('elementListSelected')[0];\r\n        this.elements.wrapper.querySelectorAll(`.${classes}`).forEach((element) => {\r\n            element.classList.remove(classes);\r\n        });\r\n    }\r\n\r\n    setBlockHoverSelected(set = false){\r\n        this.blockHoverSelected = set;\r\n    }\r\n\r\n    checkBlockHoverSelected(){\r\n        return this.blockHoverSelected;\r\n    }\r\n\r\n    removeListeners(){\r\n        this.listeners.removeAllRecords();\r\n    }\r\n\r\n    updateSettings(newSettings){\r\n\r\n        let classes = false;\r\n\r\n        if ('classes' in newSettings){\r\n            classes = funcs.mergeListArraysWithoutDuplicates(this.settings.classes, newSettings['classes']);\r\n        }\r\n\r\n        this.settings = funcs.extend(true, {}, this.settings, newSettings);\r\n\r\n        if (classes){\r\n            this.settings.classes = classes;\r\n        }\r\n    }\r\n\r\n    getClassesByKey(key, join = false){\r\n        let classes = this.settings.classes[key];\r\n        return join ? classes.join(' ') : classes;\r\n    }\r\n\r\n    reSetPosition(){\r\n\r\n        let elem = this.getRelativeObject().getWorkDomElement();\r\n\r\n        if (isHidden(elem)) {\r\n            this.destructor();\r\n            return;\r\n        }\r\n\r\n        let cssParams = this.settings.cssParams;\r\n        let customFunctionForResizing = this.settings.cssCallbacks;\r\n        let {window: customFnResize, triangle: customFnRePositionTriangle} = customFunctionForResizing;\r\n\r\n        if (checkOnFunction(customFnResize)) {\r\n            customFnResize(elem, cssParams);\r\n        } else {\r\n            let elem_character = elem.getBoundingClientRect();\r\n            let scroll = window.pageYOffset || document.documentElement.scrollTop;\r\n            let style = this.elements.wrapper.style;\r\n            let width = elem_character.width;\r\n            let winWidth = window.innerWidth;\r\n            let [mTop, mRight, mBot, mLeft] = cssParams.margin;\r\n            let availablePlaceWidth = winWidth - mLeft - mRight;\r\n            let seekWidthTo = this.settings.cssParams.seekWidthTo;\r\n\r\n            if (seekWidthTo !== 'none') {\r\n                switch (seekWidthTo) {\r\n                    case 'max':\r\n                        width = cssParams.maxWidth;\r\n                        break;\r\n                    case 'min':\r\n                        width = cssParams.minWidth;\r\n                        break;\r\n                }\r\n            }\r\n\r\n            if (availablePlaceWidth < width) {\r\n                width = availablePlaceWidth;\r\n            }\r\n\r\n            if (width < cssParams.minWidth){\r\n                width = cssParams.minWidth;\r\n            }\r\n            if (width > cssParams.maxWidth){\r\n                width = cssParams.maxWidth;\r\n            }\r\n\r\n            let left = elem_character.left + (elem_character.width - width)/2;\r\n\r\n            if (left < mLeft){\r\n                left = mLeft;\r\n            }\r\n            if (winWidth - (left + width) < mRight){\r\n                left = winWidth - width - mRight;\r\n            }\r\n\r\n            style.top = scroll + elem_character.bottom - (scroll + document.body.getBoundingClientRect().top) + 'px';\r\n            style.left = Math.ceil(left) + 'px';\r\n            style.width = width + 'px';\r\n            style.position = 'absolute';\r\n            if (mTop > 0){\r\n                style.marginTop = mTop + 'px';\r\n            }\r\n            if (mBot > 0){\r\n                style.marginBottom = mBot + 'px';\r\n            }\r\n        }\r\n\r\n        let triangle = this.getElementByKey('wrapperTriangle');\r\n\r\n        if (triangle !== null) {\r\n\r\n            let elem_character = elem.getBoundingClientRect();\r\n            let window_character = this.elements.wrapper.getBoundingClientRect();\r\n\r\n            if (checkOnFunction(customFnRePositionTriangle)) {\r\n                customFnRePositionTriangle(triangle, elem, cssParams);\r\n            } else {\r\n                let leftTriangle = (elem_character.left - window_character.left) + elem_character.width/2\r\n                    - triangle.offsetWidth/2;\r\n                triangle.style.left = Math.ceil(leftTriangle) + 'px';\r\n            }\r\n        }\r\n    }\r\n\r\n    static get classesBase(){\r\n        return {\r\n            wrapper: ['InputWithSearchWindow'],\r\n            wrapperSub: ['InputWithSearchWindow-Sub'],\r\n            wrapperInner: ['InputWithSearchWindow-Inner'],\r\n            wrapperList: ['InputWithSearchWindow-List'],\r\n            wrapperTriangle: ['InputWithSearchWindow-Triangle'],\r\n            wrapperCloseBtn: ['InputWithSearchWindow-CloseBtn'],\r\n            elementList: ['InputWithSearchWindow-Element'],\r\n            elementListSelected: ['InputWithSearchWindow-Element_selected'],\r\n            elementListHovered: ['InputWithSearchWindow-Element_hovered'],\r\n            message: ['InputWithSearchWindow-Message'],\r\n            error: ['InputWithSearchWindow-Error']\r\n        };\r\n    }\r\n\r\n    static getClassesBaseByKey(key){\r\n        return this.classesBase[key];\r\n    }\r\n\r\n    static get listCallbacksAndEvents(){\r\n        return {\r\n            'inputWithSearchWindow_clickOnElementList': false,\r\n            'inputWithSearchWindow_destruction': false,\r\n            'inputWithSearchWindow_changeContent': false\r\n        };\r\n    }\r\n\r\n    static get defaultSettings(){\r\n        return {\r\n            classes: this.classesBase,\r\n            constructors: {\r\n                element: (data, value, fn) => fn(`Данные ${data} cо значением ${value}`),\r\n                error: errorText => errorText,\r\n                lessSymbols: (value, needSymbolsLength) => `Введите ${needSymbolsLength} или более символов.`,\r\n                notFind: (value) => `По запросу ${value} ничего не было найдено!.`\r\n            },\r\n            callbacks: this.listCallbacksAndEvents,\r\n            cssParams: this.defaultCssParams,\r\n            triangle: false,\r\n            closeBtn: false,\r\n            baseEventsActive: this.baseEventsActive\r\n        };\r\n    }\r\n\r\n    static get baseEventsActive(){\r\n        return {\r\n            mouseEnterElement: true,\r\n            interceptionEvents: true,\r\n            clickElement: true\r\n        };\r\n    }\r\n\r\n    static get defaultCssParams(){\r\n        return {\r\n            margin: [0, 10, 0, 10],\r\n            minWidth: 200,\r\n            maxWidth: 300,\r\n            seekWidthTo: 'none'\r\n        };\r\n    }\r\n\r\n    static get cssCallbacks() {\r\n        return {\r\n            window: 'standart',\r\n            triangle: 'standart'\r\n        };\r\n    }\r\n\r\n    setStatus(withData = false){\r\n        this.haveData = withData;\r\n    }\r\n\r\n    checkStatus(){\r\n        return this.haveData;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {ContainerData}\r\n     * @private\r\n     */\r\n    _getList(){\r\n        return this.getRelativeObject().savesData;\r\n    }\r\n\r\n    getDataForList(keys = false){\r\n        return this._getList().getData(false, keys === true ? 'keyId' : null);\r\n    }\r\n\r\n    _setHoveredKey(key){\r\n        this._getList().hoveredKey = key;\r\n    }\r\n\r\n    _getHoveredKey(){\r\n        return this._getList().hoveredKey;\r\n    }\r\n\r\n    _setActiveKey(key){\r\n        this._getList().activeKey = key;\r\n    }\r\n\r\n    _getActiveKey(){\r\n        return this._getList().activeKey;\r\n    }\r\n\r\n    addListElements(dataList, value, reposition = true){\r\n\r\n        this.addInfoToList('');\r\n        this.setStatus(true);\r\n\r\n        dataList\r\n            .forEach((dataElement, numb) => {\r\n                this.addInfoToList(\r\n                    InputWithSearchWindow.constructElement(\r\n                        dataElement,\r\n                        value,\r\n                        numb,\r\n                        this.settings.constructors['element'],\r\n                        this.getClassesByKey('elementList', true)\r\n                    ),\r\n                    true\r\n                );\r\n            });\r\n\r\n        const activeKey = this._getActiveKey();\r\n        const checkActiveKey = activeKey !== 'null';\r\n\r\n        if (reposition){\r\n            this.setElemListActiveByKey(activeKey, true, false);\r\n        } else {\r\n            if (checkActiveKey){\r\n                this.setElemListActiveByKey(activeKey, true, true);\r\n                this.setElemListHoverByKey(activeKey, true);\r\n            } else {\r\n                const hoveredKey = this._getHoveredKey();\r\n                if (hoveredKey !== 'null'){\r\n                    this.setElemListHoverByKey(hoveredKey, reposition);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setToMessage(typeMessage, params){\r\n        this.setStatus();\r\n        this.addInfoToList(\r\n            InputWithSearchWindow.constructMessage(\r\n                typeMessage,\r\n                params,\r\n                this.settings.constructors[typeMessage],\r\n                this.getClassesByKey('message')\r\n            )\r\n        );\r\n    }\r\n\r\n    setToError(...args){\r\n        this.setStatus();\r\n        this.addInfoToList(\r\n            InputWithSearchWindow.constructMessageError(\r\n                ...args,\r\n                this.getClassesByKey('error'),\r\n                this.settings.constructors['error']\r\n            )\r\n        );\r\n    }\r\n\r\n    setToWait(){\r\n        this.setStatus();\r\n        this.addInfoToList(\r\n            InputWithSearchWindow.constructWaitThrobber()\r\n        );\r\n    }\r\n\r\n    static constructElement(data, value, numb, fn, classes){\r\n        return `\r\n                <div class=\"${classes}\" data-key=\"${data.key}\" data-numb=\"${numb}\">\r\n                    ${fn(data.data, value, funcs.highlightMatchesToString)}\r\n                </div>\r\n            `;\r\n    }\r\n\r\n    static constructMessage(typeMessage, params, fn, classes){\r\n        return `\r\n                <div class=\"${classes}\">\r\n                    ${fn(...params)}\r\n                </div>\r\n            `;\r\n    }\r\n\r\n    static constructMessageError(textError, errorCode, classes, fn){\r\n        return `\r\n                <div class=\"${classes}\">\r\n                    ${fn(textError, errorCode)}\r\n                </div>\r\n            `;\r\n    }\r\n\r\n    static constructWaitThrobber(){\r\n        return `\r\n            <div class=\"InputWithSearchWindow-Load\">\r\n                <div class=\"InputWithSearchLoader\">\r\n                    <div class=\"InputWithSearchLoader-Loader\"></div>\r\n                </div>\r\n            </div>\r\n            `;\r\n    }\r\n}\r\n\r\nconst isHidden = el => el.offsetParent === null;\r\n\r\nconst checkOnFunction = el => typeof el === 'function';\r\n\r\nexport default InputWithSearchWindow;","class ListInputWithSearch{\r\n\r\n    constructor(){\r\n        this.saves = new window.WeakMap();\r\n    }\r\n\r\n    addElement(domElement, objectInfo){\r\n        this.saves.set(domElement, objectInfo);\r\n    }\r\n\r\n    hasElement(domElement){\r\n        return this.saves.has(domElement);\r\n    }\r\n\r\n    removeElement(domElement){\r\n        this.saves.delete(domElement);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param domElement\r\n     * @returns {InputWithSearch}\r\n     */\r\n    getElement(domElement){\r\n        return this.saves.get(domElement);\r\n    }\r\n}\r\n\r\nexport default ListInputWithSearch;","const readOnly = (target, key, descriptor) => {\r\n    descriptor.writable = false;\r\n    return descriptor;\r\n};\r\n\r\nexport {readOnly};","const delegateFn = (event, findClass, fn) => {\r\n    let target = event.target,\r\n        related = event.relatedTarget,\r\n        match;\r\n\r\n    // search for a parent node matching the delegation selector\r\n    while ( target && target !== document && !( match = target.classList.contains(findClass) ) ) {\r\n        target = target.parentNode;\r\n    }\r\n\r\n    // exit if no matching node has been found\r\n    if ( !match ) { return; }\r\n\r\n    // loop through the parent of the related target to make sure that it's not a child of the target\r\n    while ( related && related !== target && related !== document ) {\r\n        related = related.parentNode;\r\n    }\r\n\r\n    // exit if this is the case\r\n    if ( related === target ) { return; }\r\n\r\n    return fn(event, target);\r\n};\r\n\r\nfunction extend() {\r\n\r\n    // Variables\r\n    let extended = {};\r\n    let deep = false;\r\n    let i = 0;\r\n    let length = arguments.length;\r\n\r\n    // Check if a deep merge\r\n    if ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {\r\n        deep = arguments[0];\r\n        i++;\r\n    }\r\n\r\n    let merge = function (obj) {\r\n        for ( let prop in obj ) {\r\n            if ( Object.prototype.hasOwnProperty.call( obj, prop ) ) {\r\n                if ( deep && Object.prototype.toString.call(obj[prop]) === '[object Object]' ) {\r\n                    extended[prop] = extend( true, extended[prop], obj[prop] );\r\n                } else {\r\n                    extended[prop] = obj[prop];\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    for ( ; i < length; i++ ) {\r\n        let obj = arguments[i];\r\n        merge(obj);\r\n    }\r\n\r\n    return extended;\r\n\r\n}\r\n\r\nfunction highlightMatchesToString(string, query){\r\n    const reg = new RegExp('('+query+')', 'gi');\r\n    return string.replace(reg, '<span class=\"InputWithSearchWindow-Coincidence\">$1</span>');\r\n}\r\n\r\nfunction hasClass(element, cls) {\r\n    return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;\r\n}\r\n\r\nconst callEvent = (element, name, data) => {\r\n\r\n    let eventConfig = {\r\n        bubbles: true\r\n    };\r\n\r\n    if (typeof data !== 'undefined'){\r\n        eventConfig.detail = data;\r\n    }\r\n\r\n    element.dispatchEvent(new CustomEvent(name, eventConfig));\r\n};\r\n\r\nconst mergeListArraysWithoutDuplicates = (oldArr, newArr) => {\r\n\r\n    return Object.entries(oldArr).reduce((acc, info) => {\r\n        let [nameElement, classesElement] = info;\r\n        if (nameElement in newArr && Array.isArray(newArr[nameElement])){\r\n            acc[nameElement] = Array.from(new Set(classesElement.concat(newArr[nameElement])));\r\n        } else {\r\n            acc[nameElement] = classesElement;\r\n        }\r\n        return acc;\r\n    }, {});\r\n};\r\n\r\nconst insertAfter = (newNode, referenceNode) => {\r\n    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\r\n};\r\n\r\nconst funcs = {\r\n    delegateFn,\r\n    extend,\r\n    callEvent,\r\n    hasClass,\r\n    highlightMatchesToString,\r\n    mergeListArraysWithoutDuplicates,\r\n    insertAfter\r\n};\r\n\r\nexport default funcs;","const InputWithSearchForWindowWeakMap = new WeakMap();\r\n\r\n/**\r\n * @typedef {object} protectedFieldsIWS\r\n * @property {ListInputWithSearch} list\r\n * @property {Map} themes\r\n */\r\n\r\n/**\r\n *\r\n * @param object\r\n * @param {protectedFieldsIWS} data\r\n */\r\nconst setDataWeakMapIWS = (object, data) => {\r\n    InputWithSearchForWindowWeakMap.set(object, data);\r\n};\r\n\r\n/**\r\n *\r\n * @param object\r\n * @return {...protectedFieldsIWS} data\r\n */\r\nconst getDataWeakMapIWS = (object) => {\r\n    return InputWithSearchForWindowWeakMap.get(object);\r\n};\r\n\r\nconst weakMapIWS = {\r\n    setDataWeakMapIWS,\r\n    getDataWeakMapIWS\r\n};\r\n\r\nexport default weakMapIWS;","import '../scss/inputWithSearch.scss';\r\nimport './polyfills/polyfills';\r\nimport InputWithSearchForWindow from './classes/InputWithSearchForWindow';\r\nimport runDefaultThemes from './themes/themes';\r\n\r\n/**\r\n * Global object\r\n * @type {InputWithSearchForWindow}\r\n */\r\nwindow.inputWithSearch = new InputWithSearchForWindow();\r\nrunDefaultThemes();","(function() {\r\n    if (!Element.prototype.closest) {\r\n        Element.prototype.closest = function(css) {\r\n            let node = this;\r\n            while (node) {\r\n                if (node.matches(css)) return node;\r\n                else node = node.parentElement;\r\n            }\r\n            return null;\r\n        };\r\n    }\r\n})();","/**\r\n *\r\n * @param {string} name\r\n * @param {object} object\r\n * @param {function(InputWithSearch)|boolean} cb\r\n * @param {function(HTMLElement)|boolean} cbBefore\r\n * @return {{name: *, object: *, cb: *, cbBefore: *, [Symbol.iterator]: Function}}\r\n */\r\nexport default function(name, object, cb, cbBefore){\r\n    return {\r\n        name,\r\n        object,\r\n        cb,\r\n        cbBefore,\r\n        [Symbol.iterator]: function* (){\r\n            yield name;\r\n            yield object;\r\n            yield cb;\r\n            yield cbBefore;\r\n        }\r\n    };\r\n}","import defaultExportTheme from '../defaultExportTheme';\r\n\r\nexport default defaultExportTheme(\r\n    'openInfo',\r\n    {\r\n        baseWindowEventsActive: {\r\n            interceptionEvents: false,\r\n            mouseEnterElement: false,\r\n            clickElement: false\r\n        },\r\n        constructors: {\r\n            element: data => data\r\n        },\r\n        maxViewElements: 1,\r\n        classes: {\r\n            wrapper: ['InputWithSearchWindow_theme_openInfo']\r\n        },\r\n        cssParamsWindow: {\r\n            minWidth: 200,\r\n            maxWidth: 286,\r\n            seekWidthTo: 'max'\r\n        }\r\n    },\r\n    (object) => {\r\n        let rootElement = object.getWorkDomElement();\r\n        let innHTML = rootElement.getAttribute('data-iws-data');\r\n        object.setCustomData([\r\n            innHTML\r\n        ]);\r\n    }\r\n);","import defaultExportTheme from '../defaultExportTheme';\r\nimport funcs from '../../functions/functions';\r\n\r\n/**\r\n * Get from event object element\r\n * @param e\r\n * @return {InputWithSearch}\r\n */\r\nconst getFromEventObject = e => e.detail.inputWithSearch.object;\r\n\r\n/**\r\n * construct domElement for delegate select\r\n * @param {string} text\r\n * @return {string}\r\n */\r\nconst constructorDelegateElement = (text) => `\r\n    ${text}\r\n`;\r\n\r\n/**\r\n * Add delegateElement\r\n * @param {HTMLElement} toAppend\r\n * @param {string} id\r\n * @param {array} classes\r\n */\r\nconst addDelegateElement = (toAppend, id, classes = ['InputWithSearchSelect']) => {\r\n    let delegateElement = document.createElement('div');\r\n    delegateElement.setAttribute('id', id);\r\n    delegateElement.classList.add(...classes);\r\n    delegateElement.innerHTML = constructorDelegateElement('delegateElement');\r\n    funcs.insertAfter(delegateElement, toAppend);\r\n};\r\n\r\n/**\r\n * Generate attribute id for select imitate\r\n * @param {string} objectId\r\n * @return {string}\r\n */\r\nconst constructIdSelect = objectId => objectId+'_select';\r\n\r\n/**\r\n * Callback for inputWithSearch_beforeInit event\r\n * @param e\r\n */\r\nconst cbBeforeStart = e => {\r\n    let object = getFromEventObject(e);\r\n    let domElement = object.getWorkDomElement(true);\r\n    domElement.style.display = 'none';\r\n    const id = constructIdSelect(object.id);\r\n    addDelegateElement(domElement, id);\r\n    object.updateSettings({\r\n        delegateElement: document.getElementById(id)\r\n    });\r\n};\r\n\r\n/**\r\n * Callback for inputWithSearch_beforeDestruction event\r\n * @param e\r\n */\r\nconst cbBeforeDestruct = (e) => {\r\n    /**\r\n     * @type {InputWithSearch}\r\n     */\r\n    let object = getFromEventObject(e);\r\n    let HTMLElem = object.getWorkDomElement(true);\r\n    HTMLElem.removeEventListener('inputWithSearch_beforeInit', cbBeforeStart);\r\n    HTMLElem.removeEventListener('inputWithSearch_beforeDestruction', cbBeforeDestruct);\r\n    HTMLElem.style.display = '';\r\n    HTMLElem.parentElement.removeChild(document.getElementById(constructIdSelect(object.id)));\r\n};\r\n\r\nconst cbOnChangeData = (...args) => {\r\n    console.log(args);\r\n\r\n};\r\n\r\nexport default defaultExportTheme(\r\n    'select',\r\n    {\r\n        onEvents: 'click'\r\n    },\r\n    (object) => {\r\n        object.setCustomData([\r\n            'test',\r\n            'test2',\r\n            'test3'\r\n        ]);\r\n    },\r\n    (HTMLElem) => {\r\n        HTMLElem.addEventListener('inputWithSearch_beforeInit', cbBeforeStart);\r\n        HTMLElem.addEventListener('inputWithSearch_beforeDestruction', cbBeforeDestruct);\r\n        //HTMLElem.addEventListener('inputWithSearch_changeActive', cbOnChangeData);\r\n    }\r\n);","import defaultExportTheme from '../defaultExportTheme';\r\n\r\nexport default defaultExportTheme('withPerfectScrollbar', {}, (object) => {\r\n    if (window.PerfectScrollbar){\r\n        let listeners = object.getListeners();\r\n        listeners.addCustomRecord('test_afterOpen', 'inputWithSearch_afterOpen', () => {\r\n            let wrapperInner = object.inputWithSearchWindow.getElementByKey('wrapperInner');\r\n            const ps = new window.PerfectScrollbar(wrapperInner, {\r\n                wheelPropagation: false\r\n            });\r\n            object.getCustomContainer().set('customScroll', ps);\r\n        });\r\n        listeners.addCustomRecord('test_onChangeWindow', 'inputWithSearch_onChangeWindow', () => {\r\n            object.getCustomContainer().get('customScroll').update();\r\n        });\r\n        listeners.addCustomRecord('test_inputWithSearch_beforeClose', 'inputWithSearch_beforeClose', () => {\r\n            let container = object.getCustomContainer();\r\n            container.get('customScroll').destroy();\r\n            container.delete('customScroll');\r\n        });\r\n    }\r\n});","import withPerfectScrollbarTheme from './listThemes/withPerfectScrollbar';\r\nimport selectTheme from './listThemes/select';\r\nimport openInfo from './listThemes/openInfo';\r\n\r\nexport default function runDefaultThemes() {\r\n\r\n    let inputWithSearch = window.inputWithSearch;\r\n\r\n    inputWithSearch.addTheme(...withPerfectScrollbarTheme);\r\n    inputWithSearch.addTheme(...selectTheme);\r\n    inputWithSearch.addTheme(...openInfo);\r\n}","// extracted by mini-css-extract-plugin"],"sourceRoot":""}